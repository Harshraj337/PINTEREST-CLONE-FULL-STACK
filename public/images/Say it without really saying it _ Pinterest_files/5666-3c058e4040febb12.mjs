"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5666],{105737:(e,t,o)=>{function a(e,t,o){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a+=1)if(!r(e[a],t[a],o+1))return!1;return!0}function l(e,t,o){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let a in e)if(!(a in t)||!r(e[a],t[a],o+1))return!1;return!0}function r(e,t,o){if(o>=1e3)return!1;if(e===t)return!0;if(null==e||null==t||"object"!=typeof e&&"object"!=typeof t)return e!=e&&t!=t;let r=Object.prototype.toString.call(e),n=Object.prototype.toString.call(t);if(r!==n)return!1;switch(r){case"[object Array]":return a(e,t,o);case"[object Set]":return a(Array.from(e).sort(),Array.from(t).sort(),o);case"[object Object]":case"[object Arguments]":return l(e,t,o);case"[object Map]":return l(Object.fromEntries(e),Object.fromEntries(t),o);case"[object RegExp]":return e+""==t+"";case"[object Error]":return e.name===t.name&&e.message===t.message;default:return!1}}function n(e,t){return r(e,t,0)}o.d(t,{ZP:()=>n,qP:()=>a})},587070:(e,t,o)=>{o.d(t,{Z:()=>l});var a=o(667294);function l(e,t){let o=(0,a.useRef)([]),[l,r]=(0,a.useState)(),[n,i]=(0,a.useReducer)(l??(()=>t),t),s=(0,a.useCallback)(t=>{l?i(t):(o.current.length||e().then(e=>{r(()=>e.default)}),o.current=[...o.current,t])},[e,l]);return(0,a.useEffect)(()=>{l&&(o.current.forEach(i),o.current=[])},[l]),[n,s]}},415199:(e,t,o)=>{o.d(t,{pb:()=>A,nf:()=>y,lV:()=>T});var a=o(667294),l=o(702664),r=o(441143),n=o.n(r),i=o(216167),s=o(342513),d=o(107366),c=o(638747),_=o(105737),g=o(996523);let u={feature_map:Object.freeze({})},m=(e,t)=>{let o={...(0,g.Z)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return(0,_.ZP)(e,o)?e:o},E=(e=u,t)=>{if("FETCH_COMPLETE"===t.type){let{payload:{resource:o}}=t,{data:a}=t.payload.response.resource_response;if("AggregatedCommentFeedResource"===o||"AggregatedCommentReplyFeedResource"===o||"DidItCommentsResource"===o){let t=a||[],o=t.reduce((t,o)=>(t[o.id]=m(e[o.id],o),t),{});return{...e,...o}}if("UnifiedCommentsResource"===o&&a&&a.length>0){let t=a.filter(e=>"aggregatedcomment"===e.type),o=t.reduce((t,o)=>(t[o.id]=m(e[o.id],o),t),{});return{...e,...o}}if("UnifiedCommentsPreviewResource"===o&&a&&a.length>0){let t=a[0].aggregated_comment,o=t?{[t.id]:m(e[t.id],t)}:{},l=a[0].creator_reply,r=l?{[l.id]:m(e[l.id],l)}:{};return{...e,...o,...r}}if("AggregatedCommentFeaturesResource"===o&&a&&Object.keys(a).length>0)return{...e,feature_map:a}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:o}}=t;return o.id?{...e,[o.id]:o}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:o}}=t,a={...e};return delete a[o],a}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:o}}=t;return Object.fromEntries(Object.entries(e).filter(e=>e[1].user?.id!==o))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:o}}=t;return{...e,[o.id]:m(e[o.id],o)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:o}}=t,a=e[o.id],l=a.reaction_counts[1]||0,r={1:o.reaction_by_me?l+1:l-1},n={...a,reaction_by_me:o.reaction_by_me,reaction_counts:r};return{...e,[o.id]:n}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:o}}=t,a=e[o.id],l=a.helpful_count||0,r=o.marked_helpful_by_me?l+1:l-1,n={...a,marked_helpful_by_me:o.marked_helpful_by_me,helpful_count:r};return{...e,[o.id]:n}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:o}}=t,a=e[o.aggregated_comment_id],l={...a,highlighted_by_pin_owner:o.is_highlighted};return{...e,[o.aggregated_comment_id]:l}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:o}}}=t;return{...e,feature_map:{...e.feature_map,...o}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:o,id:a}}=t,l=e[a];if(!l)return e;let r={...l,comment_count:l.comment_count+o};return{...e,[a]:r}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:o,tagged_users:a}}=t,l=e[o],r={...l,tagged_users:a};return{...e,[o]:r}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:o,translatedText:a}}=t,l=e[o],r={...l,translatedText:a};return{...e,[o]:r}}return e};var f=o(785893);let{Provider:p,useHook:h}=(0,s.Z)("AggregatedComments");function A({children:e}){let t=(0,l.useSelector)(({resources:e})=>e.UnifiedCommentsResource),o=u;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),a=t?.reduce((e,t)=>(e[t.id]=m(o[t.id],t),e),{});o={...o,...a}});let[r,n]=(0,a.useReducer)(E,o),i=e=>{n({type:"FETCH_COMPLETE",payload:e})};(0,c.Z8)("AggregatedCommentFeaturesResource",i),(0,c.my)("AggregatedCommentFeaturesResource",i),(0,c.Z8)("AggregatedCommentFeedResource",i),(0,c.my)("AggregatedCommentFeedResource",i),(0,c.Z8)("AggregatedCommentReplyFeedResource",i),(0,c.my)("AggregatedCommentReplyFeedResource",i),(0,c.Z8)("DidItCommentsResource",i),(0,c.my)("DidItCommentsResource",i),(0,c.Z8)("UnifiedCommentsPreviewResource",i),(0,c.my)("UnifiedCommentsPreviewResource",i),(0,c.Z8)("UnifiedCommentsResource",i),(0,c.my)("UnifiedCommentsResource",i);let s=(0,a.useMemo)(()=>({aggregatedComments:r,dispatch:n}),[r,n]);return(0,f.jsx)(p,{value:s,children:e})}function y(){let{dispatch:e}=h();return(0,a.useMemo)(()=>({aggregatedCommentCreated(t,o){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:o}})},aggregatedCommentDeleted:(t,o)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:o}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({commentId:e,reason:t,detailedReasons:o})=>(0,d.Z)({url:`/v3/aggregated_comments/${e}/flag/`,method:"PUT",data:{commentId:e,reason:t,detailedReasons:o}}),deleteCommentMention:async t=>{let{resource_response:o}=await (0,d.Z)({url:`/v3/aggregated_comments/${t}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),a=o.data??{};e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:a.id,tagged_users:a.tagged_users}})},translateAggregatedComment:async t=>{try{let{resource_response:o}=await (0,d.Z)({url:`/v3/aggregated_comments/${t}/translate/`,method:"GET"}),a=o.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:a}})}catch(o){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:o})=>{(0,d.Z)({url:`/v3/helpful/1/${t}/`,method:o?"DELETE":"POST"}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!o}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:o,isHighlighted:a})=>{n()(t,"Could not find comment"),n()(o,"Could not find Pin"),await (0,d.Z)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:o,highlight:!a}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:o,is_highlighted:!a}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:o})=>{(0,d.Z)({url:`/v3/aggregated_comments/${t}/react/`,method:o?"DELETE":"POST",data:{reaction_type:1}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:o?0:1}}})},updateAggregatedComment:async({commentId:t,force:o,orbacSubjectId:a,tags:l,text:r})=>{let{resource_response:n}=await i.Z.create("AggregatedCommentResource",{commentId:t,force:o,tags:l,text:r,...a?{orbacSubjectId:a}:{}}).callUpdate({showError:!1}),{tagged_users:s}=n.data??{},d=s.map(e=>({...e}));e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:d,tags:JSON.parse(l),text:r}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:o,passcode:a})=>{let{resource_response:l}=await i.Z.create("AggregatedCommentFeaturesResource",{userId:t,featureMap:o,passcode:a}).callUpdate({showError:!1}),r=l.data??Object.freeze({});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:r}}})},updateCommentCount:(t,o)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:o,id:t}})}}),[e])}function T(){let{aggregatedComments:e}=h();return e}},189:(e,t,o)=>{o.d(t,{G:()=>g,Kl:()=>u,vo:()=>_});var a=o(667294),l=o(342513),r=o(638747),n=o(587070),i=o(785893);let s=()=>o.e(70809).then(o.bind(o,570809)),{Provider:d,useHook:c}=(0,l.Z)("NativeEngagements");function _({children:e}){let[t,o]=(0,n.Z)(s,[]),l=e=>{o({type:"FETCH_COMPLETE",payload:e})};(0,r.Z8)("NativeInteractionsResource",l),(0,r.my)("NativeInteractionsResource",l);let c=(0,a.useMemo)(()=>({dispatch:o,nativeEngagements:t}),[o,t]);return(0,i.jsx)(d,{value:c,children:e})}function g(){let{dispatch:e}=c();return(0,a.useMemo)(()=>({nativeEngagementsHiddenForUser:t=>{e({type:"NATIVE_ENGAGEMENT_HIDDEN_FOR_USER",payload:{userId:t}})}}),[e])}function u(){let{nativeEngagements:e}=c();return e}},155117:(e,t,o)=>{o.d(t,{f:()=>i,w:()=>s});var a=o(667294),l=o(342513),r=o(785893);let{Provider:n,useHook:i}=(0,l.Z)("Session");function s({children:e}){let[t,o]=(0,a.useState)(void 0),l=(0,a.useCallback)(()=>o(void 0),[]),i=(0,a.useMemo)(()=>({unauthFollowUserId:t,setUnauthFollowUserId:o,removeUnauthFollowUserId:l}),[t,l]);return(0,r.jsx)(n,{value:i,children:e})}},166770:(e,t,o)=>{o.d(t,{H:()=>r,o:()=>l});var a=o(342513);let{Provider:l,useHook:r}=(0,a.Z)("LimitedLogin")},735728:(e,t,o)=>{o.d(t,{N4:()=>r,Wh:()=>a,hr:()=>l});let a=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),l=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),r=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.')},193247:(e,t,o)=>{o.d(t,{Z:()=>_});var a=o(883119),l=o(930837),r=o(140017),n=o(339001),i=o(702497),s=o(554786),d=o(785893);let c=i.K_Y+"?source=block_dialogue";function _({firstName:e,onBlockUser:t,onClearModal:o}){let i=(0,r.ZP)(),_=(0,s.HG)(),g=(0,n.nk)(i._('Block {{ firstName }}?', 'blockUser.modal.header', 'header text asking if we should block the user'),{firstName:e}).join(""),u=(0,n.nk)(i._('Blocking {{ firstName }}, stops messages, follows, and comments. You can still view each other\u2019s profiles.', 'blockUser.modal.description', 'explanation of what blocking another user means'),{firstName:e});return _?(0,d.jsxs)(l.ZP,{accessibilityModalLabel:g,footer:(0,d.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"end",marginEnd:-1,marginStart:-1,children:[(0,d.jsx)(a.xu,{padding:1,children:(0,d.jsx)(a.zx,{fullWidth:!0,onClick:o,size:"lg",text:i._('Cancel', 'blockUser.modal.cancel', 'Cancel blocking a user')})}),(0,d.jsx)(a.xu,{padding:1,children:(0,d.jsx)(a.zx,{color:"red",fullWidth:!0,onClick:t,size:"lg",text:i._('Block', 'Button to confirm blocking a user', 'Button to confirm blocking a user')})})]}),heading:g,onDismiss:o,role:"alertdialog",size:"md",children:[(0,d.jsx)(a.xu,{"data-test-id":"block-text",marginEnd:6,marginStart:6,children:(0,d.jsx)(a.xv,{children:u})}),(0,d.jsx)(a.xu,{marginEnd:6,marginStart:6,marginTop:4,children:(0,d.jsx)(a.xv,{color:"default",weight:"bold",children:(0,d.jsx)(a.rU,{href:c,target:"blank",children:i._('Learn more', 'link to help center to learn more about blocking', 'link to help center to learn more about blocking')})})})]}):(0,d.jsxs)(l.ZP,{accessibilityModalLabel:g,mobileHideCloseIcon:!0,onDismiss:o,type:"block_button",children:[(0,d.jsx)(a.xu,{alignItems:"center",display:"flex",paddingX:3,paddingY:5,children:(0,d.jsx)(a.X6,{accessibilityLevel:1,size:"500",children:g})}),(0,d.jsx)(a.xu,{marginBottom:4,marginEnd:4,marginStart:4,children:(0,d.jsx)(a.xv,{children:u})}),(0,d.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:8,children:[(0,d.jsx)(a.xu,{padding:1,children:(0,d.jsx)(a.zx,{fullWidth:!0,onClick:o,size:"md",text:i._('Cancel', 'blockUser.modal.cancel', 'Cancel blocking a user')})}),(0,d.jsx)(a.xu,{padding:1,children:(0,d.jsx)(a.zx,{color:"red",fullWidth:!0,onClick:t,size:"md",text:i._('Block', 'Button to confirm blocking a user', 'Button to confirm blocking a user')})})]})]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/5666-3c058e4040febb12.mjs.map