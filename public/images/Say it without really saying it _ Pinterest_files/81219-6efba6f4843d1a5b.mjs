"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[81219,80434,24115],{185239:(e,t,n)=>{var i,s,r,a,o,l,c,d,u;n.r(t),n.d(t,{default:()=>h});let _={fragment:{argumentDefinitions:[i={defaultValue:!1,kind:"LocalArgument",name:"includeSearches"},s={defaultValue:!1,kind:"LocalArgument",name:"includeVase"},r={defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"useDynamicSearchPlaceholderDataQuery",selections:[{alias:null,args:a=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{condition:"includeSearches",kind:"Condition",passingValue:!0,selections:[{alias:null,args:o=[{kind:"Literal",name:"bubbles",value:!0},{kind:"Literal",name:"limit",value:5}],concreteType:null,kind:"LinkedField",name:"relatedQueries",plural:!1,selections:[{kind:"InlineFragment",selections:[l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,concreteType:"PinSearchRecommendationItemConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"PinSearchRecommendationItemEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"SearchRecommendationItem",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayTitle",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"PinSearchRecommendationItemConnectionContainer",abstractKey:null}],storageKey:"relatedQueries(bubbles:true,limit:5)"}]},d={condition:"includeVase",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null}]},u={alias:null,args:null,kind:"ScalarField",name:"isUnsafe",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[r,i,s],kind:"Operation",name:"useDynamicSearchPlaceholderDataQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[u,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{condition:"includeSearches",kind:"Condition",passingValue:!0,selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"relatedQueries",plural:!1,selections:[l,{kind:"InlineFragment",selections:[c],type:"PinSearchRecommendationItemConnectionContainer",abstractKey:null}],storageKey:"relatedQueries(bubbles:true,limit:5)"}]},d],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"2ece771962d68b80eb813a63c6beb387f575f727ca36c36c245f412db4bea7f1",metadata:{},name:"useDynamicSearchPlaceholderDataQuery",operationKind:"query",text:null}};_.hash="164df0d4e0963e33f3964912696c930c";let h=_;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(_.default||_)},341309:(e,t,n)=>{n.d(t,{Z:()=>r,t:()=>s});var i=n(447479);let s=[i.i.GUIDED_SEARCH_LANDING,i.i.GUIDED_SEARCH_ENTRY],r=296},214274:(e,t,n)=>{n.d(t,{Z:()=>i});let i='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Helvetica,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","ヒラギノ角ゴ Pro W3","Hiragino Kaku Gothic Pro",メイリオ,Meiryo,"ＭＳ Ｐゴシック",Arial,sans-serif'},705318:(e,t,n)=>{n.d(t,{Z:()=>r});let i=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},s=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};s.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new i(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},s.prototype.get=function(e){let t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},s.prototype.remove=function(e){let t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},s.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},s.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};let r=s},343902:(e,t,n)=>{n.d(t,{N:()=>a,Z:()=>r});var i=n(883119),s=n(785893);function r({children:e,fullWidth:t}){return(0,s.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:t?"100%":void 0}},"data-test-id":"pointer-events-wrapper",children:e})}function a({children:e,enabled:t}){return t?(0,s.jsx)(r,{children:e}):e}},160567:(e,t,n)=>{n.d(t,{Pw:()=>i,SB:()=>s,ZP:()=>a,x9:()=>r});let i=80,s=56,r=e=>"phone"===e?s:i;function a(e,t){return t?0:r(e)}},378720:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(667294);let s=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{t(!0)},[]),e}},200397:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(667294),s=n(883119),r=n(401429),a=n(785893);class o extends i.Component{constructor(...e){var t,n,i;super(...e),n={paused:!1,showPulsar:!1},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="state","string"))?i:String(i))in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidMount(){this.mountPulsar(),this.props.onExperienceMount&&this.experience&&this.props.onExperienceMount(this.experience)}componentWillUnmount(){clearTimeout(this.timer)}mountPulsar(){if(!this.experience)return;let{display_data:e}=this.experience;e.has_pulsar&&this.setState({showPulsar:!0})}renderPulsar(){let{anchor:e}=this.props,{paused:t}=this.state;if(!e)return null;let n=e.getBoundingClientRect(),{height:i,width:r}=n;return(0,a.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{marginTop:-(68+i/2),marginLeft:-(68-r/2),cursor:"pointer",pointerEvents:"none"}},"data-test-id":"pulsar-box",position:"absolute",zIndex:new s.Ry(1),children:(0,a.jsx)(s.o3,{paused:t})})}renderFlyout(e){let{anchor:t,flyoutSize:n,idealDirection:i}=this.props;return(0,a.jsx)(s.Li,{anchor:t,idealDirection:i||"down",message:e,onDismiss:()=>{},size:n})}render(){let{experienceIds:e,placementId:t,shouldTimeoutDismiss:n}=this.props,{showPulsar:i}=this.state;return(0,a.jsx)(r.Z,{eligibleIds:e,eligibleTypes:[8],placementId:t,children:({complete:e,dismiss:t,experience:r})=>{this.experience=r;let{display_data:o}=r;return o.has_pulsar||o.has_tooltip?(n&&o.disappearTime&&o.disappearTime>0&&(this.timer=setTimeout(()=>(t(),null),o.disappearTime)),(0,a.jsxs)(s.xu,{"data-test-id":"experience-tooltip-no-buttons",zIndex:new s.Ry(10),children:[i&&this.renderPulsar(),o.has_tooltip&&(!o.has_pulsar||this.state.paused)&&this.renderFlyout(o.text)]})):(e(),null)}})}}},172203:(e,t,n)=>{n.d(t,{Z:()=>_});var i=n(667294),s=n(702664),r=n(442279),a=n(179370),o=n(5859),l=n(953565);let c=(0,r.P1)(e=>e.experiences,(e,t)=>t,(e,t)=>e[t]),d=(e,t,n={})=>(0,l.nP)(`${e}.${t}`,{sampleRate:1,tags:n}),u=(e,t)=>"function"==typeof t?t(e):t,_=(e,t={},n=!1)=>{let[r,l]=(0,i.useReducer)(u,t),{isBot:_}=(0,o.B)(),{fetchExperienceForPlacements:h,mountPlacement:p,triggerExperimentsForPlacement:g,unmountPlacement:m}=(0,a.M)();(0,i.useDebugValue)(`Placement Hook ID - ${e}`),(0,i.useEffect)(()=>{let t={...r},i=n&&t?.advertiser_id?{advertiserId:t.advertiser_id}:void 0;return p(e,t,i),()=>{m(e)}},[]),(0,i.useEffect)(()=>{Object.keys(r).length>0&&h([e],_,r)},[r]);let x=(0,s.useSelector)(t=>c(t,e)),y=(0,s.useSelector)(t=>t.experiencesMulti[e]),f=x?x.triggerable_placed_exps:[];return(0,i.useEffect)(()=>{let t={platform:"web",placement_id:e,...f};d("experienceservice","placementHookExperimentTrigger.1",t),g(e,r)},[JSON.stringify(f)]),{experience:x,experiencesMulti:y,setExtraContext:l}}},699750:(e,t,n)=>{n.d(t,{Z:()=>i});function i(e,t){return e.reduce((e,n)=>{let i="function"==typeof t?t(n):n[t];return i in e||(e[i]=[]),e[i].push(n),e},{})}},984234:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(624797);function s(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let r={carousel:{authOnly:!0,partnerOnly:!0,orbacExperiment:"web_m10n_business_access_orbac_www"},disabledIdeaPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_idea_pins|disable_video)/,authOnly:!0,partnerOnly:!1},disabledPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_web_pins)/,authOnly:!0,partnerOnly:!1},disabledVideoPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_video)/,authOnly:!0,partnerOnly:!1},editing:{authOnly:!0,partnerOnly:!0},education:{authOnly:!0,partnerOnly:!0},offsitePinCreation:{scenarios:["offsite_pin_creation"]},layouts:{authOnly:!0,partnerOnly:!0,scenarios:["default","ad_creation","story_pin"]},linkStatusValidation:{authOnly:!0,partnerOnly:!0},requireLink:{scenarios:["ad_creation"]},multi_pin:{authOnly:!0,partnerOnly:!0,scenarios:["default","ad_creation"]},multi_pin_pinner:{authOnly:!0,partnerOnly:!1,scenarios:["default"]},offsite_pin_creation_multi_select:{authOnly:!0,partnerOnly:!1,experiment:"web_offsite_pin_creation_multi_select",groups:/^(enabled|employees|enabled_redirect_to_hf)/,scenarios:["offsite_pin_creation"]},ideaPinExtendVideoLength:{authOnly:!0,partnerOnly:!1,experiment:"web_idea_pin_extend_video_duration",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinExtendVideoLengthAboveTwoMin:{authOnly:!0,partnerOnly:!1,experiment:"web_idea_pin_extend_video_duration_above_two_min",groups:/^(employees_min|enabled_min)/,scenarios:["story_pin_v2"]},imageSignals:{authOnly:!0,partnerOnly:!0,experiment:"pin_quality_signal_image",groups:/^(employees|enabled)/},scheduling:{authOnly:!0,partnerOnly:!0,scenarios:["default"],orbacExperiment:"web_m10n_business_access_orbac_www"},shop_the_pin:{authOnly:!0,partnerOnly:!0,orbacExperiment:"web_m10n_business_access_orbac_www"},storyPinCommentsPermissions:{authOnly:!0,partnerOnly:!1,groups:/^(employees|enabled)/,scenarios:["story_pin_v2"],orbacExperiment:"web_m10n_business_access_orbac_www"},systemFonts:{authOnly:!0,partnerOnly:!0},tagging:{authOnly:!0,partnerOnly:!0,experiment:"web_pin_builder_tagging",groups:/^(employees|enabled|rollout)/,orbacExperiment:"web_m10n_business_access_orbac_www"},suppressSuccessModal:{scenarios:["ad_creation","business_nux"]},video:{customEnabledCheck:({user:e})=>!!e?.video_upload_allowed,authOnly:!0,hasCustomEnabledCheck:()=>!0,orbacExperiment:"web_m10n_business_access_orbac_www"},videoEditing:{authOnly:!0,partnerOnly:!0,experiment:"video_edit",groups:/^(employees|enabled)/,orbacDisabled:!0},videoTagging:{authOnly:!0,partnerOnly:!0,languages:["en"],orbacExperiment:"web_m10n_business_access_orbac_www"},pinQuality:{partnerOnly:!0},ideaPinCreationListsDeprecation:{authOnly:!0,experiment:"web_idea_pin_creation_lists_dep",groups:/^(employees|enabled)/,partnerOnly:!1,scenarios:["story_pin_v2"]},ideaPinInstantImagePublish:{authOnly:!0,experiment:"web_snc_instant_image_publishing",groups:/^(employees|enabled)/,partnerOnly:!1,scenarios:["story_pin_v2"]},ideaPinPrepopulateLastPublishedBoard:{authOnly:!0,experiment:"web_px_idea_pin_create_prepopulates_last_published_board",groups:/^(employees|enabled)/,partnerOnly:!1,scenarios:["story_pin_v2"]},ideaPinCreationWithoutThinking:{authOnly:!0,experiment:"web_snc_pin_creation_without_thinking",groups:/^(employees|enabled)/,partnerOnly:!1,scenarios:["story_pin_v2"]},ideaPinProductTagging:{authOnly:!0,experiment:"web_idea_pin_product_tagging",groups:/^(employees|enabled)/,partnerOnly:!1,scenarios:["story_pin_v2"]}},a=new class{constructor(){s(this,"_experiments",null),s(this,"_viewer",null),s(this,"_advertiser",null),s(this,"_scenario",null),s(this,"_language",null),s(this,"_context",null),s(this,"_orbacActingAs",null)}initialize(e){let{requestContext:t,viewer:n,location:s,advertiser:r,scenario:a,orbacActingAs:o}=e;this._context=e,this._experiments=t.experimentsClient,this._language=t.language,this._viewer=n,this._advertiser=r,this._orbacActingAs=o;let{adCreate:l}=(0,i.mB)(s.search);a?this._scenario=a:l?this._scenario="ad_creation":this._scenario="default"}scenario(){return this._scenario}enabled(e){if(!this._viewer||!this._experiments)return!1;let{advertisers:t,authOnly:n,customEnabledCheck:i,experiment:s,groups:a=/.*/,hasCustomEnabledCheck:o,languages:l,orbacDisabled:c,orbacExperiment:d,partnerOnly:u,scenarios:_,skipActivation:h}=r[e],p=!!this._orbacActingAs?.id&&this._orbacActingAs.id!==this._viewer.id;if(p&&(c||d&&"enabled"!==this._experiments.checkExperiment(d).group))return!1;if(o&&i&&this._context&&o(this._context))return!!this._context&&i(this._context);if(h&&this._experiments){let{checkExperiment:e}=this._experiments;return!!s&&e(s,{dangerouslySkipActivation:!0}).anyEnabled}return!!t&&!!this._advertiser&&null!==this._advertiser.billing_type||(!this._viewer||!n||!!this._viewer.isAuth)&&(!this._viewer||!u||!!this._viewer.isPartner)&&(!_||!!_.includes(this._scenario))&&(!l||!!l.includes(this._language))&&(!s||a.test(this._experiments?.checkExperiment(s).group||""))}getExperimentGroup(e){if(!this._viewer||!this._experiments)return null;let{experiment:t}=r[e];if(t){let{group:e}=this._experiments.checkExperiment(t);return e}return null}},o=a},471314:(e,t,n)=>{n.d(t,{Z:()=>I});var i=n(667294),s=n(342513),r=n(297329),a=n(862536),o=n(608029),l=n(107860),c=n(309300),d=n(521525),u=n(819281),_=n(793250),h=n(363404),p=n(840387),g=n(889998),m=n(59648),x=n(404373),y=n(970126);let f=(0,o.XV)("PwtStopwatch"),b=(e,t)=>{if(y.Z){if("start"===t.type&&!e.isTiming){let{name:n,startTime:i,navigationType:s}=t;return(0,r.A9)(`TIMING.${n}`),{isTiming:!0,name:n,isSampled:t.isSampled,startTime:"number"==typeof i?i:y.Z.now(),metricId:{type:"stopwatch",name:n,navigationType:s},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming){if(t.bypassIsTimingCheck)f("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t);else{let n=t.name||e.name;return f("ignoring action - stopwatch is not actively timing",t),(0,r.A9)(`WARN.${n}.noTiming.${t.type}`),e}}if("annotate"===t.type){let n=y.Z.now();return f(`adding annotation {${t.label}: ${n}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:n}])}}if("binaryAnnotate"===t.type)return f(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:t.value,type:t.annotationType}}};if("binaryAnnotateOperation"===t.type){let{value:n,type:i}=t.binaryAnnotationValueAndType;if(!e.binaryAnnotations[t.name])return{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n,type:i}}};{let s=e.binaryAnnotations[t.name].value||0;return f(`operating on binary annotation {
          name: ${t.name}
          pervious value: ${String(s)}
          operand: ${String(n)}
        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n?t.operation(s,n):s,type:i}}}}}if("addSubspan"===t.type){f(`adding subspan {${t.name}}`);let n=e.spans.findIndex(e=>e.name===t.name);-1!==n&&f(`WARNING: adding duplicate subspan name {${t.name}}`);let i=t.id||(0,x.Z)(),s=e.spans.findIndex(e=>e.id===i);-1!==s&&f(`WARNING: adding duplicate subspan id {${t.name}: ${i}}`);let r=0;return t.startTime?r=t.startTime:e.startTime?r=e.startTime:f(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:i,startTime:r,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){f(`starting subspan {${t.name}}`);let n=e.spans.findIndex(e=>e.name===t.name);-1!==n&&f(`WARNING: starting duplicate subspan name {${t.name}}`);let i=t.id||(0,x.Z)(),s=e.spans.findIndex(e=>e.id===i);-1!==s&&f(`WARNING: starting duplicate subspan id {${t.name}: ${i}}`);let r=t.parentName?e.spans.find(e=>e.name===t.parentName)?.id:null;return{...e,spans:[...e.spans,{name:t.name,id:i,parentId:t.parentId||r,startTime:y.Z.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){if(f(`stopping subspan {${t.name}}`),!t.id){let n=e.spans.reduce((e,n)=>n.name===t.name?[...e,n]:e,[]);n.length>1&&(0,r.H)("duplicate_subspan_stop_name",{name:t.name,type:t.type})}let n=t.id?e.spans.findIndex(e=>e.id===t.id):e.spans.findIndex(e=>e.name===t.name);return n>-1?(e.spans[n].endTime=y.Z.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):(0,r.H)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){let n=e.spans.reduce((e,n)=>n.name===t.currentName?[...e,n]:e,[]);n.length>1&&(0,r.H)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});let i=e.spans.findIndex(e=>e.name===t.currentName);return i>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:t.currentName,newName:t.newName}]:(f(`renaming subspan {${t.currentName}} to {${t.newName}}`),e.spans[i].name=t.newName):(0,r.H)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){let{startTime:n,metricId:i,pwtStaticContext:s,annotations:r,binaryAnnotations:a,isSampled:o,spans:m,traceId:b}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),o){let o=t.stopTime||y.Z.now(),v=[...m.map(t=>{t.endTime===1/0&&(t.endTime=o);let n=e.spanNameUpdates.findIndex(e=>t.name===e.currentName);return n>-1&&(f(`renaming subspan {${t.name}} to {${e.spanNameUpdates[n].newName}}`),t.name=e.spanNameUpdates[n].newName,e.spanNameUpdates=e.spanNameUpdates.filter(e=>e.newName!==t.name)),t})];if(t.manualAndResourceSpans||0===m.length){let e=(0,x.Z)();v.push({name:"network_resources",id:e,startTime:n,endTime:o,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map(t=>(0,p.Z)((0,_.p)(t,[]),e)).filter(Boolean))}let P="initial_app_load"===i.navigationType&&(0,u.Z)(),I={type:"COMPLETE",traceId:b,startTime:n,endTime:o,spans:v,annotationMap:{...(0,g.Z)(r),...(0,c.jh)("browser_",P?(0,c.D3)(P):{}),...(0,c.jh)("mark_",(0,l.gQ)())},binaryAnnotationMap:(0,d.ng)({metricId:i,pwtStaticContext:s,binaryAnnotations:a,performanceResourceTimings:t.customStopwatchBuffer||[]})};(0,h.Z)({metricId:i,pwtStaticContext:s,result:I})}return{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,x.Z)(),spanNameUpdates:[]}}if("error"===t.type){let{error:n,stopwatchPerformanceObserver:i}=t;return n&&(0,r.H)(n),i&&i.disconnect(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,x.Z)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();let{metricId:n,pwtStaticContext:i}=e,s=t.reason||"";return(0,h.Z)({metricId:n,pwtStaticContext:i,result:{type:"ABORT",reason:s}}),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,x.Z)(),spanNameUpdates:[]}}}return e},v=({name:e,sampleRate:t,navigationType:n,manualAndResourceSpans:s=!1})=>{let r=(0,a.N5)(),o=(0,i.useRef)([]),l=(0,i.useRef)(null),[c,d]=(0,i.useReducer)(b,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,x.Z)(),spanNameUpdates:[]});return r?{isTiming:c.isTiming,start:i=>(window.PerformanceObserver&&(o.current=[],l.current=(0,m.Z)({entryTypes:["resource"]},e=>{o.current=o.current.concat(e.getEntries()),o.current.length>1e3&&(o.current=o.current.slice(-1e3))})),d({type:"start",startTime:i,name:e,navigationType:n,pwtStaticContext:r,isSampled:!t||Math.random()<t})),stop:e=>d({type:"stop",stopTime:e,stopwatchPerformanceObserver:l.current,customStopwatchBuffer:o.current,manualAndResourceSpans:s}),error:e=>{d({type:"error",stopwatchPerformanceObserver:l.current,error:e})},abort:e=>d({type:"abort",stopwatchPerformanceObserver:l.current,customStopwatchBuffer:o.current,reason:e}),annotate:(e,t,n=!1)=>d({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:n}),binaryAnnotate:(e,t,n,i,s=!1)=>d({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:i,bypassIsTimingCheck:s}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:s=!1})=>d({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:s}),addSubspan:({name:e,startTime:t,endTime:n,annotations:i={},binaryAnnotations:s={},parentId:r=null,id:a=null,bypassIsTimingCheck:o=!1})=>d({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:s,parentId:r,id:a,bypassIsTimingCheck:o}),subspanStart:({name:e,annotations:t={},binaryAnnotations:n={},parentId:i=null,parentName:s=null,id:r=null,bypassIsTimingCheck:a=!1})=>d({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:s,id:r,bypassIsTimingCheck:a}),subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:s,bypassIsTimingCheck:r=!1})=>d({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n,id:i,parentId:s,bypassIsTimingCheck:r}),subspanUpdateName:({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i=!0})=>d({type:"subspanUpdateName",currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i}),getSpans:(e,t)=>c.spans.filter(n=>n[e]===t),getTraceId:()=>c.traceId}:null};var P=n(785893);let I=({name:e,sampleRate:t,abortOnUnloadOrClientNavigation:n=!0,navigationType:o,manualAndResourceSpans:l=!1})=>{let{Provider:c,useMaybeHook:d}=(0,s.Z)(`Stopwatch_${e}`);return{Provider:function({children:s}){let d=v({name:e,sampleRate:t,navigationType:o,manualAndResourceSpans:l}),u=(0,a.fM)(),_=u?u.time:0,h=(0,i.useRef)(!1),p=d?.isTiming,g=(0,i.useCallback)(t=>{h.current?(h.current=!1,d?.abort(t)):(0,r.A9)(`WARN.${e}.noTiming.abort`)},[d]),m=(0,i.useCallback)((e,t)=>{d?.annotate(e,t)},[d]),x=(0,i.useCallback)((e,t,n,i)=>{d?.binaryAnnotate(e,t,n,i)},[d]),y=(0,i.useCallback)(({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:s})=>{d?.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:s})},[d]),f=(0,i.useCallback)(({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:s,parentId:r,id:a,bypassIsTimingCheck:o})=>{d?.addSubspan({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:s,parentId:r,id:a,bypassIsTimingCheck:o})},[d]),b=(0,i.useCallback)(({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:s,id:r,bypassIsTimingCheck:a})=>{d?.subspanStart({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:s,id:r,bypassIsTimingCheck:a})},[d]),I=(0,i.useCallback)(({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:s,bypassIsTimingCheck:r})=>{d?.subspanStop({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:s,bypassIsTimingCheck:r})},[d]),A=(0,i.useCallback)(({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})=>{d?.subspanUpdateName({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})},[d]),E=(0,i.useCallback)((e,t)=>d?d.getSpans(e,t):[],[d]),S=(0,i.useCallback)(()=>d?d.getTraceId():0,[d]),w=(0,i.useCallback)(t=>{h.current?(h.current=!1,d?.error(t)):(0,r.A9)(`WARN.${e}.noTiming.error`)},[d]),T=(0,i.useCallback)(e=>{h.current&&d?.abort("duplicated_init_stopwatch_action"),h.current=!0,d?.start(e)},[d]),j=(0,i.useCallback)(t=>{h.current?(h.current=!1,d?.stop(t)):(0,r.A9)(`WARN.${e}.noTiming.stop`)},[d]);(0,i.useEffect)(()=>()=>{n&&g("unloadOrClientNavigation")},[_]);let O=(0,i.useMemo)(()=>({isTiming:p,abort:g,addAnnotation:m,addBinaryAnnotation:x,binaryAnnotationOperation:y,addSubspan:f,subspanStart:b,subspanStop:I,getSpans:E,getTraceId:S,updateSubspanName:A,stop:j,error:w,start:T}),[p,g,m,x,y,f,b,I,E,S,A,j,w,T]);return(0,P.jsx)(c,{value:O,children:s})},useHook:d}}},399924:(e,t,n)=>{n.d(t,{Z:()=>_});var i=n(667294),s=n(883119),r=n(140017),a=n(406893),o=n(785893);let l=(e,t,n)=>n||t?{__style:{animation:`slide-${e}-terms${t?"-loop":""} ${2.3*(e+(t?1:0))}s ease-out ${t?"infinite":""} forwards`}}:{__style:{}},c=()=>`
@keyframes slide-3-terms{
  0%,32.61%{
    transform: translateY(0%);
  }
  50%,82.61%{
    transform: translateY(-33.33%);
  }
  100%{
    transform: translateY(-66.66%);
  }
}
@keyframes slide-4-terms{
  0%, 21.74% {
    transform: translateY(0%);
  }
  33.33%, 55.07% {
      transform: translateY(-25%);
  }
  66.66%, 88.4% {
      transform: translateY(-50%);
  }
  100% {
      transform: translateY(-75%);
  }
}
@keyframes slide-5-terms{
  0%,16.3% {
    transform: translateY(0%);
  }
  25%,41.3%{
    transform: translateY(-20%);
  }
  50%,66.3%{
    transform: translateY(-40%);
  }
  75%,91.3%{
    transform: translateY(-60%);
  }
  100% {
    transform: translateY(-80%);
  }
}
@keyframes slide-3-terms-loop {
  0%, 21.74% {
    transform: translateY(0%);
  }
  33.33%, 55.07% {
      transform: translateY(-25%);
  }
  66.66%, 88.4% {
      transform: translateY(-50%);
  }
  100% {
      transform: translateY(-75%);
  }
}
@keyframes slide-4-terms-loop {
  0%,16.3% {
    transform: translateY(0%);
  }
  25%,41.3%{
    transform: translateY(-20%);
  }
  50%,66.3%{
    transform: translateY(-40%);
  }
  75%,91.3%{
    transform: translateY(-60%);
  }
  100% {
    transform: translateY(-80%);
  }
}
@keyframes slide-5-terms-loop {
  0%, 13.04% {
    transform: translateY(0%);
  }
  20%,33.04%{
    transform: translateY(-16.66%);
  }
  40%,53.04%{
    transform: translateY(-33.33%);
  }
  60%,73.04%{
    transform: translateY(-49.98%);
  }
  80%,93.04%{
    transform: translateY(-66.64%);
  }
  100% {
    transform: translateY(-83.3%);
  }
}
`;function d({gradientPrimaryColor:e,gradientSecondaryColor:t,gradientDirection:n,position:i}){return(0,o.jsx)(s.xu,{bottom:"bottom"===i,dangerouslySetInlineStyle:{__style:{backgroundImage:`linear-gradient(${n}, ${e}, ${t})`,pointerEvents:"none"}},height:16,position:"absolute",rounding:"pill",top:"top"===i,width:"100%",zIndex:new s.Ry(1)})}let u=({children:e})=>(0,o.jsx)(s.xv,{color:"subtle",inline:!0,lineClamp:1,children:e});function _({suggestedSearchTerms:e,defaultPlaceholder:t,isLoop:n,isAnimated:_,hasPlaceholderAnimationCompleted:h,setHasPlaceholderAnimationCompleted:p,height:g=48,gradientSecondaryColor:m="#FFF"}){let x=(0,r.ZP)(),y=(_||n)&&!h,f=(_||n)&&h,b=0===e.length,v=(0,i.useRef)(null),P=(0,i.useCallback)(()=>{p(!0)},[p]);return(0,i.useEffect)(()=>{let e;return v.current&&(v.current.addEventListener("animationend",P),e=v.current),()=>{e&&e.removeEventListener("animationend",P)}},[p,P]),(0,o.jsx)(s.xu,{ref:v,alignItems:"center",dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"dynamic-search-placeholder",display:"flex",height:g,overflow:"hidden",position:"relative",children:b?(0,o.jsx)(s.xv,{color:"subtle",inline:!0,children:t}):(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(d,{gradientDirection:"to top",gradientPrimaryColor:"rgba(255, 255, 255, 0)",gradientSecondaryColor:m,position:"top"}),(0,o.jsx)(d,{gradientDirection:"to bottom",gradientPrimaryColor:"rgba(255, 255, 255, 0)",gradientSecondaryColor:m,position:"bottom"}),(0,o.jsxs)(s.kC,{alignItems:"stretch",height:18,justifyContent:"start",children:[(0,o.jsx)(s.xv,{color:"subtle",inline:!0,overflow:"noWrap",children:x._('Search for', 'searchBar.placeholder.dynamicText', 'Placeholder in search input. This text is followed by a set of animated search phrases like "Search for aesthetic art"')}),(0,o.jsx)(a.Z,{unsafeCSS:c()}),(0,o.jsxs)(s.xu,{children:[y&&(0,o.jsxs)(s.xu,{dangerouslySetInlineStyle:l(e.length,n,_),display:"inlineBlock",marginStart:1,children:[e.map(e=>(0,o.jsx)(s.xu,{marginBottom:7,children:(0,o.jsx)(u,{children:e})},e)),n&&(0,o.jsx)(s.xu,{marginBottom:7,children:(0,o.jsx)(u,{children:e[0]})})]}),!y&&!f&&(0,o.jsx)(s.xu,{display:"inlineBlock",marginStart:1,children:(0,o.jsx)(u,{children:e[0]})}),f&&(0,o.jsx)(s.xu,{display:"inlineBlock",marginStart:1,children:(0,o.jsx)(u,{children:e[e.length-1]})})]})]})]})})}},59709:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(667294);let s=(e,t)=>{let n=RegExp("\\b"+t+"\\b","i"),i=e.match(n);if(!i)return null;let s=e.toLowerCase().indexOf(t.toLowerCase()),r=e.slice(0,s),a=e.slice(s,s+t.length);return[r,a]};var r=n(785893);function a({searchDelightText:e,searchDelightConfig:t}){let{text_background_color:n,text_colors:i=[]}=t,s=n?{backgroundColor:n,margin:"-2px",padding:"2px"}:void 0;if(!(i.length>1))return(0,r.jsx)("span",{style:{color:i[0],whiteSpace:"pre-wrap",...s},children:e},`searchDelight-${e}`);{let t=0;return(0,r.jsx)("span",{style:{whiteSpace:"pre-wrap",...s},children:e.split("").map((e,n)=>{let s=i[t];return" "!==e&&(t=(t+1)%i.length),(0,r.jsx)("span",{style:{color:s},children:e},`searchDelight-${n}`)})})}}var o=n(883119);let l=({children:e,gray:t,weight:n="normal"})=>(0,r.jsx)(o.xv,{color:t?"subtle":void 0,inline:!0,weight:n,children:(0,r.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:e})});function c({allBold:e,searchDelightParts:t,searchDelightConfig:n,text:s,weightPivot:o}){let c=t[1],d=s.indexOf(c),u=d+c.length;return o<=d?(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(l,{gray:!0,weight:e?"bold":"normal",children:s.substring(0,o)}),(0,r.jsxs)(l,{weight:"bold",children:[s.substring(o,d),(0,r.jsx)(a,{searchDelightConfig:n,searchDelightText:c}),s.substring(u)]})]}):o<=u?(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(l,{gray:!0,weight:e?"bold":"normal",children:s.substring(0,d)}),(0,r.jsxs)(l,{weight:"bold",children:[(0,r.jsx)(a,{searchDelightConfig:n,searchDelightText:c}),s.substring(u)]})]}):(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(l,{gray:!0,weight:e?"bold":"normal",children:s.substring(0,d)}),(0,r.jsx)(l,{weight:"bold",children:(0,r.jsx)(a,{searchDelightConfig:n,searchDelightText:c})}),(0,r.jsx)(l,{gray:!0,weight:e?"bold":"normal",children:s.substring(u,o)}),(0,r.jsx)(l,{weight:"bold",children:s.substring(o)})]})}function d({allBold:e,searchDelightConfig:t,query:n="",text:a}){let o=a.toLowerCase().startsWith(n.toLowerCase())?n:"",d=o.length,u=t?t.search_query_list.map(e=>s(a,e)).filter(Boolean).sort((e,t)=>e&&t?t[1].length-e[1].length:0).shift():null;return u&&t?(0,r.jsx)(c,{allBold:e,searchDelightConfig:t,searchDelightParts:u,text:a,weightPivot:d}):(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(l,{gray:!0,weight:e?"bold":"normal",children:a.substr(0,d)}),(0,r.jsx)(l,{weight:"bold",children:a.substr(d)})]})}},583054:(e,t,n)=>{n.d(t,{Z:()=>x});var i=n(667294),s=n(616550),r=n(883119),a=n(214274),o=n(140017),l=n(406893),c=n(96157),d=n(340523),u=n(399924),_=n(370833),h=n(219117),p=n(554786),g=n(149722),m=n(785893);function x({dataTestId:e,focusOptionId:t,isFocused:n,name:x,onBlur:y,onChange:f,onClick:b=()=>{},onFocus:v,onKeyDown:P,onSearchTrigger:I,placeholder:A,value:E,disabled:S=!1,searchBoxHovered:w,suggestedSearchTerms:T=[]}){let[j,O]=(0,i.useState)(!1),C=(0,o.ZP)(),R=(0,i.useRef)(null),{checkExperiment:k}=(0,d.F)(),{isAuth:M}=(0,g.Z)(),N=(0,p.ZP)(),z=(0,s.TH)(),D=(0,r.JZ)(),L=(0,c.uM)(z),Z=!M&&L&&!D&&k((0,h.r)(N)).group||null,B=(0,h.H)(Z);(0,i.useEffect)(()=>{R.current&&I&&R.current.addEventListener("searchTrigger",I)},[]),(0,i.useEffect)(()=>{if(!R.current)return;let e=document.activeElement===R.current;e!==n&&(n?R.current.focus():R.current.blur())},[n]);let U=B.isEnabled&&!E&&L;(0,i.useEffect)(()=>{O(!1)},[z.pathname]);let F=A||C._('Search', 'searchBox.searchInput.placeholder', 'placeholder text for the search box');return(0,m.jsxs)(r.xu,{flex:"grow",height:"100%",children:[(0,m.jsx)(l.Z,{unsafeCSS:`input::placeholder{ color: #767676${U?"; opacity: 0":""}}`}),(0,m.jsx)("input",{ref:R,"aria-activedescendant":t,"aria-autocomplete":"list","aria-controls":"SuggestionsMenu","aria-describedby":"searchBoxAccessibleText","aria-expanded":n,"aria-label":C._('Search', 'searchBox.searchInput.placeholder', 'placeholder text for the search box'),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off","data-test-id":e,disabled:S,name:x,onBlur:y,onChange:e=>{f(e.target.value)},onClick:b,onFocus:v,onKeyDown:P,placeholder:F,role:"combobox",style:{backgroundColor:"transparent",border:"none",color:"#333",fontFamily:a.Z,fontSize:16,fontWeight:"normal",height:"100%",outline:"none",padding:"0",width:"100%"},type:"text",value:E}),U&&(0,m.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},position:"absolute",top:!0,width:"85%",children:(0,m.jsx)(u.Z,{defaultPlaceholder:F,gradientSecondaryColor:w?_.w:_.S,hasPlaceholderAnimationCompleted:j,isAnimated:B.isAnimated,isLoop:B.isLoop,isRelatedSearches:B.isRelatedSearches,isVase:B.isVase,searchBoxHovered:w,setHasPlaceholderAnimationCompleted:O,suggestedSearchTerms:T})}),(0,m.jsx)(r.xu,{display:"none",id:"searchBoxAccessibleText",children:C._(`When autocomplete results are available use up and down arrows to
                review and enter to select. Touch device users, explore by touch or
                with swipe gestures.`, 'searchBox.searchInput.accessibleText', 'Accessible text for search input')})]})}},899384:(e,t,n)=>{n.d(t,{Z:()=>m});var i,s=n(667294),r=n(422578),a=n(616550),o=n(883119),l=n(96157),c=n(340523),d=n(5859),u=n(219117),_=n(217058),h=n(487487),p=n(554786);let g=void 0!==i?i:i=n(185239);function m(){let[e,t]=(0,s.useState)([]),n=(0,a.TH)(),i=(0,o.JZ)(),m=(0,h.Z)(n.pathname)||"",{isAuthenticated:x}=(0,d.B)(),{checkExperiment:y}=(0,c.F)(),f=(0,p.ZP)(),b=(0,l.uM)(n),v=!x&&b&&!i&&y((0,u.r)(f)).group||null,P=(0,u.H)(v),I=(0,r.useRelayEnvironment)();return(0,s.useEffect)(()=>{!x&&m&&P.isEnabled&&("desktop"!==f&&t([]),(0,r.fetchQuery)(I,g,{pinId:m,includeSearches:P.isRelatedSearches,includeVase:P.isVase},{fetchPolicy:"store-or-network"}).subscribe({next:e=>{let n=[];e.v3GetPinQuery?.data?.isUnsafe?(0,_.My)("useSearchBoxDynamicPlaceholder.fetch_dynamic_placeholder.unsafe_pin"):(e.v3GetPinQuery?.data?.pinJoin?.visualAnnotation&&(n=e.v3GetPinQuery.data.pinJoin.visualAnnotation),e.v3GetPinQuery?.data?.relatedQueries?.connection?.edges&&(n=e.v3GetPinQuery.data.relatedQueries.connection.edges.reduce((e,t)=>{let n=t?.node?.displayTitle;return n?[...e,n]:e},[])),n.length<3?((0,_.My)("useSearchBoxDynamicPlaceholder.fetch_dynamic_placeholder.missing_data",{termsCount:n.length,deviceType:f,dataType:P.isVase?"vase":"searches"}),n=[]):(n=n.filter(e=>e.split(" ").length>1)).length<3&&((0,_.My)("useSearchBoxDynamicPlaceholder.fetch_dynamic_placeholder.not_enough_words",{termsCount:n.length,deviceType:f,dataType:P.isVase?"vase":"searches"}),n=[])),t(n.map(e=>e.toLowerCase()).slice(0,5))},error:e=>{(0,_.My)("useSearchBoxDynamicPlaceholder.fetch_dynamic_placeholder.error",{message:e.message})}}))},[m,P.isEnabled,P.isVase,P.isRelatedSearches,x,I,f]),(0,s.useEffect)(()=>{b||0===e.length||t([])},[b,e.length]),e}},124946:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),s=n(216167),r=n(705318);function a({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:n={},value:a}){let o=(0,i.useRef)(!1),l=(0,i.useRef)({}),[c,d]=(0,i.useState)([]),u=function({resourceName:e,resourceOptions:t}){let n=(0,i.useRef)();return n.current||(n.current=function({resourceName:e,resourceOptions:t}){let n={...t,count:"count"in t?t.count:5},i=s.Z.create(e,n),a=new r.Z,o=()=>{i.abort()},l=async(e,t)=>{if(i.isCalling()){let n=i.options?.term,s=i.options?.pin_scope;if(e===n&&t===s)return;o()}let{bookmarks:n,...s}=i.options||{};i.options={...s,term:e,pin_scope:t};let r=await i.callGet({showError:!1}),{data:l}=r.resource_response,c=l?.items,d=l?.hint||{};return a.set(`${t}-${e}`,{hint:d,items:c}),{term:e,items:c,hint:d}};return async function(e,t){let n=a.get(`${t}-${e}`);if(n){let{items:t}=n;if(t&&t.length){o();let{hint:i}=n;return{hint:i,items:t,term:e}}}return e.length>=0?l(e,t):{hint:{},items:[],term:e}}}({resourceName:e,resourceOptions:t})),n.current}({resourceName:t,resourceOptions:n}),_=n.pin_scope||"pins",h=`${_}-${a}`;return(0,i.useEffect)(()=>{(async()=>{if(null!=a&&(e||o.current)){if(h in l.current)d(l.current[h]);else try{let e=await u(a,_);if(e){let{items:t}=e;l.current[h]=t,d(t)}}catch(e){if("Resource call aborted"===e)return;throw e}}o.current||(o.current=!0)})()},[a,_,h]),c}},207099:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(337478);function s(e){let{query:t,rs:n,scope:s,guideAdded:r,filters:a,user:o,requestParams:l}=e;if(!t)return"/";let c={q:t,rs:n,...l};if(a&&(c.filters=a),o&&(c.user=o),r&&r.term&&(c.add_refine=`${r.term}|guide|word|${r.index}`),window.location.pathname.startsWith("/explore"))return`/search/pins/?${(0,i.Z)(c)}`;let d=s;return["pins","buyable_pins","my_pins","boards","users","idea_pins"].includes(d)||(d="pins"),d?`/search/${d}/?${(0,i.Z)(c)}`:`${window.location.pathname}?${(0,i.Z)(c)}`}},370833:(e,t,n)=>{n.d(t,{S:()=>s,w:()=>i});let i="#E1E1E1",s="#F1F1F1"},768806:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(624797);function s(e){let t;let n=(0,i.mB)(e.search)||{};if(n.q){let n=e.pathname.split("/");t=n.length>2?n[2]:"pins"}if(n.q&&t){let e=Array.isArray(n.q)?n.q.join(" "):n.q,i=Array.isArray(n.rs)?"":n.rs,s=Array.isArray(n.user)?"":n.user;return{filters:n.filters||"",user:s,query:e||"",rs:i||"",scope:"pins"===t||"buyable_pins"===t||"my_pins"===t||"boards"===t||"users"===t||"videos"===t||"idea_pins"===t?t:"pins"}}return{filters:"",user:"",query:"",rs:"",scope:"pins"}}},219117:(e,t,n)=>{n.d(t,{H:()=>s,r:()=>i});let i=e=>"desktop"===e?"dweb_unauth_dynamic_search_placeholder":"mweb_unauth_dynamic_search_placeholder",s=e=>{let t={isAnimated:!1,isLoop:!1,isVase:!1,isRelatedSearches:!1,isEnabled:!1};return e&&((e.includes("animated")||e.includes("loop"))&&(t.isAnimated=!0),e.includes("loop")&&(t.isLoop=!0),e.includes("vase")&&(t.isVase=!0),e.includes("search")&&(t.isRelatedSearches=!0),e.includes("enabled")&&(t.isEnabled=!0)),t}},314018:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(860208),s=n(337478);function r({bubbleId:e,pinId:t,query:n,referringSource:r,storyCategory:a,storyId:o,title:l}){let c=[0,24,21,26].includes(a),d=(0,s.Z)({q:n,rs:r||void 0,b_id:e,source_id:o,top_pin_id:t}),u=c&&l?(0,i.x)({title:l,id:e,articleType:"discover"}):`/discover/article/${e}/`;return c?u:`/search/pins/${d?"?"+d:""}`}},843964:(e,t,n)=>{n.d(t,{Z:()=>i});let i=()=>window.location.pathname},487487:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(689390),s=n(139655);let r=e=>{let t=/^\/pin\/([a-zA-Z0-9-]+)/,n=(0,s.Z)(e);if(t.test(n.path)){let e=n.path.match(t);if(e)return(0,i.Z)(e[1]).pinId||void 0}}},373543:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(623891);let s=({url:e})=>{if(e){let t=e.split("?");if(t[1])return(0,i.Z)(t[1])}return(0,i.Z)()}},872038:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),s=n(883119),r=n(785893);function a(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let o={default:{backgroundColor:"#efefef",boxShadow:"none"},drag:{backgroundColor:"#d7edff",boxShadow:"0 0 0 1px #0074e8"},error:{backgroundColor:"#ffe0e0",boxShadow:"0 0 0 1px #e60023"}};class l extends i.Component{constructor(...e){super(...e),a(this,"state",{isDraggingOver:!1,isHoveringOver:!1,containedHeight:null}),a(this,"handleOnDragEnter",e=>{let{onDragEnter:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!0}),t&&t(e)}),a(this,"handleOnDragLeave",e=>{let{onDragLeave:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)}),a(this,"handleOnDragOver",e=>{let{onDragOver:t}=this.props;e.preventDefault(),e.stopPropagation(),t&&t(e)}),a(this,"handleOnDrop",e=>{let{onDrop:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)}),a(this,"handleMouseEnter",()=>{let{onMouseEnter:e}=this.props;e&&e(),this.setState({isHoveringOver:!0})}),a(this,"handleMouseLeave",()=>{let{onMouseLeave:e}=this.props;e&&e(),this.setState({isHoveringOver:!1})}),a(this,"setContainedHeight",e=>{this.setState({containedHeight:e})})}getDragContainerStyles(e,t){return t&&"default"===e?{...o[e],backgroundColor:t}:o[e]}render(){let{children:e,color:t,dropRounding:n,hasError:i,height:a,position:o,width:l}=this.props,{isDraggingOver:c,isHoveringOver:d,containedHeight:u}=this.state,_=c?"drag":i?"error":"default";return(0,r.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{...this.getDragContainerStyles(_,t),...n?{borderRadius:n}:{}}},"data-test-id":"drag-behavior-container",height:a||u||"100%",onDragEnter:this.handleOnDragEnter,onDragLeave:this.handleOnDragLeave,onDragOver:this.handleOnDragOver,onDrop:this.handleOnDrop,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:o,rounding:2,width:l||"100%",children:e(c,d,this.setContainedHeight,u)})}}},979702:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),s=n(883119),r=n(872038),a=n(785893);function o(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let l={cursor:"pointer",height:"100%",opacity:0,position:"absolute",width:"100%",left:0,top:0,fontSize:0};class c extends i.Component{constructor(...e){super(...e),o(this,"handleChange",e=>{let{onChange:t}=this.props;e.preventDefault(),e.stopPropagation(),t&&t(e),e.target.value=""}),o(this,"handleClick",e=>{let{onClick:t}=this.props;t&&t(e)})}render(){let{accept:e,accessibilityLabel:t,allowMultipleFiles:n,children:i,color:o,dropRounding:c,hasError:d,height:u,id:_,onDrop:h,position:p,rounding:g=2,width:m,isAriaHidden:x,experimentsClient:y}=this.props;return(0,a.jsx)(r.Z,{color:o,dropRounding:c,experimentsClient:y,hasError:d,height:u,onDrop:h,position:p,width:m,children:r=>(0,a.jsxs)(s.xu,{height:"100%",position:"relative",rounding:g,children:[i(r),(0,a.jsx)("input",{accept:e,"aria-hidden":x,"aria-label":t,"data-test-id":_,id:_,multiple:n,onChange:this.handleChange,onClick:this.handleClick,style:l,tabIndex:x?-1:0,type:"file"})]})})}}},478492:(e,t,n)=>{n.d(t,{P7:()=>s,Zx:()=>o,sc:()=>a,ss:()=>r,xl:()=>i});let i=["image/bmp","image/gif","image/jpeg","image/png","image/tiff","image/webp"],s=["bmp","gif","jpg","jpeg","png","tiff","webp"],r=["video/mp4","video/x-m4v","video/quicktime"],a=["mp4","m4v","mov"],o={border:"2px dashed #DADADA",borderRadius:"32px",pointerEvents:"none"}},622270:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(339001),s=n(203966),r=n(984234);let a=(e,t)=>t.ngettext('pixel', 'pixels', e, 'pinBuilder.errorMessaging.pixel', 'Label for number of pixels');function o(e,t,n,o,l){switch(e){case"FILE_UNRECOGNIZED_TYPE":return{dispatchId:n,id:"FILE_UNRECOGNIZED_TYPE",type:"error",message:t._('Your upload failed because it\'s the wrong format.', 'vip.errorMessaging.message', 'Error message uploading a file format that is not supported.'),blocking:!0};case"IMAGE_OVER_MAX_DIMENSIONS":return{dispatchId:n,id:"IMAGE_OVER_MAX_DIMENSIONS",type:"error",message:t._('This image is too large and can\'t be uploaded. Please try a smaller image size.', 'vip.errorMessaging.message', 'Error message uploading an image file that is too large'),blocking:!0};case"IMAGE_UNDER_MIN_DIMENSIONS":let[c,d]=r.Z.enabled("pinQuality")||l?.isStoryPin?[300,200]:[100,100],u=(0,i.nk)(t._('Hmm...this image is too small. Make sure your images are at least {{ minWidth }} x {{ minHeight }} {{ pixelString }}.', 'vip.errorMessaging.minImageMessage', 'Error message when uploading an image file that is smaller than the supported height and width.'),{minHeight:c,minWidth:d,pixelString:a(d,t)}).join("");return{dispatchId:n,id:"IMAGE_UNDER_MIN_DIMENSIONS",type:"error",message:u,blocking:!0};case"IMAGE_OVER_MAX_FILE_SIZE":let _=(0,i.nk)(t.ngettext('This image is too large and can\'t be uploaded. Images can\'t be larger than {{max_size_mb}}MB', 'This image is too large and can\'t be uploaded. Images can\'t be larger than {{max_size_mb}}MB', 20, 'vip.errorMessaging.message', 'Error message when uploading an image file larger than the supported size'),{max_size_mb:20}).join("");return{dispatchId:n,id:"IMAGE_OVER_MAX_FILE_SIZE",type:"error",message:_,blocking:!0};case"IMAGE_UNRECOGNIZED_TYPE":return{dispatchId:n,id:"IMAGE_UNRECOGNIZED_TYPE",type:"error",message:t._('This image type is invalid - please make sure the image is natively .jpg or .png', 'vip.errorMessaging.message', 'Error message uploading an image that is malformed in some way'),blocking:!0};case"VIDEO_UNDER_MIN_DIMENSIONS":let h=(0,i.nk)(t.ngettext('This video is too small and can\'t be uploaded. Videos must have a height and width larger than {{min_size_video}} pixel', 'This video is too small and can\'t be uploaded. Videos must have a height and width larger than {{min_size_video}} pixels', 100, 'vip.errorMessaging.message', 'Error message when uploading an video file that is smaller than the supported height and width.'),{min_size_video:100}).join("");return{dispatchId:n,id:"VIDEO_UNDER_MIN_DIMENSIONS",type:"error",message:h,blocking:!0};case"VIDEO_BELOW_MIN_DURATION":let p=Math.floor(4),g=(0,i.nk)(t.ngettext('This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minVideoLengthSeconds}} second.', 'This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minVideoLengthSeconds}} seconds.', p, 'vip.errorMessaging.message', 'Error message uploading a video file that is shorter than required seconds.'),{minVideoLengthSeconds:p}).join("");return{dispatchId:n,id:"VIDEO_BELOW_MIN_DURATION",type:"error",message:g,blocking:!0};case"STORY_PIN_VIDEO_BELOW_MIN_DURATION":let m=s.W_,x=(0,i.nk)(t.ngettext('This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minStoryPinVideoLengthSeconds}} second.', 'This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minStoryPinVideoLengthSeconds}} seconds.', m, 'vip.errorMessaging.storyPinVideoBelowMin.message', 'Error message uploading a video file that is shorter than required seconds.'),{minStoryPinVideoLengthSeconds:m}).join("");return{dispatchId:n,id:"STORY_PIN_VIDEO_BELOW_MIN_DURATION",type:"error",message:x,blocking:!0};case"VIDEO_COVER_INVALID_ASPECT_RATIO":return{dispatchId:n,id:"VIDEO_COVER_INVALID_ASPECT_RATIO",type:"error",message:t._('The video\'s cover image must be of the same dimensions as the video itself', 'vip.errorMessaging.message', 'Error message when uploading cover image with non matching dimensions to video'),blocking:!0};case"VIDEO_GENERAL_UPLOAD_ERROR":return{dispatchId:n,id:"VIDEO_GENERAL_UPLOAD_ERROR",type:"error",message:t._('Hmm, your upload failed for some reason. Please try again.', 'vip.errorMessaging.message', 'Error message uploading a video file and the process fails'),blocking:!0};case"VIDEO_OVER_MAX_DURATION":let y=(0,i.nk)(t.ngettext('This video is too long and can\'t be uploaded. Videos can\'t be longer than {{max_video_length_minutes}} minute.', 'This video is too long and can\'t be uploaded. Videos can\'t be longer than {{max_video_length_minutes}} minutes.', 15, 'vip.errorMessaging.message', 'Error message uploading a video file that is longer than required minutes.'),{max_video_length_minutes:15}).join("");return{dispatchId:n,id:"VIDEO_OVER_MAX_DURATION",type:"error",message:y,blocking:!0};case"STORY_PIN_VIDEO_OVER_MAX_DURATION":let f=(0,i.nk)(t._('This video is too long and can\'t be uploaded. Videos can\'t be longer than {{max_video_length_seconds}} seconds.', 'vip.errorMessaging.message', 'Error message uploading a story pin video file that is longer than limit in seconds. max_video_length_seconds: Integer representing the max video length'),{max_video_length_seconds:Math.floor(s.P9)}).join("");return{dispatchId:n,id:"STORY_PIN_VIDEO_OVER_MAX_DURATION",type:"error",message:f,blocking:!0};case"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION":let b=Math.floor(s.FH)/60,v=(0,i.nk)(t._('This video is too long and can\'t be uploaded. Videos can\'t be longer than {{duration}} minutes.', 'vip.errorMessaging.storyPinMaxTimeLimit', 'Error message uploading a story pin video file that is longer than limit in minutes. duration: Integer representing the max video length'),{duration:b}).join("");return{dispatchId:n,id:"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION",type:"error",message:v,blocking:!0};case"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION_ABOVE_TWO_MIN":let P=Math.floor(o??s.FH)/60,I=(0,i.nk)(t._('This video is too long and can\'t be uploaded. Videos can\'t be longer than {{duration}} minutes.', 'vip.errorMessaging.storyPinMaxTimeLimit', 'Error message uploading a story pin video file that is longer than limit in minutes. duration: Integer representing the max video length'),{duration:P}).join("");return{dispatchId:n,id:"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION_ABOVE_TWO_MIN",type:"error",message:I,blocking:!0};case"VIDEO_OVER_MAX_FILE_SIZE":let A=(0,i.nk)(t.ngettext('This video is too large and can\'t be uploaded. Videos can\'t be larger than {{max_video_size_gb}}GB.', 'This video is too large and can\'t be uploaded. Videos can\'t be larger than {{max_video_size_gb}}GB.', 2, 'vip.errorMessaging.message', 'Error message uploading a video file larger than required gigabytes.'),{max_video_size_gb:2}).join("");return{dispatchId:n,id:"VIDEO_OVER_MAX_FILE_SIZE",type:"error",message:A,blocking:!0};case"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":{let e=s.Lr/1024/1024,r=(0,i.nk)(t.ngettext('This video is too large and can\'t be uploaded. Videos can\'t be larger than {{maxVideoFileSize}}MB.', 'This video is too large and can\'t be uploaded. Videos can\'t be larger than {{maxVideoFileSize}}MB.', e, 'vip.errorMessaging.message', 'Error message uploading a video file larger than required megabytes. maxVideoFileSize: max video size for videos attempting to upload'),{maxVideoFileSize:e}).join("");return{dispatchId:n,id:"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE",type:"error",message:r,blocking:!0}}case"VIDEO_UNRECOGNIZED_ENCODING":return{dispatchId:n,id:"VIDEO_UNRECOGNIZED_ENCODING",type:"error",message:t._('This video isn\'t encoded in H.264', 'vip.errorMessaging.message', 'Error message uploading a video file that is malformed (generic error message)'),blocking:!0};case"VIDEO_UNRECOGNIZED_ENCODING_IN_CHROME":return{dispatchId:n,id:"VIDEO_UNRECOGNIZED_ENCODING_IN_CHROME",type:"error",message:t._('This video isn\'t encoded in H.264 or H.265.  Please use Safari if you want to upload ProRes videos.', 'vip.errorMessaging.message.chrome', 'Error message uploading a video file that is malformed from Chrome'),blocking:!0};case"VIDEO_UNRECOGNIZED_ENCODING_IN_FIREFOX":return{dispatchId:n,id:"VIDEO_UNRECOGNIZED_ENCODING_IN_FIREFOX",type:"error",message:t._('This video isn\'t encoded in H.264.  Please use Safari if you want to upload H.265 or ProRes videos.', 'vip.errorMessaging.message.firefox', 'Error message uploading a video file that is malformed from Firefox'),blocking:!0};case"VIDEO_UNRECOGNIZED_ENCODING_IN_SAFARI":return{dispatchId:n,id:"VIDEO_UNRECOGNIZED_ENCODING_IN_SAFARI",type:"error",message:t._('This video isn\'t encoded in H.264 or H.265 or ProRes.', 'vip.errorMessaging.message.safari', 'Error message uploading a video file that is malformed from Safari'),blocking:!0};case"VIDEO_UNSUPPORTED_RATIO":return{dispatchId:n,id:"VIDEO_UNSUPPORTED_RATIO",type:"error",message:t._('This video is too tall or narrow and can\'t be uploaded. Videos need to be between 1:2 and 1.91:1 aspect ratio.', 'vip.errorMessaging.message', 'Error message uploading a video file that is not a supported aspect ratio'),blocking:!0};default:return{dispatchId:n,id:"GENERAL_ERROR",type:"error",message:t._('Hmm, something went wrong. Please try again.', 'vip.errorMessaging.message', 'Error message for generic error during Pin creation'),blocking:!0}}}},643749:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(172045),s=n(622270);let r=e=>t=>t((0,s.Z)("IMAGE_UNRECOGNIZED_TYPE",e)),a=e=>t=>new Promise((n,s)=>{let a=new Image;a.addEventListener("load",()=>n({fileSrc:t,height:a.height,id:(0,i.Z)(),name:t.name,size:t.size,src:a.src,type:"localImage",width:a.width})),a.addEventListener("error",()=>r(e)(s)),a.src=URL.createObjectURL(t)})},744627:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(172045),s=n(622270),r=n(354185);let a=e=>t=>{t((0,s.Z)((0,r.Z)(),e))},o=e=>t=>new Promise((n,s)=>{let r=new FileReader,o=window.navigator?.userAgent||"",l=o.includes("Safari"),c=l?t.slice(0,t.size,"video/mp4"):t,d=URL.createObjectURL(c);r.addEventListener("load",()=>{let r=document.createElement("video");r.addEventListener("loadedmetadata",()=>n({id:(0,i.Z)(),duration:r.duration,fileSrc:t,height:r.videoHeight,name:t.name,size:t.size,src:r.src,thumbnail:0,type:"localVideo",width:r.videoWidth})),r.addEventListener("error",()=>a(e)(s)),r.src=d}),r.readAsDataURL(t)})},354185:(e,t,n)=>{n.d(t,{Z:()=>i});function i(){let e=window.navigator?.userAgent||"";if(e.includes("Firefox"))return"VIDEO_UNRECOGNIZED_ENCODING_IN_FIREFOX";if(e.includes("SamsungBrowser")||e.includes("Opera")||e.includes("OPR")||e.includes("Edge"))return"VIDEO_UNRECOGNIZED_ENCODING";if(e.includes("Edg"))return"VIDEO_UNRECOGNIZED_ENCODING";if(e.includes("Chrome"))return"VIDEO_UNRECOGNIZED_ENCODING_IN_CHROME";if(e.includes("Safari"))return"VIDEO_UNRECOGNIZED_ENCODING_IN_SAFARI";else return"VIDEO_UNRECOGNIZED_ENCODING"}},324115:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(478492),s=n(622270),r=n(643749),a=n(984234),o=n(622350),l=n(203966),c=n(744627),d=n(354185);let u="enabled_min",_="employees_min";function h({i18n:e,file:t,options:n,ideaPinRenamingEnabled:h}){let{allowVideo:p,videoOnly:g}=n||{};return i.ss.includes(t.type)&&p?function(e,t,n){let{forStoryPin:i}=n||{},r=i?l.Lr:2147483648;return t.size>r?Promise.resolve((0,s.Z)(i?"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":"VIDEO_OVER_MAX_FILE_SIZE",e)):(0,c.Z)(e)(t).then(t=>(function(e,t,n){let{forStoryPin:i,allowAllAspectRatios:r}=n||{},o=!!i,c=o&&a.Z.enabled("ideaPinExtendVideoLength"),h=c&&a.Z.enabled("ideaPinExtendVideoLengthAboveTwoMin"),p=(()=>{if(h){let e=a.Z.getExperimentGroup("ideaPinExtendVideoLengthAboveTwoMin");if(e){let t=e.startsWith(u)&&e.length>u.length?parseInt(e.substring(u.length),10):e.startsWith(_)&&e.length>_.length?parseInt(e.substring(_.length),10):-1;if(t>0)return 60*t+.5}}return c?l.FH:l.P9})(),g=o?l.W_:4,m=o?p:900;return t.duration<g?(0,s.Z)(o?"STORY_PIN_VIDEO_BELOW_MIN_DURATION":"VIDEO_BELOW_MIN_DURATION",e):t.duration>m?(0,s.Z)(o?h?"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION_ABOVE_TWO_MIN":c?"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION":"STORY_PIN_VIDEO_OVER_MAX_DURATION":"VIDEO_OVER_MAX_DURATION",e,void 0,p):t.width&&t.height?!r&&(t.width/t.height<.5||t.width/t.height>1.91)?(0,s.Z)("VIDEO_UNSUPPORTED_RATIO",e):t.width<100||t.height<100?(0,s.Z)("VIDEO_UNDER_MIN_DIMENSIONS",e):t:(0,s.Z)((0,d.Z)(),e)})(e,t,n)).catch(e=>e)}(e,t,n):!i.xl.includes(t.type)||g?Promise.resolve((0,s.Z)("FILE_UNRECOGNIZED_TYPE",e)):t.size>20971520?Promise.resolve((0,s.Z)("IMAGE_OVER_MAX_FILE_SIZE",e)):(0,r.Z)(e)(t).then(t=>(function(e,t,n,i){let[s,r]=a.Z.enabled("pinQuality")||i?.isStoryPin?[300,200]:[100,100],l=i?.minHeight||s,c=i?.minWidth||r;return n.height*n.width>89478485?(0,o.ZP)({errorId:"IMAGE_OVER_MAX_DIMENSIONS",i18n:e,ideaPinRenamingEnabled:t}):n.height<l||n.width<c?(0,o.ZP)({errorId:"IMAGE_UNDER_MIN_DIMENSIONS",i18n:e,ideaPinRenamingEnabled:t,options:i}):n})(e,h,t,n)).catch(e=>e)}},81219:(e,t,n)=>{n.r(t),n.d(t,{MWEB_UNAUTH_HEADER_Z_INDEX:()=>R,default:()=>B});var i=n(616550),s=n(883119),r=n(525364),a=n(96157),o=n(554786),l=n(472980),c=n(126189),d=n(686703),u=n(669501),_=n(702664),h=n(587703),p=n(696534),g=n(378720);let m=()=>{let e=(0,_.useSelector)(e=>!!e?.session?.isSeoBot),t=(0,g.Z)();return!e&&!t},x=({children:e,fallback:t})=>m()?t||null:e;var y=n(140017),f=n(340523),b=n(5859),v=n(623409),P=n(468653),I=n(160567),A=n(90647),E=n(773616),S=n(669177),w=n(217058),T=n(721055),j=n(785893);function O(){let e=(0,y.ZP)(),t=(0,i.TH)(),n=(0,i.k6)(),{viewType:o,viewParameter:l}=(0,r.SU)(),{userAgentPlatform:c,userAgent:d}=(0,_.useSelector)(({session:e})=>e),{isBot:u}=(0,b.B)(),g=(0,S.Rp)({isBot:u,platform:c,userAgent:d}),m=(0,T.Z)(),O=function(){let{isBot:e}=(0,b.B)();return(t,n)=>{e||(0,w.NC)(t,n)}}(),C=(0,E.Z)(),{checkExperiment:R}=(0,f.F)(),k=(0,h.Z)(),M=(0,v.Z)(),{trackConversionUpsell:N}=(0,P.Z)(),z=R("pcons_mweb_sign_in_copy").anyEnabled?e._('Sign in', 'unauth.sign_in.text', 'Label for sign in button'):e._('Log in', 'Label for log in button', 'Label for log in button'),D=e._('Sign up', 'Text on button on the top bar that leads users to signing up.', 'Text on button on the top bar that leads users to signing up.'),L=!g&&!(0,a.Xn)(t),Z=((0,a.dr)(t)||(0,a.$Y)(t)||(0,a.E0)(t))&&!R("lex_follow_button").group.includes("main_cta"),B=!C||m||Z?"signup":"download",U=R("mweb_unauth_login_primary_header").group,F=U.includes("login_primary"),V=!F&&U.includes("login"),G=e._('Download', 'mweb.unauth.interstitial_upsell.download_button_text', 'CTA on the app interstitial upsell to install the app'),H=(L?z.length:0)+("signup"===B?D.length:0)+("download"===B?G.length:0),Y=(0,j.jsx)(s.zx,{color:F?"white":Z?"red":"gray",fullWidth:!0,onClick:()=>{M({action:"click",within:"unauth-header",item:"signup-button"}),k({component:13198,element:31,event_type:102,view_type:o,view_parameter:l}),O("press_header_signup"),N({viewType:o,viewParameter:l,eventType:14688,component:14215,upsellReason:"click_signup_on_header"}),n.push({pathname:"/signup",state:{attributionLabel:"click_signup_on_header",...t.state}})},size:"md",text:D});return(0,j.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 1px 0 0 rgba(0, 0, 0, 0.08)",backgroundColor:(0,p.Yc)()?"#333":"white",transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:"translateY(0)"}},left:!0,paddingX:3,position:"relative",top:!0,width:"100vw",children:(0,j.jsxs)(s.xu,{alignItems:"center","data-test-id":"unauth-header",direction:"row",display:"flex",justifyContent:"between",children:[(0,j.jsx)(s.iP,{accessibilityLabel:e._('Pinterest App', 'Pinterest icon for app upsell', 'Pinterest icon for app upsell'),onTap:()=>{M({action:"click",within:"unauth-header",item:"pinterest-logo"})},children:(0,j.jsxs)(s.xu,{alignItems:"center",direction:"row",display:"flex",marginEnd:3,children:[(0,j.jsx)(s.xu,{alignItems:"center","data-test-id":"pinterest-logo-icon",display:"flex",height:I.SB,justifyContent:"center",rounding:2,children:(0,j.jsx)(s.I_,{accessibilityLabel:e._('Pinterest App', 'Pinterest icon for app upsell', 'Pinterest icon for app upsell'),href:"/",icon:"pinterest",iconColor:"brandPrimary",padding:1,size:"xl"})}),(0,j.jsx)(s.xu,{"data-test-id":"pinterest-logo-text",paddingX:1,paddingY:2,children:H<18&&(0,j.jsxs)(s.xu,{children:[(0,j.jsx)(s.X6,{color:"error",overflow:"normal",size:"400",children:g?e._('Pinterest Lite', 'Pinterest lite brand for the app upsell', 'Pinterest lite brand for the app upsell'):e._('Pinterest', 'Pinterest brand for the app upsell', 'Pinterest brand for the app upsell')}),g&&(0,j.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap"}},children:(0,j.jsx)(s.xu,{children:(0,j.jsx)(s.xv,{color:"subtle",inline:!0,size:"100",children:e._('Save space on your device', 'Unauth app upsell copy that describe Pinterest product core value to users', 'Unauth app upsell copy that describe Pinterest product core value to users')})})})]})})]})}),(0,j.jsx)(x,{children:(0,j.jsxs)(s.xu,{alignItems:"center","data-test-id":"UnauthAppUpsellButton",direction:"row",display:"flex",flex:"none",marginEnd:0,children:["signup"===B&&F&&(0,j.jsx)(s.xu,{"data-test-id":"signup-button",children:Y}),L&&(0,j.jsx)(s.xu,{"data-test-id":"login-button",children:(0,j.jsx)(s.zx,{color:U.includes("red")&&"signup"===B?"red":U.includes("gray")&&"signup"===B?"gray":"white",fullWidth:!0,onClick:()=>{M({action:"click",within:"unauth-header",item:"login-button"}),k({component:13198,element:30,event_type:102,view_type:o,view_parameter:l}),O("press_header_login"),N({viewType:o,viewParameter:l,eventType:14688,component:14213,upsellReason:"click_login_on_header"}),n.push({pathname:"/login",state:{attributionLabel:"click_login_on_header",...t.state}})},size:"md",text:z})}),"signup"!==B||V||F?"signup"!==B&&(0,j.jsx)(s.xu,{"data-test-id":"download-button",children:(0,j.jsx)(A.Z,{app_upsell_type:"unauth-header",componentType:14161,children:({handleOpenApp:e})=>(0,j.jsx)(s.zx,{color:(0,a.j8)(t)||R("lex_follow_button").group.includes("main_cta")?"gray":"red",fullWidth:!0,onClick:()=>{e()},size:"md",text:G})})}):(0,j.jsx)(s.xu,{"data-test-id":"signup-button",children:Y})]})})]})})}var C=n(866265);let R=new s.Ry(5),k=new s.Ry(1e3),M={signup:{attributionLabel:"click_signup_on_header",signupFlow:{type:"signup"},source:"defaultSource"},login:{attributionLabel:"click_login_on_header",signupFlow:{type:"login"},source:"login"}},N=e=>(0,a.mP)(e)||(0,a.hd)(e),z=e=>(0,a.Ni)(e)||(0,a.Xn)(e)||(0,a.C$)(e)||"/invited/"===e.pathname,D=e=>e.pathname.includes("_created")||e.pathname.includes("boards")&&!(0,a.En)(e)||e.pathname.includes("_saved"),L=e=>(0,a.mP)(e),Z=({deviceType:e})=>{let t=(0,i.TH)(),n=(0,l.Z)(),o=(0,C.Z)(),_=(0,d.n)(),{viewParameter:h,viewType:p}=(0,r.SU)(),g=(0,j.jsxs)(s.xu,{color:"default",children:["tablet"===e?!(0,a.En)(t)&&!(0,a.Xn)(t)&&(0,j.jsx)(u.Z,{}):o&&!D(t)&&!n&&(0,j.jsx)(O,{})," "]});return _.showReferredAppUpsell?(0,j.jsx)(c.Z,{onDismiss:()=>_.setShowReferredAppUpsellVal(!1),viewParameter:h,viewType:p}):L(t)?(0,j.jsx)(s.xu,{position:"fixed",width:"100%",zIndex:R,children:g}):(0,j.jsx)(s.Le,{top:0,zIndex:R,children:g})};function B({showDesktopSignupModal:e}){let t=(0,o.ZP)(),n=(0,i.TH)();if("desktop"===t){let t=(0,j.jsx)(u.Z,{showDesktopSignupModal:e&&(t=>e({signupFlow:M[t].signupFlow,attributionLabel:M[t].attributionLabel,source:M[t].source,container:"unauth_header",reason:"CLICK_LOGIN_OR_SIGNUP"}))});return N(n)?(0,j.jsx)(s.xu,{position:"fixed",width:"100%",zIndex:k,children:t}):!z(n)&&t}return(0,j.jsx)(Z,{deviceType:t})}},67664:(e,t,n)=>{n.d(t,{A:()=>a,Z:()=>o});var i=n(667294),s=n(883119),r=n(785893);let a={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"},lightHoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"}};function o({backgroundColor:e,children:t,coverImage:n,disableTabIndex:o,height:l,id:c,isHovered:d,onClick:u,onMouseDown:_,onMouseEnter:h,onMouseLeave:p,searchBoxRenderStopwatch:g,url:m,width:x}){let[y,f]=(0,i.useState)(!1),b=()=>{h?h():f(!0)},v=()=>{p?p():f(!1)},P=d||y,I=P?a.hoverOverlay:a.bubbleOverlay;return(0,r.jsx)(s.Tg,{href:m,onBlur:v,onFocus:b,onMouseDown:_,onMouseEnter:b,onMouseLeave:v,onTap:()=>{u?.(c)},rounding:4,tabIndex:o?-1:void 0,children:(0,r.jsx)(s.zd,{height:l,rounding:4,width:x||"100%",children:n?.url?(0,r.jsxs)(s.Ee,{alt:"",color:e,fit:"cover",naturalHeight:n.height??1,naturalWidth:n.width??1,onLoad:()=>{g?.stop()},role:"presentation",src:n.url,children:[(0,r.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:I},height:"100%",width:"100%"}),"function"==typeof t?t({isHovered:P}):t]}):(0,r.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:"100%",width:"100%"})})})}},739711:(e,t,n)=>{n.d(t,{Z:()=>x});var i=n(667294),s=n(883119),r=n(107366),a=n(930837),o=n(454514),l=n(140017),c=n(13848);let d={transparent:{backgroundColor:"transparent"},transparentHovered:{backgroundColor:"rgba(216, 216, 216, 0.37)"},pog:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},buttonFocus:{outline:"0"}};var u=n(785893);function _(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{constructor(...e){super(...e),_(this,"state",{hovered:!1}),_(this,"handleMouseEnter",()=>this.setState({hovered:!0})),_(this,"handleMouseLeave",()=>this.setState({hovered:!1}))}render(){let{backgroundHaloSize:e,onClick:t,color:n="subtle"}=this.props,i=Object.freeze({height:e,width:e}),r={border:0,display:"block",background:"transparent",cursor:"pointer",...d.buttonFocus},a={...d.pog,...d.transparent,...this.state.hovered?d.transparentHovered:{}},o={...i,...a};return(0,u.jsx)("button",{onClick:e=>t&&t({event:e}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,style:r,type:"button",children:(0,u.jsx)("div",{style:o,children:(0,u.jsx)(s.xu,{rounding:"circle",children:(0,u.jsx)(s.JO,{accessibilityLabel:"",color:n,icon:"flag",size:e/2})})})})}}var p=n(825784);function g(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends i.PureComponent{constructor(...e){super(...e),g(this,"state",{showModal:!1,reportType:null}),g(this,"handleDismiss",()=>this.setState({showModal:!1})),g(this,"handleClick",()=>{let{reportType:e}=this.state;"image"===e?this.reportSuggestionImage():this.reportSuggestionText()}),g(this,"reportSuggestionImage",async()=>{let{imgSignature:e,reportImage:t}=this.props;this.setState({showModal:!1});let n=await (0,r.Z)({url:"/v3/search/pin_image_sig/",data:{image_signature:e}}),{id:i,node_id:s}=n.resource_response.data;t({id:i,nodeId:s})}),g(this,"reportSuggestionText",()=>{let{handleReport:e,toastManagerContext:t}=this.props;e&&(e(),t.showToast(({hideToast:e})=>(0,u.jsx)(o.ZP,{onHide:e,text:this.props.i18n._('Thanks\xA0for\xA0your\xA0report!\xA0This\xA0will\xA0be\xA0reviewed\xA0by\xA0our\xA0Trust\xA0and\xA0Safety\xA0Team', 'ReportingFlag.Toast.text', 'Toast\xA0after\xA0reporting\xA0a\xA0search suggestion')})),this.handleDismiss())}),g(this,"showModal",({event:e})=>{e.stopPropagation(),e.preventDefault(),this.setState({showModal:!0})})}render(){let{showModal:e}=this.state;return(0,u.jsxs)(i.Fragment,{children:[this.props.isVisible&&(0,u.jsx)(h,{backgroundHaloSize:24,onClick:this.showModal}),e&&(0,u.jsx)(a.ZP,{accessibilityModalLabel:this.props.i18n._('Report\xA0search\xA0term', 'ReportingFlag.Modal.accessibilityModalLabel', 'accessible\xA0label\xA0for\xA0report\xA0suggestion modal'),heading:this.props.i18n._('Report\xA0search\xA0term', 'ReportingFlag.Modal.heading', 'Heading\xA0for\xA0report\xA0suggestion modal'),onDismiss:this.handleDismiss,size:"sm",children:(0,u.jsxs)(s.xu,{children:[(0,u.jsx)(s.xu,{padding:5,children:(0,u.jsx)(s.xv,{children:this.props.i18n._('When you flag this, our Trust and Safety team will review it. If it doesn\'t meet our Community Guidelines, it will be blocked.', 'ReportingFlag.Box.Text.report', 'What\xA0will\xA0happen\xA0when\xA0you\xA0report\xA0a\xA0suggestion')})}),(0,u.jsxs)(s.FX,{id:"reporting-flag-options-group",legend:this.props.i18n._('When you flag this, our Trust and Safety team will review it. If it doesn\'t meet our Community Guidelines, it will be blocked.', 'ReportingFlag.Box.Text.report', 'What\xA0will\xA0happen\xA0when\xA0you\xA0report\xA0a\xA0suggestion'),legendDisplay:"hidden",children:[(0,u.jsxs)(s.xu,{direction:"column",display:"flex",marginBottom:4,paddingX:5,role:"list",children:[(0,u.jsxs)(s.xu,{alignItems:"center",direction:"row",display:"flex",paddingY:1,children:[(0,u.jsx)(s.FX.RadioButton,{checked:"text"===this.state.reportType,id:"textType",onChange:()=>this.setState({reportType:"text"}),value:"Report search text"}),(0,u.jsx)(s.xu,{flex:"grow",children:(0,u.jsx)(s.__,{htmlFor:"textType",children:(0,u.jsx)(s.xu,{paddingX:2,children:(0,u.jsx)(s.xv,{children:"Report search text"})})})})]}),(0,u.jsxs)(s.xu,{alignItems:"center",direction:"row",display:"flex",paddingY:1,children:[(0,u.jsx)(s.FX.RadioButton,{checked:"image"===this.state.reportType,id:"imageType",onChange:()=>this.setState({reportType:"image"}),value:"Report search image"}),(0,u.jsx)(s.xu,{flex:"grow",children:(0,u.jsx)(s.__,{htmlFor:"imageType",children:(0,u.jsx)(s.xu,{paddingX:2,children:(0,u.jsx)(s.xv,{children:"Report search image"})})})})]})]}),(0,u.jsx)(s.iz,{}),(0,u.jsxs)(s.xu,{display:"flex",justifyContent:"end",padding:2,children:[(0,u.jsx)(s.xu,{margin:2,children:(0,u.jsx)(s.zx,{fullWidth:!0,onClick:this.handleDismiss,text:this.props.i18n._('Cancel', 'ReportingFlag.Box.Button.text.cancel', 'Text\xA0for\xA0cancel\xA0button\xA0when reporting search suggestion')})}),(0,u.jsx)(s.xu,{margin:2,children:(0,u.jsx)(s.zx,{color:"red",disabled:!this.state.reportType,fullWidth:!0,onClick:this.handleClick,text:this.props.i18n._('Report', 'ReportingFlag.Box.Button.text.report', 'Button\xA0label\xA0to\xA0report\xA0search suggestion')})})]})]})]})})]})}}function x(e){let t=(0,l.ZP)(),{reportImage:n}=(0,p.f)();return(0,u.jsx)(m,{...e,i18n:t,reportImage:n,toastManagerContext:(0,c.F9)()})}},517558:(e,t,n)=>{n.d(t,{Z:()=>tn});var i=n(667294),s=n(616550),r=n(883119),a=n(341309),o=n(214877),l=n(140017),c=n(30378),d=n(317540),u=n(96157),_=n(340523),h=n(471314);let{Provider:p,useHook:g}=(0,h.Z)({name:"search_tab_render",sampleRate:1});var m=n(5859),x=n(583054),y=n(207099),f=n(370833),b=n(768806),v=n(980803),P=n(447479),I=n(782005),A=n(149722),E=n(239821);let S={md:407,sm:332,auto:"auto"},w=["pin.description","pin.id","pin.images[236x]"],T={__style:{backgroundColor:"rgba(0,0,0, .4)"}};var j=n(983983),O=n(785893);function C({contentTypes:e,contentTypesAnchor:t,handleSelectFilter:n,onDismiss:i}){return(0,O.jsx)(r.Lt,{anchor:t,disableMobileUI:!0,id:"ContentFilterList",idealDirection:"down",isWithinFixedContainer:!0,onDismiss:i,zIndex:new r.Ry(j.fe),children:e.map((e,t)=>(0,O.jsx)(r.Lt.Item,{dataTestId:"search-filter-"+e.dataId,onSelect:()=>n(t),option:{value:e.text,label:e.text},children:(0,O.jsx)(r.xv,{weight:[I.lw.PINS,I.lw.PINS_MINE].includes(e.scope)?"bold":"normal",children:e.text})},e.text))})}let R=e=>{switch(e){case I.lw.PINS:return 220;case I.lw.PINS_MINE:return 223;case I.lw.PINS_VIDEO:return 11399;case I.lw.BOARDS:return 221;case I.lw.USERS:return 222;default:return null}},k=function({currentlySelectedFilter:e,currentQuery:t,handleContentTypeFilterHover:n,handleScopeChange:a}){let{logContextEvent:c}=(0,o.v)(),d=(0,l.ZP)(),u=function(e){let t=[{scope:I.lw.PINS,text:e._('All Pins', 'All Pins label for content type filters on search bar', 'All Pins label for content type filters on search bar'),dataId:"all-pins"},{scope:I.lw.PINS_MINE,text:e._('Your Pins', 'Your Pins label for content type filters on search bar', 'Your Pins label for content type filters on search bar'),dataId:"your-pins"}],n=t.findIndex(e=>e.scope===I.lw.PINS_MINE);return t.push(t.splice(n,1)[0]),t}(d),_=(0,i.useRef)(null),h=(0,s.k6)(),[p,g]=(0,i.useState)(e||u[0].scope),[m,x]=(0,i.useState)(!1),[y,f]=(0,i.useState)(!1);(0,i.useEffect)(()=>{g(e)},[e]);let b=()=>{f(!0),n&&n(!0)},v=()=>{f(!1),n&&n(!1)},A=(u[p?u.findIndex(e=>e.scope===p):0]||u[0]).text,E=(0,O.jsx)(r.xu,{ref:_,dangerouslySetInlineStyle:{__style:{borderRadius:"0 4px 4px 0",height:48}},"data-test-id":"search-filter",overflow:"hidden",children:(0,O.jsxs)(r.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",paddingX:4,children:[(0,O.jsx)(r.xv,{inline:!0,size:"200",weight:"bold",children:A}),(0,O.jsx)(r.xu,{marginStart:2,children:(0,O.jsx)(r.JO,{accessibilityLabel:d._('Dropdown', ' - ', ' -- '),color:"default",icon:"arrow-down",inline:!0,size:12})})]})});return(0,O.jsxs)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:y?"rgba(0, 0, 0, 0.06)":void 0}},display:"flex",flex:"none",height:48,marginStart:2,position:"relative",rounding:6,children:[(0,O.jsx)(r.iP,{fullHeight:!0,fullWidth:!1,onMouseEnter:()=>b(),onMouseLeave:()=>v(),onTap:({event:e})=>{e&&(e.preventDefault(),e.stopPropagation()),x(!m),c({event_type:101,component:215,aux_data:{entered_query:t}})},rounding:6,children:E}),m&&(0,O.jsx)(C,{contentTypes:u,contentTypesAnchor:_.current,handleSelectFilter:e=>{let n=u[e],i=n.scope;g(i),x(!1),c({event_type:101,component:215,element:R(i),aux_data:{entered_query:t}}),a(i),t&&h.push(`/search/${i}/?q=${encodeURIComponent(t)}&rs=${P.i.FILTER}`)},onDismiss:()=>x(!1)})]})};var M=n(619370),N=n(554786),z=n(494125),D=n(156361);let L="all 0.6s cubic-bezier(0.68, -0.6, 0.32, 1.6)",Z={transform:"scale(0)",opacity:"0",transition:L},B={transform:"scale(1)",opacity:"1",transition:L},U={transform:"scale(1.2)",transition:L};function F({handleClearMode:e,scope:t,backgroundColorHex:n,iconType:s}){let a;let o=(0,l.ZP)(),c=(0,N.HG)(),d=(0,I.Hd)(t,c),[u,_]=(0,i.useState)(!1),h=(0,r.JZ)(),[p,g]=(0,i.useState)(h?B:Z),m=(0,i.useRef)();if((0,z.Z)(()=>h?()=>{}:(g(B),()=>{g(Z)})),u)a="cancel";else if(6===s)a="person";else{if(1!==s)return null;a="shopping-bag"}return(0,O.jsxs)(i.Fragment,{children:[(0,O.jsx)(r.xu,{ref:m,dangerouslySetInlineStyle:{__style:u?U:p},"data-test-id":"mode-icon-wrapper",flex:"none",marginEnd:2,marginStart:-3,children:(0,O.jsx)(r.iP,{onBlur:()=>_(!1),onFocus:()=>_(!0),onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),onTap:e,rounding:"circle",tapStyle:"compress",children:(0,O.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:(n&&n[0])??void 0}},padding:3,rounding:"circle",children:(0,O.jsx)(r.JO,{accessibilityLabel:o._('Search mode icon', 'searchBox.modesIcon.accessibilityLabel', 'Search mode icon in search box'),color:"inverse",icon:a,size:16})})})}),m.current?.style.transform!==Z.transform&&(0,O.jsx)(M.default,{anchor:m.current,experienceIds:[t===I.lw.USERS?504374:504373],hasFullWidthButton:!1,id:"experience-tooltip",placementId:d,showCaret:!0,textAlign:"center",textWeight:"normal"})]})}function V({handleClearMode:e,scope:t}){let{modeIcon:n}=(0,D.A)().searchContext;if(n)return(0,O.jsx)(i.Suspense,{fallback:null,children:(0,O.jsx)(F,{backgroundColorHex:n.backgroundColorHex,handleClearMode:e,iconType:n.iconType,scope:t})})}var G=n(342513),H=n(638747);let Y={recentSaves:[],recentViews:[]};function q(e=Y,t){if("FETCH_COMPLETE"===t.type){let{options:n={},resource:i}=t.payload,{data:s}=t.payload.response.resource_response;if("ApiResource"===i&&"/v3/users/me/recent/engaged/pin/stories/"===n.url&&s){let t=s.find(e=>"user_recently_viewed_pins"===e.story_type),n=s.find(e=>"user_recently_saved_pins"===e.story_type),i=t?.objects.map(({description:e,id:t,images:n},i)=>({label:e,images:n,resultIndex:i,type:"recent_view",url:`/pin/${t}`}))||[],r=n?.objects.map(({description:e,id:t,images:n},i)=>({label:e,images:n,resultIndex:i,type:"recent_save",url:`/pin/${t}`}))||[];return{...e,recentSaves:r,recentViews:i}}}return e}let{Provider:$,useHook:W}=(0,G.Z)("SearchBox");function X({children:e}){let[t,n]=(0,i.useReducer)(q,Y);(0,H.Z8)("ApiResource",e=>{n({type:"FETCH_COMPLETE",payload:e})});let s=(0,i.useMemo)(()=>({state:t}),[t]);return(0,O.jsx)($,{value:s,children:e})}var K=n(860208),Q=n(995917),J=n(899384),ee=n(314018),et=n(88682);function en({suggestion:e,query:t,lastFocusTime:n=0,filterSelectedTerm:i}){if("explorearticle"===e.type){let{story_category:t,query:n,referringSource:i,id:s,storyId:r}=e;return e.action?.url??(0,ee.Z)({storyCategory:t,query:n,referringSource:i,bubbleId:s,storyId:r})}if("todayarticle"===e.type){let{id:t,title:n}=e;return(0,K.x)({title:n,id:t,articleType:"today"})}let s={eq:(0,v.Z)(t)};n&&(s.etslf=String(Date.now()-n)),"inclusive_product_filter_query"===e.type&&i&&(s.filters=i);let r=(0,et.Z)(e.url||"",s);return r}function ei(e,t){return`SuggestionGroup-Option-${e}-${t}`}let es=e=>{let t=0,n=e.map(e=>{let n=t;return t+=(e.items??[]).length??0,n});return n},er=(e,t)=>{if(null==t)return;let n=es(e);for(let i=0;i<n.length;i+=1)if(e[i].items.length&&t-n[i]<e[i].items.length)return e[i].items[t-n[i]];return null};var ea=n(699750),eo=n(124946),el=n(172203),ec=n(339001),ed=n(627408),eu=n(373543),e_=n(510989),eh=n(179370);let ep=(e,t)=>{let n=RegExp("\\b"+t+"\\b","i");return e===t||e.match(n)};function eg({children:e,experiences:t,placementId:n,searchTerm:s,suggestions:r}){let{viewExperience:a}=(0,eh.M)(),[o,l]=(0,i.useState)(null),[c,d]=(0,i.useState)(new Set),u=t?.filter(e=>e.display_data?.component_type===3).map(e=>({...e.display_data,id:e.experience_id}))||[];return(0,i.useEffect)(()=>{if(!s||!r){l(null);return}let e=o?.search_query_list.find(e=>r.some(({label:t})=>ep(t,e)));if(!e){let e=u.find(e=>e.id!==o?.id&&e.search_query_list?.find(e=>r.some(({label:t})=>ep(t,e))));if(e){l(e);let{id:t}=e;c.has(t)||("number"==typeof t&&a(n,t),d(new Set(c).add(t)))}}},[s]),e({searchDelightConfig:o})}var em=n(608516),ex=n(59709),ey=n(575742),ef=n(862249);function eb({suggestions:e}){let t=e[0],n=(0,ef.Z)({url:t[0]?.action_button_uri});return(0,O.jsxs)(r.xu,{padding:10,children:[(0,O.jsx)(r.xu,{marginBottom:6,children:(0,O.jsx)("span",{style:{color:"#004b91",fontSize:"28px",WebkitFontSmoothing:"antialiased"},children:t.description})}),(0,O.jsx)(r.Tg,{href:t.action_button_uri,rel:n?"nofollow":"none",rounding:"pill",children:(0,O.jsx)(r.xu,{color:"infoBase",display:"inlineBlock",padding:3,rounding:"pill",children:(0,O.jsx)(r.xv,{color:"inverse",weight:"bold",children:t.action_button_text})})})]})}var ev=n(572345);function eP({id:e,children:t,isHovered:n,url:i,onClick:s,onMouseEnter:a,onMouseLeave:o}){return(0,O.jsx)(r.xu,{"aria-selected":n?"true":"false",color:n?"secondary":"default","data-test-id":"search-suggestion",id:e,role:"option",children:(0,O.jsx)(r.Tg,{href:i,onMouseEnter:a,onMouseLeave:o,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),e.metaKey||e.ctrlKey||(e.preventDefault(),s())},tabIndex:-1,children:(0,O.jsx)(r.xu,{marginBottom:1,paddingX:5,children:t})})})}function eI({highlightMatch:e=!1,iconName:t,imageUrl:n,isVerifiedMerchant:i=!1,label:s,query:a,rounding:o,searchDelightConfig:c,subLabel:d,verified:u=!1}){let _=(0,l.ZP)();return(0,O.jsx)(r.xu,{"data-test-id":n||t?"enriched-search-suggestion":"regular-search-suggestion",display:"flex",paddingY:n?1:0,width:"100%",children:(0,O.jsxs)(r.kC,{alignItems:"center",gap:{row:2,column:0},children:[n?(0,O.jsx)(r.xu,{"data-test-id":"enriched-autocomplete-image",height:40,overflow:"hidden",rounding:o&&2===o?2:"circle",width:40,children:(0,O.jsx)(r.Ee,{alt:"",color:"#efefef",fit:"cover",naturalHeight:40,naturalWidth:40,role:"presentation",src:n})}):(0,O.jsx)(r.kC,{alignItems:"center",height:40,justifyContent:"center",width:40,children:(0,O.jsx)(r.xu,{marginTop:1,children:(0,O.jsx)(r.JO,{accessibilityLabel:t?(0,ec.nk)(_._('{{ icon}} icon', 'SearchBox.SearchSuggestion.EnrichedAutocomplete.Icon', 'contextual icon in typeahead (eg shopping tag icon to take users to product search)'),{icon:t}).join():"",color:"default",icon:t||"search",size:12})})}),(0,O.jsxs)(r.kC,{alignItems:"start",direction:"column",gap:{row:0,column:1},justifyContent:"center",children:[(0,O.jsxs)(r.kC,{alignItems:"center",children:[e&&a?(0,O.jsx)(ex.Z,{query:a,searchDelightConfig:c,text:s||a}):(0,O.jsx)(r.xv,{weight:"bold",children:s}),(u||i)&&(0,O.jsx)(r.xu,{marginStart:1,children:(0,O.jsx)(ev.Z,{iconOnly:!0,isVerifiedIdentity:u,isVerifiedMerchant:i,size:"xs"})})]}),d&&(0,O.jsx)(r.xv,{size:"100",children:d})]})]})})}var eA=n(930493);let eE=(0,i.lazy)(()=>Promise.all([n.e(93041),n.e(54816),n.e(11093)]).then(n.bind(n,911093)));function eS({experiences:e,index:t,focusedIndex:n,onInclusiveProductFilterClick:s,onSuggestionClick:a,onSuggestionMouseEnter:o,onSuggestionMouseLeave:c,query:d,suggestion:u}){let _=(0,l.ZP)(),h="number"==typeof u.identifier_icon_name&&u.identifier_icon_name!==ey.J?(0,ey.Z)(u.identifier_icon_name):void 0;return(0,O.jsx)(eg,{experiences:e,placementId:1000315,searchTerm:d,suggestions:[u],children:({searchDelightConfig:e})=>(0,O.jsxs)(i.Fragment,{children:[(0,O.jsx)(eP,{id:ei(0,t),isHovered:n===t,onClick:()=>{a(u,t)},onMouseEnter:()=>{o(t)},onMouseLeave:()=>{c()},url:en({suggestion:u,query:d}),children:(0,O.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:(0,O.jsx)(r.xu,{flex:"grow",children:"inclusive_product_filter_query"===u.type?(0,O.jsx)(r.xu,{marginBottom:2,children:(0,O.jsx)(r.xv,{weight:"bold",children:(0,ec.nk)(u.eligibleHairPatternFilters?_._('{{ query }} by hair pattern', 'SearchSuggestion.HairPatternFilterSuggestion', 'Suggested search for a hair pattern filter-eligible query'):_._('{{ query }} by skin tone range', 'SearchSuggestion.SkinToneFilterSuggestion', 'Suggested search for a skin tone filter-eligible query'),{query:(0,O.jsx)(ex.Z,{query:d,searchDelightConfig:e,text:u.label||d})})})}):(0,O.jsx)(eI,{highlightMatch:!0,iconName:h,imageUrl:u.image,label:u.label,query:d,rounding:2,searchDelightConfig:e,subLabel:u.subLabel})})})}),"inclusive_product_filter_query"===u.type&&s&&(0,O.jsx)(r.kC,{alignItems:"center",justifyContent:"start",overflow:"hidden",children:u.eligibleHairPatternFilters?(0,O.jsx)(e_.Z,{name:"SafeSuspense_BlendedTypeaheadSuggestion_HairPatternFilters",children:(0,O.jsx)(em.Z,{children:(0,O.jsx)(r.xu,{display:"flex",marginBottom:-4,overflow:"scrollX",paddingY:2,position:"relative",children:(0,O.jsx)(eE,{eligibleFilters:u.eligibleHairPatternFilters,isUpsell:!0,onClickApplyFilters:e=>s(u,t,e),query:d})})})}):(0,O.jsx)(eA.Z,{onClickApplyFilters:e=>s(u,t,e),query:d,showHeaderText:!1})})]})})}let ew=({index:e,focusedIndex:t,onSuggestionClick:n,onSuggestionMouseEnter:i,onSuggestionMouseLeave:s,suggestion:r})=>(0,O.jsx)(eP,{id:ei(0,e),isHovered:t===e,onClick:()=>{n(r,e)},onMouseEnter:()=>{i(e)},onMouseLeave:()=>{s()},url:r.url,children:(0,O.jsx)(eI,{imageUrl:r.image,isVerifiedMerchant:r.is_verified_merchant,label:r.label,rounding:"circle",subLabel:r.subLabel,verified:r.verified})},`${r.type}-${r.label}-${r.subLabel||""}`);function eT({focusedIndex:e,onSuggestionClick:t,onSuggestionMouseEnter:n,onSuggestionMouseLeave:i}){let s=(0,l.ZP)(),a=0===e;return(0,O.jsx)(r.xu,{"aria-selected":a?"true":"false",id:"syop_cta",role:"option",children:(0,O.jsxs)(r.xu,{marginTop:3,paddingX:6,children:[(0,O.jsx)(r.iz,{}),(0,O.jsx)(r.xu,{marginTop:4,children:(0,O.jsxs)(r.kC,{alignItems:"center",justifyContent:"between",children:[(0,O.jsx)(r.xv,{lineClamp:2,weight:"bold",children:s._('Looking for ideas you saved?', 'searchBox.suggestionsMenu.searchYourPinsCTA', 'Heading for search autocomplete call to action to search your own pins')}),(0,O.jsx)(r.kC.Item,{flex:"none",children:(0,O.jsx)(r.iP,{onMouseEnter:()=>{n(0)},onMouseLeave:i,onTap:t,rounding:"pill",children:(0,O.jsx)(r.xu,{alignItems:"center",color:a?"darkWash":"secondary",display:"flex",height:40,justifyContent:"center",paddingX:3,paddingY:2,rounding:"pill",children:(0,O.jsx)(r.xv,{align:"center",weight:"bold",children:s._('Search your Pins', 'searchBox.suggestionsMenu.searchYourPinsText', 'Heading for search autocomplete when searching your own Pins')})})})})]})})]})})}function ej({experiences:e,suggestion:t,index:n,focusedIndex:i,query:s,onSuggestionClick:r,onSuggestionMouseEnter:a,onSuggestionMouseLeave:o,onInclusiveProductFilterClick:l}){switch(t.type){case"autocompleteupsell":return(0,O.jsx)(eb,{suggestions:[t]});case"query":case"enriched_autocomplete":case"inclusive_product_filter_query":return(0,O.jsx)(eS,{experiences:e,focusedIndex:i,index:n,onInclusiveProductFilterClick:l,onSuggestionClick:r,onSuggestionMouseEnter:a,onSuggestionMouseLeave:o,query:s,suggestion:t});case"user":return(0,O.jsx)(ew,{focusedIndex:i,index:n,onSuggestionClick:r,onSuggestionMouseEnter:a,onSuggestionMouseLeave:o,suggestion:t})}return null}var eO=n(702664),eC=n(40432),eR=n(213377),ek=n(666472),eM=n(67664),eN=n(739711);function ez({contextLogData:e,dominantColor:t,handleReport:n,height:s,id:a,image:o,isDarkRep:l=!1,isHovered:c,name:d,onMouseEnter:u,onMouseLeave:_,onTap:h,searchBoxRenderStopwatch:p,slotIndex:g,url:m,viewParameter:x,viewType:y,width:f}){let b,v;let P=(0,ek.Z)({contextLogData:e,impressionType:"Article",loggingId:a,slotIndex:g,viewParameter:x,viewType:y}),I=(0,A.Z)(),[E,S]=(0,i.useState)(!1),w=E||c,T=s||80;!f||f>=200?(b=3,v="300"):f>=150?(b=2,v="200"):(b=2,v="100");let j=()=>{u?u():S(!0)},C=()=>{_?_():S(!1)};return(0,O.jsx)(r.xu,{ref:P,height:T,width:f||"100%",children:(0,O.jsx)(r.zd,{rounding:4,wash:!l,children:(0,O.jsx)(r.xu,{dangerouslySetInlineStyle:l?{__style:{backgroundColor:w?eC.Pv2:eC.pzk}}:{__style:w?eM.A.lightHoverOverlay:{}},children:(0,O.jsx)(r.st,{children:(0,O.jsxs)(r.Tg,{href:m,onBlur:C,onFocus:j,onMouseEnter:j,onMouseLeave:C,onTap:h,rounding:4,children:[(0,O.jsxs)(r.kC,{direction:"row",children:[(0,O.jsx)(r.zd,{height:T,wash:!0,width:T,children:(0,O.jsx)(r.Ee,{alt:"",color:t,fit:"cover",naturalHeight:1,naturalWidth:1,onLoad:()=>{p?.stop()},role:"presentation",src:o})}),(0,O.jsx)(r.xu,{alignItems:"center",display:"flex",maxHeight:T,maxWidth:f?f-T:eR.yF-80,padding:4,children:(0,O.jsx)(r.xv,{color:l?"light":void 0,lineClamp:b,size:v,weight:"bold",children:d})})]}),n&&I.isAuth&&I.isEmployee?(0,O.jsx)(r.xu,{bottom:!0,marginBottom:1,position:"absolute",right:!0,children:(0,O.jsx)(eN.Z,{handleReport:n,imgSignature:o,isVisible:w??!1})}):null]})})})})})}var eD=n(549629),eL=n(107366),eZ=n(227258),eB=n(205841),eU=n(427514),eF=n(193163),eV=n(206923);function eG({bubble:e,height:t,isHovered:n,onClick:i,onMouseDown:s,onMouseEnter:a,onMouseLeave:o,searchBoxRenderStopwatch:l,slotIndex:c,storyId:d,storyType:u,viewParameter:_,viewType:h,width:p}){let{id:g,title:m,image_urls:x,article_creator_user:y}=e,f=x&&x.length>0?{url:x[0]}:void 0,b=(0,eU.Z)(m||"",{});if(!e.title||!e.id)return null;let v=(0,eF.T7)(e.feed_source??0,e.is_product_pin_feed??!1,e.title,e.id);return(0,O.jsx)(eV.Y4,{auxData:{grid_index:c.toString(),today_article_id:g,story_type:u,story_id:d},loggingId:g,objectIdStr:g,slotIndex:c,viewParameter:_||3467,viewType:h,children:({impressionTrackerRef:e})=>(0,O.jsx)(eM.Z,{ref:e,backgroundColor:"gray",coverImage:f,disableTabIndex:!0,height:t,id:g,isHovered:n,onClick:i,onMouseDown:s,onMouseEnter:a,onMouseLeave:o,searchBoxRenderStopwatch:l,url:v,width:p,children:(0,O.jsx)(r.xu,{ref:e,alignItems:"end",display:"flex",height:t,justifyContent:"center",padding:3,position:"absolute",top:!0,width:p||"100%",children:(0,O.jsxs)(r.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[t>200?(0,O.jsx)(r.X6,{align:"center",color:"light",size:"500",children:b}):(0,O.jsx)(r.xv,{align:"center",color:"light",weight:"bold",children:b}),y&&y.image_small_url&&y.full_name&&(0,O.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:4,children:[(0,O.jsx)(r.xu,{marginEnd:2,children:(0,O.jsx)(eB.qE,{name:y.full_name,outline:!0,size:"xs",src:y.image_small_url})}),(0,O.jsx)(r.xv,{color:"light",size:"100",children:y.full_name})]})]})})})})}let eH=({title:e})=>(0,O.jsx)(r.xu,{alignItems:"center",display:"flex",marginStart:8,children:(0,O.jsx)(r.xv,{lineClamp:1,weight:"bold",children:e})}),eY=({handleRemove:e,id:t,isHovered:n,label:i,onClick:s,onMouseEnter:a,onMouseLeave:o,removeA11yText:l,url:c})=>(0,O.jsx)(r.xu,{"aria-selected":n?"true":"false","data-test-id":"search-suggestion",id:t,marginBottom:2,marginEnd:2,role:"option",children:(0,O.jsx)(r.Tg,{accessibilityLabel:i,href:c,onMouseEnter:a,onMouseLeave:o,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{e.metaKey||e.ctrlKey||(t(),e.preventDefault(),s())},rounding:"pill",children:(0,O.jsxs)(r.xu,{alignItems:"center",color:n?"darkWash":"secondary",dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},display:"flex",paddingX:3,paddingY:1,position:"relative",rounding:"pill",children:[(0,O.jsx)(r.xv,{align:"center",children:i}),(0,O.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:"2px"}},"data-test-id":"clear-recent-queries",marginStart:2,children:(0,O.jsx)(r.hU,{accessibilityLabel:l??"",icon:"cancel",iconColor:"darkGray",onClick:({event:t})=>{t.stopPropagation(),t.preventDefault(),e?.(i)},size:"xs"})})]})})}),eq=({id:e,isHovered:t,onClick:n,onMouseEnter:s,onMouseLeave:a,showSeeMoreOverlay:o,suggestion:c,trackClick:d,url:u})=>{let _=(0,l.ZP)();return(0,O.jsx)(r.xu,{"aria-selected":t?"true":"false","data-test-id":"search-suggestion",id:e,marginBottom:2,paddingX:1,role:"option",children:(0,O.jsx)(r.Tg,{href:u||c.url,onMouseEnter:s,onMouseLeave:a,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),d(),e.metaKey||e.ctrlKey||u||(e.preventDefault(),n())},rounding:3,tabIndex:-1,children:(0,O.jsxs)(r.zd,{height:116,rounding:3,wash:t,width:90,children:[(0,O.jsx)(r.Ee,{alt:c.label,fit:"cover",naturalHeight:c.images["236x"]?.height??1,naturalWidth:c.images["236x"]?.width??1,src:c.images["236x"]?.url??""}),o&&(0,O.jsxs)(i.Fragment,{children:[(0,O.jsx)(r.xu,{dangerouslySetInlineStyle:T,height:116,left:!0,position:"absolute",top:!0,width:90}),(0,O.jsx)(r.xu,{alignItems:"center",display:"flex",height:116,justifyContent:"center",padding:3,position:"absolute",top:!0,width:90,children:(0,O.jsx)(r.xv,{align:"center",color:"inverse",weight:"bold",children:_._('See More', 'searchBox.suggestionGroups.recentPinRep.seeMoreText', 'Text inviting users to see more of the same type of Pins')})})]})]})})})},e$=({componentType:e,focusedIndex:t,groupIndex:n,keyPrefix:i,onSuggestionClick:s,onSuggestionMouseEnter:a,onSuggestionMouseLeave:l,seeMoreUrl:c,suggestions:d,title:u})=>{let{logContextEvent:_}=(0,o.v)();return(0,O.jsxs)(r.kC,{direction:"column",gap:4,children:[(0,O.jsx)(r.kC,{width:"100%",children:(0,O.jsx)(eH,{title:u})}),(0,O.jsx)(r.xu,{display:"flex",paddingX:8,width:"100%",wrap:!0,children:d.map((r,o)=>{let u=6===o&&7===d.length;return(0,O.jsx)(eq,{id:ei(n,o),isHovered:t===o,onClick:()=>{s(r,o)},onMouseEnter:()=>{a(o)},onMouseLeave:()=>{l()},showSeeMoreOverlay:u,suggestion:r,trackClick:()=>{_({event_type:101,component:e,element:u?179:12374,view_type:2,view_parameter:103})},url:u?c:r.url},`${i}-${o}`)})})]})};function eW({focusedIndex:e,groupIndex:t,onSuggestionClick:n,onSuggestionMouseEnter:i,onSuggestionMouseLeave:s,suggestions:r}){let a=(0,l.ZP)();return(0,eD.Q)({component:13844,view_parameter:103,view_type:2}),(0,O.jsx)(e$,{componentType:13844,focusedIndex:e,groupIndex:t,keyPrefix:"recent_save",onSuggestionClick:n,onSuggestionMouseEnter:i,onSuggestionMouseLeave:s,seeMoreUrl:"/me/pins/",suggestions:r,title:a._('Recently saved', 'searchBox.recentSavedSuggestions.heading', 'Recently saved Pins heading in search autocomplete')})}function eX({containerWidth:e,focusedIndex:t,groupIndex:n,onSuggestionClick:i,onSuggestionMouseEnter:s,onSuggestionMouseLeave:a,suggestions:o}){let c=(0,l.ZP)(),d=(0,eO.useDispatch)(),u=async e=>{await (0,eL.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e}}),d((0,eZ.U)("AdvancedTypeaheadResource",{options:{term:"",pin_scope:"pins"}}))},_=c._('Remove', 'Remove recent search in search typeahead suggestion', 'Remove recent search in search typeahead suggestion'),h=function({pillLabels:e,maxWidth:t}){let n=e.length;if(!t)return n;let i=0;for(let s=0;s<e.length;s+=1){let r=7.5*e[s].length+40+24;if(r+i<t)i+=r;else{n=s;break}}return n}({pillLabels:o.map(e=>e.label),maxWidth:e});return(0,O.jsxs)(r.kC,{direction:"column",gap:4,children:[(0,O.jsx)(eH,{title:c._('Recent searches', 'Recent searches heading in search autocomplete', 'Recent searches heading in search autocomplete')}),(0,O.jsx)(r.xu,{display:"flex",overflow:"hidden",paddingX:8,position:"relative",children:o.slice(0,h).map((e,o)=>(0,O.jsx)(r.xu,{"data-test-id":"recent-query",children:(0,O.jsx)(eY,{handleRemove:u,id:ei(n,o),isHovered:t===o,label:e.label,onClick:()=>{i(e,o)},onMouseEnter:()=>{s(o)},onMouseLeave:()=>{a()},removeA11yText:_,url:en({suggestion:e,query:""})})},`${e.type}-${e.label}`))})]})}function eK({focusedIndex:e,groupIndex:t,onSuggestionClick:n,onSuggestionMouseEnter:i,onSuggestionMouseLeave:s,suggestions:r}){let a=(0,l.ZP)();return(0,eD.Q)({component:13843,view_parameter:103,view_type:2}),(0,O.jsx)(e$,{componentType:13843,focusedIndex:e,groupIndex:t,keyPrefix:"recent_view",onSuggestionClick:n,onSuggestionMouseEnter:i,onSuggestionMouseLeave:s,seeMoreUrl:"/recently-viewed/",suggestions:r,title:a._('Recently viewed', 'searchBox.recentSavedSuggestions.heading', 'Recently viewed Pins heading in search autocomplete')})}function eQ({groupIndex:e,focusedIndex:t,onSuggestionClick:n,onSuggestionMouseEnter:i,onSuggestionMouseLeave:s,searchBoxRenderStopwatch:a,suggestions:o}){let{id:l,items:c,story_type:d,title:{format:u}}=o,_=c.map(({type:e,id:t})=>e+":"+t).join("|"),h=(0,ek.Z)({viewType:2,componentType:200,viewParameter:3467,loggingId:l,objectIdStr:l,contextLogData:{content_ids:_,story_id:l,story_type:d},impressionType:"Story",slotIndex:e});return(0,O.jsxs)(r.kC,{direction:"column",gap:4,children:[(0,O.jsx)(eH,{title:u}),(0,O.jsx)(r.xu,{ref:h,display:"flex",marginBottom:5,paddingX:8,wrap:!0,children:c.slice(0,8).map((o,c)=>{let u=t===c;return(0,O.jsx)(r.xu,{"aria-selected":u?"true":"false","data-test-id":"search-suggestion-today-bubble",id:ei(e,c),marginBottom:2,paddingX:1,role:"option",children:(0,O.jsx)(eG,{bubble:o,height:192,isHovered:u,onClick:()=>{n(o,c)},onMouseEnter:()=>{i(c)},onMouseLeave:()=>{s()},searchBoxRenderStopwatch:a,slotIndex:c,storyId:l,storyType:d,viewParameter:3467,viewType:2,width:192})},`story--${e}-${c}`)})})]})}function eJ({containerWidth:e,focusedIndex:t,groupIndex:n,onSuggestionClick:i,onSuggestionMouseEnter:s,onSuggestionMouseLeave:a,searchBoxRenderStopwatch:l,suggestions:c}){let{logContextEvent:d}=(0,o.v)(),{id:u,items:_,story_type:h,title:{format:p}}=c,g=_.map(({type:e,id:t})=>e+":"+t).join("|"),m=(0,ek.Z)({componentType:200,contextLogData:{content_ids:g,story_id:u,story_type:h},impressionType:"Story",loggingId:u,slotIndex:n,viewParameter:3467,viewType:2}),x=e=>64+8*e,y=3,f=(e-x(3))/y;for(;f>1.5*eR.yF;)y+=1,f=(e-x(y))/y;let b=f/2.6;return(0,O.jsxs)(r.kC,{direction:"column",gap:4,children:[(0,O.jsx)(eH,{title:p}),(0,O.jsx)(r.xu,{ref:m,direction:"row",display:"flex",paddingX:8,wrap:!0,children:"shopping_spotlight"===h?_.map((e,t)=>(0,O.jsx)(eG,{bubble:e,height:192,onClick:()=>{d({component:200,event_type:101,view_parameter:3467,view_type:2,aux_data:{article_id:e.id,autocomplete_type:"recommended_article",story_type:h}})},onMouseDown:({event:e})=>e.preventDefault(),slotIndex:t,viewParameter:3467,viewType:2,width:192},`ss-bubble-${t}`)):_.map((e,o)=>{let c=t===o,{aux_fields:d,cover_images:_,dominant_colors:p,id:m,story_category:x,title:{format:y}}=e;return(0,O.jsx)(r.xu,{"aria-selected":c?"true":"false","data-test-id":"search-suggestion",id:ei(n,o),marginBottom:2,marginEnd:2,role:"option",children:(0,O.jsx)(ez,{contextLogData:{story_type:h,content_ids:g,grid_index:o,story_id:u},dominantColor:p?p[0]:"",height:b,id:m,image:_&&_[0]&&(_[0]["236x"]?.url||_[0]["474x"]?.url)||"",isHovered:c,name:y,onMouseEnter:()=>{s(o)},onMouseLeave:()=>{a()},onTap:()=>{i(e,o)},searchBoxRenderStopwatch:l,slotIndex:o,url:(0,ee.Z)({query:y,referringSource:2===x?"trending":"autocomplete_bubble",bubbleId:m??"",storyId:u,pinId:d?.image_pin_id}),viewParameter:3467,viewType:2,width:f})},`story-${x??""}-${n}-${m}`)})})]})}let e0={searchSuggestionsContainer:{boxSizing:"content-box",overflowY:"scroll",width:"calc(100% + 17px)"}};function e1({focusIndex:e,maxHeight:t,onInclusiveProductFilterClick:n,onMouseEnter:s,onMouseLeave:a,onSuggestionClick:o,onSuggestionHovered:c,onSyopCtaClick:d,query:u,searchBoxHeight:_,searchBoxRenderStopwatch:h,showSyopHeading:p,suggestionGroups:g,width:m}){let x=(0,i.useRef)(),f=(0,l.ZP)(),{experiencesMulti:b}=(0,el.Z)(1000315);function v(){c(void 0)}return(0,O.jsx)(ed.Z,{view:2,viewParameter:103,children:g.length>0?(0,O.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:"0 0 16px 16px",top:_}},id:"SuggestionsMenu",overflow:"hidden",position:"absolute",role:"listbox",width:m||"100%",children:(0,O.jsx)("div",{"data-test-id":"typeaheadResults",onMouseEnter:s,onMouseLeave:a,style:{maxHeight:t,...e0.searchSuggestionsContainer},children:(0,O.jsxs)(r.xu,{ref:x,color:"default",dangerouslySetInlineStyle:{__style:{borderRadius:"0 0 16px 16px",paddingBottom:"24px",paddingTop:"32px"}},overflow:"hidden",width:"100%",children:[p&&(0,O.jsx)(r.xu,{marginBottom:4,marginStart:8,marginTop:4,children:(0,O.jsx)(r.X6,{size:"500",children:u.length>0?(0,ec.nk)(f._('Search your Pins for {{ query }}', 'searchBox.suggestionsMenu.searchYourPinsForQueryText', 'Heading for search autocomplete when searching your own Pins for specific query'),{query:u}):f._('Search your Pins', 'searchBox.suggestionsMenu.searchYourPinsText', 'Heading for search autocomplete when searching your own Pins')})}),g.map((t,i)=>t.items.length?(0,O.jsx)(r.kC,{direction:"column",gap:10,children:(0,O.jsx)(r.xu,{children:function(t,i,s){let r=es(g),a=null==e?void 0:e-r[i],l=e=>{c(es(g)[i]+e)};switch(t.type){case"recent_query":return(0,O.jsx)(eX,{containerWidth:s,focusedIndex:a,groupIndex:i,onSuggestionClick:o,onSuggestionMouseEnter:l,onSuggestionMouseLeave:v,suggestions:t.items});case"recent_save":return(0,O.jsx)(eW,{focusedIndex:a,groupIndex:i,onSuggestionClick:o,onSuggestionMouseEnter:l,onSuggestionMouseLeave:v,suggestions:t.items});case"recent_view":return(0,O.jsx)(eK,{focusedIndex:a,groupIndex:i,onSuggestionClick:o,onSuggestionMouseEnter:l,onSuggestionMouseLeave:v,suggestions:t.items});case"story":return"shopping_spotlight"===t.story_type?(0,O.jsx)(eQ,{containerWidth:s,focusedIndex:a,groupIndex:i,onSuggestionClick:o,onSuggestionMouseEnter:l,onSuggestionMouseLeave:v,searchBoxRenderStopwatch:h,suggestions:t}):(0,O.jsx)(eJ,{containerWidth:s,focusedIndex:a,groupIndex:i,onSuggestionClick:o,onSuggestionMouseEnter:l,onSuggestionMouseLeave:v,searchBoxRenderStopwatch:h,suggestions:t});case"blended_autocomplete":return(function(e){let t=e.slice(),n=t[0];for(let e of t)if(e.modified_filter_eligibility?.hair_pattern||e.modified_filter_eligibility?.skin_tone){let i=e.modified_filter_eligibility.hair_pattern?.base_query||e.modified_filter_eligibility.skin_tone?.base_query||"",s=e.modified_filter_eligibility.hair_pattern?.eligible_filters,{rs:r}=(0,eu.Z)({url:e.url}),a={query:i,rs:r},o=(0,y.Z)(a),l="enriched_autocomplete"===n.type&&n.image?1:0,c={eligibleHairPatternFilters:s,label:i,query:i,resultIndex:l,type:"inclusive_product_filter_query",url:o};t.splice(l,0,c),n=t[0];break}return t})(t.items).map((e,t)=>(0,O.jsx)(ej,{experiences:b,focusedIndex:a,index:t,onInclusiveProductFilterClick:n,onSuggestionClick:o,onSuggestionMouseEnter:l,onSuggestionMouseLeave:v,query:u,suggestion:e},`search-suggestion-${e.label||""}-${e.query||""}-${e.type}-${e.url||""}-${e.image||""}`));case"syop_cta":return(0,O.jsx)(eT,{focusedIndex:a,index:0,onSuggestionClick:d,onSuggestionMouseEnter:l,onSuggestionMouseLeave:v})}return null}(t,i,x.current?.getBoundingClientRect().width??0)},`${u}-${t.type}-${t.title?.format??""}`)}):null)]})})}):(0,O.jsx)(r.xu,{})})}function e2({focusIndex:e,maxHeight:t,onInclusiveProductFilterClick:n,onMouseEnter:s,onMouseLeave:r,onSuggestionClick:a,onSuggestionGroupsUpdate:o,onSuggestionHovered:l,onSyopCtaClick:c,query:d,scope:u,searchBoxHeight:_,suggestionGroups:h,width:p}){let m=g(),x=(0,A.Z)(),y=x.isAuth&&u===I.lw.PINS_MINE;(0,z.Z)(()=>{y||m?.start()});let{data:f}=(0,Q.Z)({name:"SearchTabResource"}),{state:{recentSaves:b,recentViews:v}}=W(),P=function(){let e=(0,A.Z)(),{isLoaded:t,data:n}=(0,Q.Z)(e.isAuth?{name:"AdvancedTypeaheadResource",options:{term:"",pin_scope:I.lw.PINS},noCache:!0}:null);return(0,i.useMemo)(()=>{let e=[];return t&&n&&(e=function({newRecentQueries:e}){return e.slice(0,5).map(({label:e,query:t,url:n,type:i},s)=>({label:e,query:t,resultIndex:s,type:i,url:n}))}({newRecentQueries:n.items})),e},[t,n])}(),E=function({query:e,scope:t}){let n=(0,A.Z)(),s=(0,eo.Z)({allowSearchOnMount:!0,resourceName:"AdvancedTypeaheadResource",resourceOptions:{pin_scope:t},value:e});return(0,i.useMemo)(()=>{if(n.isAuth)return[{items:s||[],type:"blended_autocomplete"}];let e=(0,ea.Z)(s||[],e=>e.type),t=["query","user"].flatMap(t=>e[t]).filter(e=>!!e);return[{items:t,type:"blended_autocomplete"}]},[s,n])}({query:d,scope:u});return(0,i.useEffect)(()=>{let e=x.isAuth?E.concat({items:[{type:"syop_cta",label:"",query:"",resultIndex:0,url:""}],type:"syop_cta"}):E,t=f||[],n=x.isAuth?t.filter(e=>"shopping_spotlight"!==e.story_type):t;o(y?[{items:P,type:"recent_query"},{items:v,type:"recent_view"},{items:b,type:"recent_save"}]:d.length?e:[{items:P,type:"recent_query"},...n||[]])},[E,y,o,d,f,P,b,v,u,x]),(0,O.jsx)(e1,{focusIndex:e,maxHeight:t,onInclusiveProductFilterClick:n,onMouseEnter:s,onMouseLeave:r,onSuggestionClick:a,onSuggestionHovered:l,onSyopCtaClick:c,query:d,searchBoxHeight:_,searchBoxRenderStopwatch:m,showSyopHeading:y,suggestionGroups:h,width:p})}var e3=n(930837),e4=n(343902),e6=n(478492),e8=n(979702),e7=n(324115),e5=n(785964);let e9={border:"2px dashed #dadada",borderRadius:"16px",pointerEvents:"none"};function te({onDismiss:e}){let t=(0,l.ZP)(),n=(0,s.k6)(),{image:a,setHeroImageUrl:o,setImage:c,setImageData:d}=(0,e5.t)(),[u,_]=(0,i.useState)(""),[h,p]=(0,i.useState)(""),[g,m]=(0,i.useState)(null),x=(0,i.useRef)();(0,i.useEffect)(()=>{a&&(n.push("/lens-search"),e())},[n,a,e]);let y=(0,i.useCallback)(async e=>await new Promise(t=>{let n=new FileReader;n.onload=()=>{let i=new Image;i.src=n.result,i.onload=()=>{let{height:n,width:s}=i;s>n?s>474&&(n*=474/s,s=474):n>474&&(s*=474/n,n=474),d({src:i.src,height:n,width:s});let r=document.createElement("canvas");r.width=s,r.height=n;let a=r.getContext("2d");a.drawImage(i,0,0,s,n),r.toBlob(n=>{let i=new File([n],e.name,{type:"image/jpeg"});t(i)},"image/jpeg",.9)}},n.readAsDataURL(e)}),[d]),f=(0,i.useCallback)(async()=>{if(g)try{let e=await y(g),n=await (0,e7.Z)({i18n:t,ideaPinRenamingEnabled:!1,file:e,options:{allowVideo:!1}});"error"===n.type||(p(""),c(e))}catch(e){p(e.message)}},[y,g,p,c,t]),b=e=>{let t=async e=>{let t=await fetch(e),n=await t.blob(),i=new File([n],"image.jpg",{type:"image/jpeg"});m(i)};e&&(t(e),o(e))};return(0,i.useEffect)(()=>{g&&f()},[f,g]),(0,O.jsxs)(e3.ZP,{accessibilityModalLabel:t._('Lens modal', 'lens.modal.accessibilityLabel', 'Modal for Lens Image Search'),align:"start",heading:(0,O.jsxs)(r.kC,{alignItems:"center",justifyContent:"between",children:[(0,O.jsx)(r.X6,{accessibilityLevel:1,size:"500",children:t._('Upload image to search', 'lens.modal.header', 'Header for Lens Image Search modal')}),(0,O.jsx)(r.hU,{accessibilityLabel:t._('Lens icon', 'lens.entrypoint.icon', 'Icon for lens entrypoint'),bgColor:"white",icon:"cancel",iconColor:"darkGray",onClick:e,size:"md"})]}),onDismiss:e,size:"sm",children:[(0,O.jsx)(r.xu,{marginTop:1,paddingX:6,children:(0,O.jsx)(r.xu,{height:311,position:"relative",children:(0,O.jsx)(e8.Z,{accept:[...e6.xl].join(","),accessibilityLabel:t._('File Upload', 'lens.upload.fileUpload', 'Input where we upload files for Lens image search'),allowMultipleFiles:!1,dropRounding:16,hasError:!!h,id:"lens-photo-upload-input",onChange:e=>{m(e.target.files[0])},onDrop:e=>{m(e.dataTransfer.files[0])},children:()=>(0,O.jsxs)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:e9},direction:"column",display:"flex",height:"100%",children:[(0,O.jsxs)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginTop:70}},direction:"column",display:"flex",children:[(0,O.jsx)(r.JO,{accessibilityLabel:t._('Upload photo', 'lens.photo.upload.icon', 'Upload indicator for lens image search'),color:h?"error":"dark",icon:h?"alert":"arrow-circle-up",size:24}),(0,O.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:(0,O.jsxs)(r.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginTop:4,children:[!!h&&(0,O.jsx)(r.xu,{marginBottom:4,children:(0,O.jsx)(r.xv,{color:"error",children:h})}),(0,O.jsx)(r.xv,{align:"center",inline:!0,children:(0,ec.nk)(t._('Drag an image here or {{ chooseFile }}', 'lens.modal.uploadTip.dragImage', 'Upload tip for Lens Image Search. chooseFile: choose a file to upload'),{chooseFile:(0,O.jsx)(r.xv,{inline:!0,underline:!0,children:t._('choose a file', 'lens.modal.uploadTip', 'Upload tip for Lens Image Search')},"lens-choose-file")})})]})})]}),(0,O.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{borderTop:"1px solid #cdcdcd"}},paddingY:6,position:"absolute",width:"90%",children:(0,O.jsx)(e4.Z,{children:(0,O.jsxs)(r.xu,{position:"relative",zIndex:new r.Ry(10),children:[(0,O.jsx)(r.nv,{ref:x,id:"scrape-view-website-link",onChange:({value:e})=>{_(e)},placeholder:t._('Paste image link', 'lens.url.textField', 'Placeholder text to enter website url'),size:"lg",type:"url",value:u}),!!u&&(0,O.jsx)(r.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,O.jsx)(r.hU,{accessibilityLabel:t._('Submit', 'lens.url.submitButton', 'Submit button to scrape images from url'),bgColor:"lightGray",icon:"arrow-forward",iconColor:"darkGray",onClick:()=>b(u),size:"sm"})})]})})})]})})})}),(0,O.jsx)(r.xu,{marginTop:8})]})}function tt({handleIconOnlyChange:e,iconOnly:t=!1,isPartner:n=!1,widthType:h="md"}){let{logContextEvent:g}=(0,o.v)(),T=(0,A.Z)(),j=(0,l.ZP)(),C=(0,s.k6)(),{isRTL:R}=(0,m.B)(),M=(0,s.TH)(),{checkExperiment:N}=(0,_.F)(),D=N("web_lens").anyEnabled,[L,Z]=(0,i.useState)(!1),B=(0,u.En)(M);!function(){let e=(0,A.Z)(),{isBot:t}=(0,m.B)(),{isAuth:n,isLimitedLogin:i}=e,s=n&&!i;(0,Q.Z)(n?{name:"AdvancedTypeaheadResource",options:{term:"",pin_scope:I.lw.PINS},noCache:!0}:null),(0,Q.Z)(t?null:{name:"SearchTabResource"}),(0,Q.Z)(s?{name:"ApiResource",options:{url:"/v3/users/me/recent/engaged/pin/stories/",data:{fields:w.join(","),pin_preview_count:7}}}:null)}();let{query:U,scope:F,rs:G}=(0,b.Z)(M),H=a.t.includes(G)?"":U,Y=H??"",[q,$]=(0,i.useState)(Y),[W,X]=(0,i.useState)(),K=W&&W.query?W.query:q,ee=function(){let e=(0,s.TH)(),t=(0,A.Z)(),n=t.isAuth&&e.pathname.startsWith(`/${t.username}/`),i=t.isAuth&&e.pathname.startsWith("/recently-viewed");return n||i}(),et=F??I.lw.PINS;ee&&(et=I.lw.PINS_MINE),et===I.lw.PINS_BUYABLE&&(et=I.lw.PINS);let[ea,eo]=(0,i.useState)(et),el=T.isAuth&&ea===I.lw.PINS_MINE,[ec,ed]=(0,i.useState)([]),[eu,e_]=(0,i.useState)(),[eh,ep]=(0,i.useState)(!1),[eg,em]=(0,i.useState)(!1),[ex,ey]=(0,i.useState)(!1),[ef,eb]=(0,i.useState)(!1),[ev,eP]=(0,i.useState)(!1),[eI,eA]=(0,i.useState)(0);function eE(){e_(void 0),X(void 0)}let eS=eg||ef,{setAppFocusState:ew,toggleTypeaheadOverlay:eT}=(0,E.I)(),[ej,eO]=(0,i.useState)(t);(0,i.useEffect)(()=>{eO(t)},[t]);let[eC,eR]=(0,i.useState)(!1),[ek,eM]=(0,i.useState)();!function({setShouldHideGhostText:e,setSuggestionsMaxHeight:t}){function n(){let n=document.getElementById("searchBoxContainer")?.offsetWidth||0;e(n<=360),t(window.innerHeight-14-76)}(0,z.Z)(()=>(window.addEventListener("resize",n),n(),()=>{window.removeEventListener("resize",n)}))}({setShouldHideGhostText:eR,setSuggestionsMaxHeight:eM});let eN=T.isAuth&&"shrink"!==h&&(Y||ee),ez="auto".includes(h)?"8px":0;eN&&(ez="4px");let[eD,eL,eZ]=function({shouldHideGhostText:e,isSyop:t,inputFocused:n}){let i=(0,l.ZP)(),s=(0,A.Z)(),{isAuth:r}=s,a=(0,Q.Z)(r?{name:"ApiResource",options:{url:"/v3/search/ghost_queries/",data:{}}}:null),o=r?i._('Search', 'searchBox.placeholder.defaultText', 'default placeholder text for search box'):i._('Search for easy dinners, fashion, etc.', ' - ', ' -- '),c="";if(!e&&a.isLoaded&&a.data&&a.data.length>0){let e=a.data[0].text;c=a.data[0].query,o=e}t&&(o=n?i._('Try a title or description', 'searchBox.placeholder.searchYourOwnPinsFocusedText', 'default placeholder text for input focused search box when searching Your Pins'):i._('Search your Pins', 'searchBox.placeholder.searchYourOwnPinsText', 'default placeholder text for search box when searching Your Pins'));let d=(0,J.Z)();return[o,c,d]}({shouldHideGhostText:eC,isSyop:el,inputFocused:eg}),eB=(0,i.useRef)();function eU(){let e=(0,v.Z)(q);if(!e.length)return;let t=(0,y.Z)({query:e,rs:P.i.AC,scope:I.lw.PINS_MINE});C.push(t)}(0,i.useEffect)(()=>{eB.current!==eS&&(eS?c.Z.pause():c.Z.resume(),ew(!eS),eS||(eE(),$(Y)),eT(eS),eB.current=eS)},[Y,eS,ew,eT]),(0,i.useEffect)(()=>{$(Y),eo(et),em(!1),eb(!1)},[Y,et]);let eF=(e,t,n=!1)=>{let i=n?97:101,s={};switch(q&&(s.entered_query=q,s.selected_query=e.query||void 0),e.type){case"inclusive_product_filter_query":case"recent_query":case"query":g({event_type:i,view_type:2,view_parameter:103,component:35,element:104,aux_data:{autocomplete_type:"inclusive_product_filter_query"===e.type?"query":e.type,result_index:t,...s}});let r=en({suggestion:e,query:q,lastFocusTime:eI});el&&"recent_query"===e.type&&(r=r.replace("pins","my_pins")),C.push(r);break;case"recent_save":C.push(e.url);break;case"enriched_autocomplete":case"board":case"user":g({event_type:i,view_type:2,view_parameter:103,component:35,element:104,aux_data:{autocomplete_type:e.type,result_index:t,...s}}),C.push(e.url);break;case"explorearticle":26===e.story_category?g({event_type:101,view_type:2,view_parameter:3467,component:13865,aux_data:{article_id:e.id,autocomplete_type:"recommended_article",story_id:e.storyId,story_type:"shopping_spotlight",...s}}):g({event_type:101,view_type:2,view_parameter:3467,component:200,aux_data:{autocomplete_type:2===e.story_category?"trending":"recommended",result_index:t,...s}}),n&&C.push(en({suggestion:e,query:""}));break;case"todayarticle":g({event_type:101,view_type:2,view_parameter:3467,component:200,aux_data:{article_id:e.id,autocomplete_type:"recommended_article",story_type:"shopping_spotlight",...s}}),n&&C.push(en({suggestion:e,query:""}));break;case"syop_cta":eU()}eE(),em(!1),eb(!1)},eV=()=>{if(K===Y&&ea===et)return;let e=(0,v.Z)(K);if(!e.length)return;let t=(0,y.Z)({query:e,rs:P.i.TYPED,scope:ea});em(!1),eb(!1),C.push(t)};if(ej&&!eg&&!Y&&!eS)return(0,O.jsx)(r.xu,{id:"searchBoxContainer",children:(0,O.jsx)(r.hU,{accessibilityLabel:j._('Search icon', 'searchBox.searchIcon.accessibilityLabel', 'accessibility label for search icon only at narrow screen width'),icon:"search",iconColor:"gray",onClick:()=>{em(!0),eO(!1),e&&e(!1),n&&g({event_type:101,element:11809})},size:"lg"})});let eG=function({suggestionsFocusIndex:e,suggestionGroups:t}){let n,i;let s=es(t);if("number"==typeof e){for(let t=s.length-1;t>=0;t-=1)if(e>=s[t]){n=t,i=e-s[t];break}}return"number"==typeof n&&"number"==typeof i?ei(n,i):""}({suggestionsFocusIndex:eu,suggestionGroups:ec}),eH="shrink"===h?"80vw":void 0,eY=h&&Object.keys(S).includes(h)&&"shrink"!==h?S[h]:"auto",eq=(0,O.jsx)(p,{children:(0,O.jsx)(e2,{focusIndex:eu,maxHeight:ek,onInclusiveProductFilterClick:(e,t,n)=>{let i={};q&&(i.entered_query=q),g({event_type:101,view_type:2,view_parameter:103,component:35,element:104,aux_data:{autocomplete_type:"query",result_index:t,...i}});let s=en({suggestion:e,query:q,lastFocusTime:eI,filterSelectedTerm:n});C.push(s)},onMouseEnter:()=>eb(!0),onMouseLeave:()=>eb(!1),onSuggestionClick:eF,onSuggestionGroupsUpdate:ed,onSuggestionHovered:e=>e_(e),onSyopCtaClick:eU,query:q,scope:ea,searchBoxHeight:52,suggestionGroups:ec,width:eH})});return(0,O.jsx)(r.xu,{flex:"grow",id:"searchBoxContainer",minWidth:eY,paddingX:2,children:(0,O.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:ex?f.w:f.S}},display:"flex",height:48,rounding:6,children:[(0,O.jsxs)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{padding:R?`0 16px 0 ${ez}`:`0 ${ez} 0 16px`,...eS?{borderRadius:"24px",boxShadow:"0 0 0 4px rgba(0, 132, 255, .5)"}:{}}},display:"flex",flex:"grow",height:"100%",onMouseEnter:()=>{ey(!0)},onMouseLeave:()=>{ey(!1)},position:"relative",children:[!(K||eg)&&(0,O.jsx)(r.xu,{flex:"none",marginEnd:2,children:(0,O.jsx)(r.JO,{accessibilityLabel:j._('Search icon', 'searchBox.searchIcon.accessibilityLabel', 'Search icon in search box'),icon:"search",size:16})}),B&&(0,O.jsx)(V,{handleClearMode:()=>{K===Y?C.push(`/search/pins/?q=${Y}`):eo(I.lw.PINS)},scope:ea}),(0,O.jsx)(x.Z,{dataTestId:"search-box-input",focusOptionId:eG,isFocused:eS,name:"searchBoxInput",onBlur:e=>{let{currentTarget:t}=e;setTimeout(()=>{t.contains(document.activeElement)||em(!1)},0)},onChange:function(e){$(e),eE()},onFocus:function(){eA(Date.now()),g({event_type:101,component:43,element:227}),em(!0)},onKeyDown:e=>{switch(e.keyCode){case d.Z.ENTER:{let t=er(ec,eu);eS&&t&&e.preventDefault(),t&&eh?(eF(t,t.resultIndex||0,!0),ep(!1)):eV();break}case d.Z.ESCAPE:eS&&e.preventDefault(),e.stopPropagation(),em(!1),eb(!1);break;case d.Z.UP:eS&&e.preventDefault();let[t,n]=function(e,t){let n;let i=e.map(e=>e.items.length??0).reduce((e,t)=>e+t,0);n=null==t?i-1:0===t?void 0:t-1;let s=er(e,n);return[n,s]}(ec,eu);e_(t),ep(!0),X(n);break;case d.Z.DOWN:{eS&&e.preventDefault();let[t,n]=function(e,t){let n;let i=e.map(e=>e.items.length??0).reduce((e,t)=>e+t,0);n=null==t?0:t===i-1?void 0:t+1;let s=er(e,n);return[n,s]}(ec,eu);e_(t),ep(!0),X(n);break}case d.Z.TAB:eL&&!q&&eS&&(e.preventDefault(),e.stopPropagation(),$(eL))}},onSearchTrigger:eV,placeholder:eD,searchBoxHovered:ex,suggestedSearchTerms:eZ,value:K}),K||n&&eN||eS?(0,O.jsx)(r.xu,{flex:"none",marginStart:3,children:(0,O.jsx)(r.xu,{"data-test-id":"search-cancel",children:(0,O.jsx)(r.hU,{accessibilityLabel:j._('Remove search input', 'searchBox.removeSearchInput.accessibilityLabel', 'Accessibility label to remove the search input'),icon:Y?"cancel":"clear",iconColor:"darkGray",onClick:()=>{if($(""),eo(I.lw.PINS),eE(),T.isAuth&&Y){let e=(0,y.Z)({query:"",rs:P.i.REMOVE});C.push(e)}else n&&e&&e(!0)},size:Y?"sm":"lg"})})}):null,eS&&eq,D&&(0,O.jsx)(r.hU,{accessibilityLabel:j._('Lens', 'searchBox.lens.accessibilityLabel', 'Lens'),icon:"camera-roll",iconColor:"gray",onClick:()=>Z(!0)})]}),eN?(0,O.jsxs)(i.Fragment,{children:[(0,O.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{background:"#d8d8d8",borderRadius:"1px"}},height:32,margin:"auto",width:2}),(0,O.jsx)(k,{currentlySelectedFilter:ea,currentQuery:Y,handleContentTypeFilterHover:()=>{n&&eP(ev)},handleScopeChange:function(e){eo(e),em(n&&!q),eE()}})]}):null,L&&(0,O.jsx)(te,{onDismiss:()=>Z(!1)})]})})}function tn(e){return(0,O.jsx)(X,{children:(0,O.jsx)(tt,{...e})})}},156361:(e,t,n)=>{n.d(t,{A:()=>o,N:()=>l});var i=n(667294),s=n(342513),r=n(785893);let{Provider:a,useHook:o}=(0,s.Z)("ModeIcon");function l({children:e,value:t={modeIcon:null}}){let[n,s]=(0,i.useState)(t),o=(0,i.useMemo)(()=>({searchContext:n,updateSearchContext:s}),[n,s]);return(0,r.jsx)(a,{value:o,children:e})}},785964:(e,t,n)=>{n.d(t,{b:()=>l,t:()=>o});var i=n(667294),s=n(342513),r=n(785893);let{Provider:a,useHook:o}=(0,s.Z)("LensContext");function l({children:e}){let[t,n]=(0,i.useState)(),[s,o]=(0,i.useState)(),[l,c]=(0,i.useState)();return(0,r.jsx)(a,{value:{heroImageUrl:s,image:t,imageData:l,setHeroImageUrl:o,setImage:n,setImageData:c},children:e})}},943432:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(883119),s=n(477458),r=n(785893);function a({colors:e,isSelected:t,onClick:n}){return(0,r.jsx)(s.q,{children:({hovered:s,onMouseEnter:a,onMouseLeave:o})=>(0,r.jsx)(i.kC,{alignItems:"center",height:64,justifyContent:"start",children:(0,r.jsx)(i.iP,{mouseCursor:"pointer",onMouseEnter:a,onMouseLeave:o,onTap:n,rounding:"pill",children:(0,r.jsx)(i.xu,{alignItems:"center",color:t?"primary":s?"tertiary":void 0,display:"flex",height:64,justifyContent:"center",rounding:"pill",width:92,children:(0,r.jsx)(i.xu,{alignItems:"center",color:"default",display:"flex",height:60,justifyContent:"center",rounding:"pill",width:88,children:(0,r.jsx)(i.xu,{display:"flex",height:56,overflow:"hidden",rounding:"pill",width:84,wrap:!0,children:e.map((e,t)=>(0,r.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:28,width:42},`${e}-${t}`))})})})})})})}},930493:(e,t,n)=>{n.d(t,{W:()=>d,Z:()=>_});var i=n(667294),s=n(883119),r=n(214877),a=n(200397),o=n(140017),l=n(943432),c=n(785893);let d=[["#F0E3DC","#F8D7D8","#F2D7BE","#F7C3AF"],["#DEBAB0","#E0999A","#DDA67C","#D98A64"],["#9A6B52","#A25847","#B37143","#BF6951"],["#683929","#34261F","#64281B","#4F2221"]],u=[{display:"Range 1",swatch_hex_colors:["#F0E3DC","#F8D7D8","#F2D7BE","#F7C3AF"],term:"skin_color_bucket_id:1"},{display:"Range 2",swatch_hex_colors:["#DEBAB0","#E0999A","#DDA67C","#D98A64"],term:"skin_color_bucket_id:2"},{display:"Range 3",swatch_hex_colors:["#9A6B52","#A25847","#B37143","#BF6951"],term:"skin_color_bucket_id:3"},{display:"Range 4",swatch_hex_colors:["#683929","#34261F","#64281B","#4F2221"],term:"skin_color_bucket_id:4"}];function _({currentlyAppliedFiltersParamTerm:e,filterTones:t=u,onClickApplyFilters:n,query:_,showHeaderText:h=!0}){let{logContextEvent:p}=(0,r.v)(),g=(0,o.ZP)(),m=(0,i.useRef)(null),x=(0,i.useRef)(null),y=t=>{let i=e===t?"":t;p({event_type:101,component:47,element:10418,view_type:2,aux_data:{entered_query:_,filter_type:"skin_tone",value:i}}),x.current?.complete(),n(i)},f=e?g._('Some ideas in this skin tone range', 'SkinToneFilters.copy.termSelected', 'Skin tone filters text'):g._('Pick a skin tone range', 'SkinToneFilters.copy.noTermSelected', 'Skin tone filters text');return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsxs)(s.kC,{alignItems:h?"center":"start",direction:"column",justifyContent:"start",children:[h&&(0,c.jsx)(s.xu,{marginBottom:2,children:(0,c.jsx)(s.xv,{color:"default",overflow:"normal",weight:"bold",children:f})}),(0,c.jsx)(s.xu,{ref:m,display:"flex",flex:"none",paddingX:1,children:t.map(({term:t},n)=>(0,c.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{padding:"0 2px"}},"data-test-id":"skin-tone-option",children:(0,c.jsx)(l.Z,{colors:d[n],isSelected:e===t,onClick:()=>y(t)})},t))})]}),m&&(0,c.jsx)(a.Z,{anchor:m.current,experienceIds:[502978],idealDirection:"right",onExperienceMount:e=>{e.complete&&502978===e.experience_id&&(x.current=e)},placementId:29})]})}},622350:(e,t,n)=>{n.d(t,{GB:()=>p,ZP:()=>h,q0:()=>_});var i=n(883119),s=n(339001),r=n(203966),a=n(427514),o=n(702497),l=n(843964),c=n(622270),d=n(961936),u=n(785893);let _=e=>e._('Not a valid URL.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating an invalid URL was entered to create a Pin');function h({dispatchId:e,errorId:t,i18n:n,ideaPinRenamingEnabled:l,options:h}){let p=(0,c.Z)(t,n,e,void 0,h);if("GENERAL_ERROR"!==p.id)return p;switch(t){case"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT",type:"error",message:n._('Ooops! This description is getting long. Try trimming it down.', 'storyPinBuilder.errorMessaging.message', 'Error message when description is greater than maximum character count.')};case"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT":return{dispatchId:e,id:"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT",type:"error",message:n._('Ooops! Too many user mentions. Try keeping it to 5 max.', 'pinBuilder.errorMessaging.descriptionMentionLimit', 'Error message when description contains more user mentions than maximum allowed count.')};case"TITLE_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"TITLE_OVER_MAX_CHARACTER_LIMIT",type:"error",message:n._('Ooops! This title is getting long. Try trimming it down.', 'storyPinBuilder.errorMessaging.message', 'Error message when title is greater than maximum character count.')};case"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO":return{dispatchId:e,id:"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO",type:"error",message:n._('This image does not have the recommended aspect ratio.', 'storyPinBuilder.errorMessaging.message', 'Signal message when uploading an image that does not have the recommended aspect ratio.')};case"TAG_SAME_PRODUCT_LINK":return{dispatchId:e,id:"TAG_SAME_PRODUCT_LINK",type:"error",message:n._('You can\'t tag from the same page twice.', 'storyPinBuilder.errorMessaging.message', 'Error message for using the same product link twice on a Pin tag'),blocking:!0};case"TAG_OVER_MAX_PRODUCTS_LIMIT":return{dispatchId:e,id:"TAG_OVER_MAX_PRODUCTS_LIMIT",type:"error",message:n._('You\'ve reached the maximum number of products for a tag.', 'storyPinBuilder.errorMessaging.message', 'Error message when user attempts to add more than 8 products to a tag'),blocking:!0};case"BOARD_MISSING":return{dispatchId:e,id:"BOARD_MISSING",type:"error",message:n._('A board is required to create a Pin.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a board is required to create a Pin'),blocking:!0};case"DATE_IN_PAST":return{dispatchId:e,id:"DATE_IN_PAST",type:"error",message:n._('A future date is required to schedule a Pin.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the date is in the past for a scheduled Pin.'),blocking:!0};case"DATE_TOO_FAR_IN_FUTURE":return{dispatchId:e,id:"DATE_TOO_FAR_IN_FUTURE",type:"error",message:n._('Make sure you schedule a Pin less than 30 days in the future.', 'storyPinBuilder.errorMessaging.30DayMessage', 'Error message indicating the date is too far in the future for a scheduled Pin.'),blocking:!0};case"DATE_MISSING":return{dispatchId:e,id:"DATE_MISSING",type:"error",message:n._('A date is required to schedule a Pin.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a date is required to schedule a Pin.'),blocking:!0};case"DESCRIPTION_INVALID":return{dispatchId:e,id:"DESCRIPTION_INVALID",type:"error",message:n._('The description is invalid.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating an invalid description was entered to create a Pin'),blocking:!0};case"MEDIA_MISSING":return{dispatchId:e,id:"MEDIA_MISSING",type:"error",message:n._('An image is required to create a Pin.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating an image, video, or website is required to create a Pin.'),blocking:!0};case"SHOWCASE_UNSUPPORTED_FORMAT":return{dispatchId:e,id:"SHOWCASE_UNSUPPORTED_FORMAT",type:"error",message:n._('Showcase ads don\u2019t currently support video. To continue, please upload an image.', 'showcasePinBuilder.errorMessaging.message', 'Error message for uploading the wrong format for showcase ads.'),blocking:!0};case"TAG_INVALID":return{dispatchId:e,id:"TAG_INVALID",type:"error",message:n._('You can only tag images linking to your claimed website.', 'storyPinBuilder.errorMessaging.message', 'Error message for entering a link you have not claimed.'),blocking:!0};case"TAG_EMPTY":return{dispatchId:e,id:"TAG_EMPTY",type:"error",message:n._('You must tag at least one feature Pin to continue.', 'storyPinBuilder.errorMessaging.message', 'Error message for not tagging at least one product on a showcase ad.'),blocking:!0};case"TIME_MISSING":return{dispatchId:e,id:"TIME_MISSING",type:"error",message:n._('A time is required to schedule a Pin.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a time is required to schedule a Pin.'),blocking:!0};case"TITLE_INVALID":return{dispatchId:e,id:"TITLE_INVALID",type:"error",message:n._('The title is invalid.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating an invalid title was entered to create a Pin'),blocking:!0};case"URL_INVALID":return{dispatchId:e,id:"URL_INVALID",type:"error",message:_(n),blocking:!0};case"URL_MISSING":return{dispatchId:e,id:"URL_MISSING",type:"error",message:n._('URL is required.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a URL is required to create a Pin'),blocking:!0};case"URL_CONTAINS_PORN_DOMAIN":let g=(0,s.nk)(n._('Some nudity is okay for Pinterest, some isn\'t. Make sure you understand {{ policy_link }}', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the URL entered is a porn domain.'),{policy_link:(0,u.jsx)(i.rU,{display:"inlineBlock",href:o.MsG,target:"blank",underline:"hover",children:(0,u.jsx)(i.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:n._('our policies', 'Link to policy page', 'Link to policy page')})},0)});return{dispatchId:e,id:"URL_CONTAINS_PORN_DOMAIN",type:"error",message:g,blocking:!0};case"URL_IS_TOO_LONG":return{dispatchId:e,id:"URL_IS_TOO_LONG",type:"error",message:(0,a.Z)(n._('Please shorten the link to {{ maxLength }} characters or fewer.', 'pinbuilder.urlIsTooLong.errorMessage', 'Error message indicating a URL is too long to create a Pin. maxLength: max number of chars in the link'),{maxLength:r.cH}),blocking:!0};case"URL_IS_BLOCKED":return{dispatchId:e,id:"URL_IS_BLOCKED",type:"error",message:n._('This link is blocked because it may not meet our content policies.', 'pinbuilder.blockedUrl.errorMessage', 'Error message indicating a URL is blocked because it may not meet our content policies'),blocking:!0};case"CAROUSEL_DIFFERENT_RATIOS":return{dispatchId:e,id:"CAROUSEL_DIFFERENT_RATIOS",type:"error",message:n._('Carousel images must have the same height and width', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a carousel with different sizes'),blocking:!0};case"CAROUSEL_INVALID_FORMAT":return{dispatchId:e,id:"CAROUSEL_INVALID_FORMAT",type:"error",message:n._('Carousels can only contain images', 'storyPinBuilder.errorMessaging.message', 'Error message when attempting to add a non-image file type to a carousel'),blocking:!0};case"URL_IS_REDIRECT":return{dispatchId:e,id:"URL_IS_REDIRECT",type:"error",message:n._('URL is a redirect.  Please enter a URL without a redirect.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a URL with a redirect was entered'),blocking:!0};case"URL_UNREACHABLE":return{dispatchId:e,id:"URL_UNREACHABLE",type:"error",message:n._('URL is unreachable.  Please check that it is correct.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the URL specified is unreachable.'),blocking:!0};case"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO",type:"error",message:n._('Edit the image on the cover page to have a 9:16 ratio', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the image on the cover page of a Story Pin does not have the correct aspect ratio.'),blocking:!0};case"STORY_PIN_COVER_PAGE_IMAGE_MISSING":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_IMAGE_MISSING",type:"error",message:l?n._('Please provide an image for the cover page of your Pin', 'storyPinBuilder.errorMessaging.storypinCoverPageImageMissing', 'Error message indicating that the cover page of a Pin is missing an image'):n._('Please provide an image for the cover page of your Idea Pin', 'storyPinBuilder.errorMessaging.message', 'Error message indicating that the cover page of a Idea Pin is missing an image')};case"STORY_PIN_COVER_PAGE_SIGNATURE_MISSING":return{dispatchId:e,blocking:!0,id:"STORY_PIN_COVER_PAGE_SIGNATURE_MISSING",type:"error",message:l?n._('Cannot save Pin without signature set on cover', 'storyPinBuilder.errorMessaging.storyPinCoverPageSignatureMissing', 'Error message indicating that the cover page is missing the signature'):n._('Cannot save Idea Pin without signature set on cover', 'storyPinBuilder.errorMessaging.message', 'Error message indicating that the cover page is missing the signature')};case"STORY_PIN_COVER_PAGE_TITLE_MISSING":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_TITLE_MISSING",type:"error",message:l?n._('Give your Pin a title before you publish', 'storyPinBuilder.errorMessaging.storyPinCoverPageTittleMissing', 'Error message indicating the cover page of a Pin is missing a title.'):n._('Give your Idea Pin a title before you publish', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the cover page of a Idea Pin is missing a title.'),blocking:!0};case"STORY_PIN_MEDIA_SIGNATURES_MISSING":return{dispatchId:e,blocking:!0,id:"STORY_PIN_MEDIA_SIGNATURES_MISSING",type:"error",message:l?n._('Cannot save Pin without signatures set on all media blocks/items', 'storyPinBuilder.errorMessaging.storyPinMediaSignatureMissing', 'Error message indicating that signatures are missing on media blocks/items'):n._('Cannot save Idea Pin without signatures set on all media blocks/items', 'storyPinBuilder.errorMessaging.message', 'Error message indicating that signatures are missing on media blocks/items')};case"STORY_PIN_NOT_ENOUGH_PAGES":return{dispatchId:e,id:"STORY_PIN_NOT_ENOUGH_PAGES",type:"error",message:l?n._('Create at least 2 pages to publish a Pin', 'storyPinBuilder.errorMessaging.storyPinNotEnoughPages', 'Error message indicating the Pin is too short.'):n._('Create at least 2 pages to publish an Idea Pin', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the Idea Pin is too short.'),blocking:!0};case"STORY_PIN_TOO_MANY_DRAFTS":let m=(0,s.nk)(n._('You have reached the limit of {{draftMaxCount}} drafts.', 'storyboard.errorMessaging.message.draftLimitError', 'Upload attempt error message when users reached max number of drafts allowed. draftMaxCount: max number of drafts'),{draftMaxCount:d.in}).join("");return{dispatchId:e,id:"STORY_PIN_TOO_MANY_DRAFTS",type:"error",message:m,blocking:!0};case"STORY_PIN_TOO_MANY_MULTI_UPLOADS_AT_ONCE":let x=(0,s.nk)(n._('You can only upload {{multiUploadMaxCount}} drafts at once.', 'storyboard.errorMessaging.message.multiUploadMaxError', 'Error message when users multi upload more than the max allowed. multiUploadMaxCount: max number of multi uploaded'),{multiUploadMaxCount:d.Af}).join("");return{dispatchId:e,id:"STORY_PIN_TOO_MANY_MULTI_UPLOADS_AT_ONCE",type:"error",message:x,blocking:!0};case"STORY_PIN_TOO_MANY_PAGES":let y=(0,s.nk)(n.ngettext('There cannot be more than {{max_pages}} page', 'There cannot be more than {{max_pages}} pages', r.yX, 'storyPinBuilder.errorMessaging.message', 'Error message when trying to create a Story Pin with more than the allowed number of pages'),{max_pages:r.yX}).join("");return{dispatchId:e,id:"STORY_PIN_TOO_MANY_PAGES",type:"error",message:y,blocking:!0};case"STORY_PIN_TITLE_MISSING":return{dispatchId:e,id:"STORY_PIN_TITLE_MISSING",type:"error",message:l?n._('Give your Pin a title before you publish', 'storyPinBuilder.errorMessaging.storyPinTitleMissing', 'Error message indicating the Pin is missing a title.'):n._('Give your Idea Pin a title before you publish', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the Idea Pin is missing a title.'),blocking:!0};case"STORY_PIN_VIDEO_BELOW_MIN_DURATION":{let t=Math.floor(r.W_),i=(0,s.nk)(n.ngettext('This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minVideoLengthSeconds}} second.', 'This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minVideoLengthSeconds}} seconds.', t, 'storyPinBuilder.errorMessaging.message', 'Error message uploading a video file that is longer than the allowed duration'),{minVideoLengthSeconds:t}).join("");return{dispatchId:e,id:"STORY_PIN_VIDEO_BELOW_MIN_DURATION",type:"error",message:i,blocking:!0}}case"STORY_PIN_VIDEO_ON_COVER":return{dispatchId:e,id:"STORY_PIN_VIDEO_ON_COVER",type:"error",message:n._('The cover page cannot contain a video', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the cover page of a Story Pin contains a video.'),blocking:!0};case"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":{let t=r.Lr/1024/1024,i=(0,s.nk)(n.ngettext('This video is too large and can\'t be uploaded. Videos can\'t be larger than {{maxVideoFileSize}}MB.', 'This video is too large and can\'t be uploaded. Videos can\'t be larger than {{maxVideoFileSize}}MB.', t, 'storyPinBuilder.errorMessaging.message', 'Error message uploading a video file larger than required megabytes.'),{maxVideoFileSize:t}).join("");return{dispatchId:e,id:"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE",type:"error",message:i,blocking:!0}}case"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT",type:"error",message:n._('Ooops! This alt text is getting long. Try trimming it down.', 'pinBuilder.errorMessaging.message', 'Error message when alt text is greater than maximum character count.')};default:return{dispatchId:e,id:"GENERAL_ERROR",type:"error",message:n._('Hmm, something went wrong. Please try again.', 'storyPinBuilder.errorMessaging.message', 'Error message for generic error during Pin creation'),blocking:!0}}}function p(e,t,n){let i=(0,l.Z)();n({event_type:7564,view_type:212,component:i.includes("create")?13762:13308,aux_data:{error_message:t,error_id:e}})}},961936:(e,t,n)=>{n.d(t,{Af:()=>d,Ei:()=>l,II:()=>v,Lh:()=>x,U:()=>g,UC:()=>u,Zy:()=>o,dD:()=>r,er:()=>m,hb:()=>f,in:()=>c,j7:()=>y,kX:()=>h,me:()=>_,mx:()=>b,n5:()=>a,q8:()=>p,xH:()=>s});var i=n(749886);let s=1048576,r=3,a=20,o=3,l=10,c=50,d=10,u=720,_=1080,h=1200,p=375,g=p/i.ap,m=1200,x="#FFFFFF",y={blockStyle:{x_coord:4.27,y_coord:46.82,width:91.46,height:26.35,corner_radius:0},style:{font_id:6,hex_color:"#FFFFFF",font_size:36,alignment:1},text:"",type:"story_pin_paragraph_block"},f=420,b=325,v=768},669501:(e,t,n)=>{n.d(t,{Z:()=>O});var i=n(667294),s=n(616550),r=n(883119),a=n(525364),o=n(140017),l=n(217058),c=n(623409),d=n(468653),u=n(510989),_=n(96157),h=n(340523),p=n(608516),g=n(5859),m=n(193163),x=n(454051),y=n(785893);function f({onClick:e,onDismiss:t,open:n}){let a=(0,o.ZP)(),l=(0,s.$B)(),[d,u]=(0,i.useState)(""),_=(0,c.Z)(),h=(0,i.useRef)(null),{country:p,isBot:f,isAuthenticated:b,locale:v}=(0,g.B)(),P=(0,m.bl)(),I="en"===v.slice(0,2),A={id:"ideas",text:b||"JP"!==p?a._('Explore', 'unauth.header.tabs.ideas', 'label for ideas hub'):a._('Explore ideas', 'unauth.header.tabs.ideas.jp', 'label for jp ideas hub'),href:"/ideas/"},E=[A];I&&E.push({id:"videos",text:a._('Watch', 'unauth.header.tabs.videos', 'label for the videos hub tab'),href:"/videos/"}),(f||!b&&I&&"US"===p)&&E.push({id:"shopping",text:a._('Shop', 'unauth.header.tabs.shop', 'label for the shopping hub tab'),href:"/shopping/"}),P&&E.push({id:"today",text:a._('Today', 'unauth.header.tabs.today', 'label for today tab'),href:(0,x.tG)()});let S=-1;l.url.startsWith("/today/")?S=E.findIndex(e=>e.href===(0,x.tG)()):l.url.startsWith("/ideas/")?S=E.findIndex(e=>"/ideas/"===e.href):l.url.startsWith("/videos/")?S=E.findIndex(e=>"/videos/"===e.href):l.url.startsWith("/shopping/")&&(S=E.findIndex(e=>"/shopping/"===e.href));let w=E[S]||A,T=((0,s.$B)(w.href)||{isExact:!1}).isExact,j=e=>{e===(0,x.tG)()?_({action:"click",item:"nav-bar-hub-dropdown-today"}):"/videos/"===e?_({action:"click",item:"nav-bar-hub-dropdown-videos"}):"/ideas/"===e?_({action:"click",item:"nav-bar-hub-dropdown-ideas"}):"/shopping/"===e&&_({action:"click",item:"nav-bar-hub-dropdown-shopping"})};return(0,y.jsxs)(i.Fragment,{children:[(0,y.jsx)(r.kC,{height:"100%",justifyContent:"center",width:"100%",children:(0,y.jsx)(r.xu,{"data-test-id":"hub-dropdown",marginStart:2,minWidth:110,children:(0,y.jsx)(r.zx,{ref:h,accessibilityControls:"hub-dropdown",accessibilityExpanded:n,accessibilityHaspopup:!0,accessibilityLabel:w.text,fullWidth:!0,iconEnd:"arrow-down",onClick:e,selected:n,size:"lg",text:w.text})})}),n&&(0,y.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{zIndex:1100}},"data-test-id":"unauth-header-nav-dropdown",marginTop:1,children:(0,y.jsx)(r.J2,{accessibilityLabel:w.text,anchor:h.current,color:"white",id:"hub-dropdown",idealDirection:"forceDown",onDismiss:t,role:"listbox",shouldFocus:!0,size:"lg",children:(0,y.jsx)(r.xu,{direction:"column",display:"flex",flex:"grow",margin:2,children:E.map(({text:e,href:t,id:n})=>{let i=w.href===t&&T;return(0,y.jsx)(r.xu,{color:d===n?"secondary":"transparent",direction:"column",display:"flex",onMouseEnter:()=>{u(n)},onMouseLeave:()=>{u("")},padding:2,role:"option",rounding:2,children:(0,y.jsx)(r.rU,{accessibilityLabel:e,href:t,onClick:({event:e,dangerouslyDisableOnNavigation:n})=>{if(i){e.preventDefault(),n();return}j(t)},underline:"none",children:(0,y.jsxs)(r.kC,{children:[(0,y.jsx)(r.kC,{direction:"column",flex:"grow",gap:{column:1,row:0},children:(0,y.jsx)(r.xv,{color:"default",inline:!0,lineClamp:1,weight:"bold",children:e})}),i&&(0,y.jsx)(r.xu,{alignItems:"center",color:"transparent",display:"flex",justifyContent:"center",children:(0,y.jsx)(r.JO,{accessibilityLabel:"Selected item",color:"default",icon:"check",size:12})})]})})},n)})})})})]})}var b=n(554786);function v(){let e=(0,o.ZP)(),t=(0,s.$B)(),n=(0,c.Z)(),i=(0,b.ZP)(),{country:a,isBot:l,isAuthenticated:d,locale:u}=(0,g.B)(),_=(0,m.bl)(),h="desktop"===i,p="en"===u.slice(0,2),f=[];_&&f.push({text:e._('Today', 'unauth.header.tabs.today', 'label for today tab'),href:(0,x.tG)()}),p&&f.push({text:e._('Watch', 'unauth.header.tabs.videos', 'label for the videos hub tab'),href:"/videos/"}),(l||!d&&p&&"US"===a)&&f.push({text:e._('Shop', 'unauth.header.tabs.shop', 'label for the shopping hub tab'),href:"/shopping/"}),f.push({text:d||"JP"!==a?e._('Explore', 'unauth.header.tabs.ideas', 'label for ideas hub'):e._('Explore ideas', 'unauth.header.tabs.ideas.jp', 'label for jp ideas hub'),href:"/ideas/"});let v=-1;return t.path.startsWith("/today/")?v=f.findIndex(e=>e.href===(0,x.tG)()):t.path.startsWith("/ideas/")?v=f.findIndex(e=>"/ideas/"===e.href):t.path.startsWith("/videos/")?v=f.findIndex(e=>"/videos/"===e.href):t.path.startsWith("/shopping/")&&(v=f.findIndex(e=>"/shopping/"===e.href)),(0,y.jsx)(r.mQ,{activeTabIndex:v,onChange:({activeTabIndex:e})=>{f[e].href===(0,x.tG)()?n({action:"click",item:"site-map-today"}):"/videos/"===f[e].href?n({action:"click",item:"site-map-videos"}):"/ideas/"===f[e].href?n({action:"click",item:"site-map-ideas"}):"/shopping/"===f[e].href&&n({action:"click",item:"root-nav-shopping"}),h&&(window.location.href=f[e].href)},tabs:f})}var P=n(160567),I=n(494125),A=n(517558);let E=(0,i.lazy)(()=>n.e(18627).then(n.bind(n,618627))),S=(0,i.forwardRef)(({onPrimaryButtonClick:e,onLoginButtonClick:t,primaryButtonText:n},a)=>{let[d,g]=(0,i.useState)(!1),[m,x]=(0,i.useState)(!1),[S,w]=(0,i.useState)(!1),T=(0,o.ZP)(),j=(0,s.TH)(),O=(0,b.ZP)(),C="desktop"===O,R="tablet"===O,k=(0,i.useRef)(null),M=(0,i.useRef)(null),N=(0,i.useRef)(null),{checkExperiment:z}=(0,h.F)(),D=(0,c.Z)(),L=C&&(0,_.C$)(j),Z=C&&!(0,_.C$)(j),[B,U]=(0,_.C$)(j)&&["red","gray"]||(0,_.uM)(j)&&["transparent","gray"]||["gray","red"],F=(0,_.nU)(j)&&z("web_sso_auth_enabled").anyEnabled;return(0,I.Z)(()=>{let e=window?.innerWidth;w(!(0,_.C$)(j)&&!R&&e>=1024)}),(0,i.useEffect)(()=>{if(Z){let e=e=>{let{target:t}=e;t instanceof Node&&!N.current?.contains(t)&&!M.current?.contains(t)&&g(!1)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}},[Z]),(0,y.jsxs)(r.xu,{ref:a,alignItems:"center",color:"default",direction:"row",display:"flex",height:P.Pw,justifyContent:"between",padding:4,width:"100%",children:[(0,y.jsxs)(r.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,y.jsx)(r.iP,{onTap:()=>{D({action:"click",item:"pinterest-logo",within:"unauth-header"})},children:(0,y.jsx)(r.xu,{"data-test-id":"unauth-header-logo",children:(0,y.jsx)(r.rU,{display:"inlineBlock",href:"/",onClick:({dangerouslyDisableOnNavigation:e})=>e(),rounding:"pill",tapStyle:"compress",target:"self",underline:"none",children:(0,y.jsxs)(r.xu,{alignItems:"center",direction:"row",display:"flex",paddingX:3,children:[(0,y.jsx)(r.JO,{accessibilityLabel:T._('Pinterest', 'Pinterest logo', 'Pinterest logo'),color:"brandPrimary",icon:"pinterest",size:L?32:24}),C&&(0,y.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{letterSpacing:"-1px"}},marginStart:1,onClick:()=>{D({action:"click",item:"pinterest-logo"})},children:(0,y.jsx)(r.X6,{accessibilityLevel:L?1:2,color:F?"default":"error",overflow:"normal",size:"400",children:F?T._('Business', 'unauthHeader.logoText.business', 'Business text for the sso signup page header'):T._('Pinterest', 'Company name', 'Company name')})})]})})})}),!F&&(S?(0,y.jsx)(f,{onClick:()=>{x(!m),(0,l.NC)("click_hub_dropdown_nav"),D({action:"click",item:"nav-bar-hub-dropdown"})},onDismiss:()=>x(!1),open:m}):(0,y.jsx)(v,{}))]}),S&&!F&&(0,y.jsx)(r.xu,{"data-test-id":"search-box-container",display:"none",flex:"grow",mdDisplay:"block",paddingX:2,children:(0,y.jsx)(A.Z,{widthType:"auto"})}),F?null:(0,y.jsxs)(r.kC,{alignItems:"center",direction:"row",flex:"none",justifyContent:"start",children:[(0,_.C$)(j)&&(0,y.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginEnd:6,children:[(0,y.jsx)(r.xu,{"data-test-id":"header-about-button",margin:4,children:(0,y.jsx)(r.xv,{weight:"bold",children:(0,y.jsx)(r.rU,{href:"/_/_/about/",onClick:()=>{D({action:"click",item:"header-about-button"})},target:"blank",children:T._('About', 'Link to page describing what Pinterest is.', 'Link to page describing what Pinterest is.')})})}),(0,y.jsx)(r.xu,{"data-test-id":"header-business-button",margin:4,children:(0,y.jsx)(r.xv,{weight:"bold",children:(0,y.jsx)(r.rU,{href:"/_/_/business/",onClick:()=>{D({action:"click",item:"header-business-button"})},target:"blank",children:T._('Business', 'unauth.homepage.link', 'Link to the Pinterest business site.')})})}),(0,y.jsx)(r.xu,{"data-test-id":"header-blog-button",margin:4,children:(0,y.jsx)(r.xv,{weight:"bold",children:(0,y.jsx)(r.rU,{href:"/_/_/blog/",onClick:()=>{(0,l.My)("unauth.homepage_redesign.blog_button_click"),D({action:"click",item:"header-blog-button"})},target:"blank",children:T._('Blog', 'Link to the Pinterest business site.', 'Link to the Pinterest business site.')})})})]}),(0,y.jsx)(r.xu,{"data-test-id":L?"simple-login-button":"login-button",marginEnd:2,children:(0,y.jsx)(r.zx,{ref:k,color:C&&z("pcons_login_primary_dweb").anyEnabled?C&&(0,_.uM)(j)&&z("pcons_login_primary_dweb").group.includes("pin_page_secondary")?"gray":"red":B,onClick:({event:e})=>t(e),size:L?"md":"lg",text:T._('Log in', 'Label for log in button', 'Label for log in button')})}),(!C||!z("pcons_login_primary_dweb").anyEnabled)&&(0,y.jsx)(r.xu,{"data-test-id":L?"simple-signup-button":"signup-button",children:(0,y.jsx)(r.zx,{color:z("lex_follow_button").group.includes("main_cta")?"gray":U,onClick:t=>{e(t.event)},size:L?"md":"lg",text:n})}),Z&&(0,y.jsxs)(i.Fragment,{children:[(0,y.jsx)(r.xu,{ref:M,children:(0,y.jsx)(r.xu,{"data-test-id":"setting-button",display:"flex",justifyContent:"center",marginBottom:3,marginStart:2,marginTop:3,children:(0,y.jsx)(r.hU,{accessibilityLabel:T._('Setting', 'unauthHeaderBar.seetingsButton', 'Text for the setting button in the header'),icon:"arrow-down",iconColor:"gray",onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),(0,l.NC)("click_header_setting"),D({action:"click",item:"setting-button"}),g(!d)},size:"xs"})})}),d&&(0,y.jsx)(u.Z,{name:"SafeSuspense_UnauthHeader_UnauthSettingFlyout",children:(0,y.jsx)(p.Z,{fallback:(0,y.jsx)(r.xu,{}),children:(0,y.jsx)(r.xu,{ref:N,children:(0,y.jsx)(E,{anchor:M.current})})})})]},"settingButton")]})]})});S.displayName="UnauthHeader";var w=n(90647),T=n(773616),j=n(333965);function O({showDesktopSignupModal:e}){let t=(0,o.ZP)(),n=(0,s.k6)(),u=(0,s.TH)(),_=(0,T.Z)(),h=(0,c.Z)(),{viewType:p,viewParameter:g}=(0,a.SU)(),{trackConversionUpsell:m}=(0,d.Z)(),x=()=>{(0,l.NC)("mweb_press_header_login"),h({action:"click",within:"unauth-header",item:"login-button"}),e?e("login"):(m({viewType:p,viewParameter:g,element:30,eventType:14688,component:14213,upsellReason:"click_login_on_header"}),n.push({pathname:"/login",state:{attributionLabel:"click_login_on_header",...u.state}}))};return(0,y.jsxs)(i.Fragment,{children:[(0,y.jsx)(r.xu,{"data-test-id":"unauth-header",position:"fixed",top:!0,width:"100%",zIndex:j.Z,children:_?(0,y.jsx)(w.Z,{app_upsell_type:"unauth-header",componentType:14161,children:({handleOpenApp:e})=>(0,y.jsx)(S,{onLoginButtonClick:x,onPrimaryButtonClick:()=>e({deepLinkUri:"/"===u.pathname?u.pathname:u.pathname.substr(1)}),primaryButtonText:t._('Download app', 'mweb.unauth_header.download_app', 'CTA on the app interstitial upsell to install the app')})}):(0,y.jsx)(S,{onLoginButtonClick:x,onPrimaryButtonClick:()=>{(0,l.NC)("mweb_press_header_signup"),h({action:"click",within:"unauth-header",item:"signup-button"}),e?e("signup"):(m({viewType:p,viewParameter:g,element:31,eventType:14688,component:14215,upsellReason:"click_signup_on_header"}),n.push({pathname:"/signup",state:{attributionLabel:"click_signup_on_header",...u.state}}))},primaryButtonText:t._('Sign up', 'Text on button on the top bar that leads users to signing up.', 'Text on button on the top bar that leads users to signing up.')})}),(0,y.jsx)(r.xu,{height:P.Pw})]})}},333965:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119);let s=new i.Ry(9999),r=s},866265:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(616550),s=n(43604),r=n(5859),a=n(624797),o=n(810052);let l=()=>{let e=(0,i.TH)(),t=(0,o.a)(),{locale:n,userAgent:{platform:l,raw:c}}=(0,r.B)();if(!t)return!1;let{appInstallBannerIsEnabled:d,pinPageGlobalContext:u}=t,_=!!(0,a.mB)(e.search).invite_code;return d&&!(0,s.$K)(c)&&!(n.includes("ar")&&"ios"!==l)&&!(u?.isStoryPin===!0&&_)}},721055:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(702664),s=n(616550),r=n(43604),a=n(96157),o=n(5859),l=n(573810),c=n(554786),d=n(773616),u=n(669177),_=n(166630),h=n(953565);let p=e=>!!(0,r.dh)(e)&&((0,l.qn)("ufausfiiab")||((0,h.nP)("unauth.floating_app_upsell.suppress_for_instagram_in_app_browser"),(0,l.Nh)("ufausfiiab","1")),!0),g=()=>{let{isBot:e}=(0,o.B)(),t=(0,s.TH)(),{userAgentPlatform:n,userAgent:r}=(0,i.useSelector)(e=>e.session),l=(0,d.Z)(),h=(0,c.ml)();return!(h&&!l)&&!(0,u.Rp)({isBot:e,platform:n,userAgent:r})&&((0,a.uM)(t)||(0,a.am)(t))&&!(0,_.P)()&&!p(r)}},454051:(e,t,n)=>{function i(e,t){return t?`${e}?${new URLSearchParams(t).toString()}`:e}function s(e){return i("/admin/",e)}function r(e){return i("/admin/oauth/logout/",e)}function a(e){return i("/today/",e)}n.d(t,{HF:()=>s,Kn:()=>r,tG:()=>a})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/81219-6efba6f4843d1a5b.mjs.map