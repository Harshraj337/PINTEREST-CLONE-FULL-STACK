"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[84016],{346035:(e,t,o)=>{var l,i;o.r(t),o.d(t,{default:()=>s});let n=(i=[l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doneByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},l,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});n.hash="6e4bec581cece19361386d6124ddde90";let s=n},161881:(e,t,o)=>{o.d(t,{Z:()=>u});var l=o(702664),i=o(216167),n=o(415199),s=o(413110),a=o(930822),r=o(64819),c=o(232518),d=o(937310);let _={[s.o.aggregatedComment]:"AggregatedCommentReplyResource",[s.o.pin]:"AggregatedCommentResource",[s.o.didIt]:"DidItCommentsResource"};function u(){let e=(0,l.useDispatch)(),{aggregatedCommentCreated:t,updateCommentCount:o}=(0,n.nf)();return async({force:l=!0,fromUnifiedComment:n,objectId:s,objectType:u,orbacSubjectId:m,pinId:h,replyToCommentId:p,tags:g,text:f})=>{let y=_[u],P={force:l,objectId:s,pinId:h,tags:g,text:f,replyToCommentId:p,...m?{orbacSubjectId:m}:{}},x=d.Z.AGGREGATED_COMMENTS;n&&(x="pin"===u?d.Z.UNIFIED_COMMENTS:d.Z.AGGREGATED_COMMENT_REPLIES);let b=await i.Z.create(y,P).callCreate({showError:!1}),A=b.resource_response.data;return t(s,A),e((0,r.vX)({feedType:x,feedId:s,itemIds:[A.id],itemType:A.type,prepend:!0})),"aggregatedComment"===u?o(s,1):"pin"!==u&&e((0,a.L8)(s,1)),h&&e((0,c.R)(h,1)),A.id||b}}},144138:(e,t,o)=>{o.d(t,{Z:()=>_});var l=o(702664),i=o(216167),n=o(903591),s=o(415199),a=o(930822),r=o(64819),c=o(232518),d=o(937310);function _(){let e=(0,l.useDispatch)(),{aggregatedCommentDeleted:t,updateCommentCount:o}=(0,s.nf)();return async({aggregatedCommentId:l,aggregatedPinId:s,feedType:_,orbacSubjectId:u,parentId:m,type:h,updateParentCommentCount:p,pinId:g})=>{await i.Z.create("AggregatedCommentResource",{commentId:l,...u?{orbacSubjectId:u}:{}}).callDelete({showError:!1}),m&&(e((0,r.EX)({feedId:s||m,feedType:_||d.Z.AGGREGATED_COMMENTS,itemIds:[l],itemType:"aggregatedcomment"})),t(m,l),p&&(h||0===h)&&(h===n.Rv.TOP&&g?e((0,c.R)(g,-1)):h===n.Rv.REPLY_TO_AGGREGATED?o(m,-1):e((0,a.L8)(m,-1))))}}},772667:(e,t,o)=>{o.d(t,{Z:()=>s});var l=o(883119),i=o(785893);let n=/#[\p{L}\p{N}_]\S*/gu;function s({isHashtagInDescriptionDisplayEnabled:e,text:t}){return t.split(new RegExp(/(#\S*)/)).map((t,o)=>{let s=`${o}-${t}`;return(e?t.match(n):t.includes("#"))?(0,i.jsx)(l.xv,{color:"link",inline:!0,size:"300",children:(0,i.jsx)(l.rU,{display:"inline",href:`/search/pins/?q=${encodeURIComponent(t.replace("#",""))}`,underline:"none",children:t})},s):(0,i.jsx)("span",{children:t},s)})}},650384:(e,t,o)=>{o.d(t,{Z:()=>m});var l=o(667294),i=o(883119),n=o(772667),s=o(214877),a=o(340523),r=o(785893);let c=e=>e.replace(/\s+/g," "),d=e=>null!=e&&e>-1,_=(e,t)=>{let o=t.substr(0,e);return(e??0)-(o.length-c(o).length)},u=({color:e,mention:t,tagObjectId:o,tagType:l,textSize:n})=>{let{logContextEvent:a}=(0,s.v)();return(0,r.jsx)(i.rU,{display:"inlineBlock",href:`/${t.substr(1)}`,onClick:({event:e})=>{e.stopPropagation(),a({event_type:101,element:11915,aux_data:{tag_id:o,tag_type:l}})},underline:"none",children:(0,r.jsx)(i.xv,{color:e,inline:!0,overflow:"normal",size:n,weight:"bold",children:t})},o)},m=({description:e,mentionLinkColor:t,shouldAdjustOffset:o,shouldMakeHashtagLinksFromText:s,textSize:c,userMentionTags:m})=>{let{checkExperiment:h}=(0,a.F)(),p=h("web_hashtags_in_description_display").anyEnabled;if(0===m.length)return(0,r.jsx)(l.Fragment,{children:e});let g=0,f=[],y=[...m].map(t=>o?{...t,offset:_(t.offset??0,e)}:t).sort((e,t)=>(e.offset??0)-(t.offset??0)).filter(e=>d(e.offset)&&d(e.length));return y.forEach(o=>{let l=o.offset??0,i=o.length??0,n=e.substr(g,l-g),s=e.substr(l,i);f.push(n),f.push((0,r.jsx)(u,{color:t,mention:s,tagObjectId:o.objectId,tagType:o.tagType,textSize:c})),g=l+i}),f.push(e.substr(g)),(s?f.flatMap(e=>"string"!=typeof e?e:(0,n.Z)({isHashtagInDescriptionDisplayEnabled:p,text:e})):f).reduce((e,t)=>(0,r.jsxs)(i.xv,{inline:!0,size:c,children:[e,t]}),null)}},439917:(e,t,o)=>{o.d(t,{N:()=>c,d:()=>r});var l=o(667294),i=o(797781),n=o(342513),s=o(785893);let{Provider:a,useHook:r}=(0,n.Z)("Flag"),c=({children:e})=>{let[t,o]=(0,l.useState)(),[n,r]=(0,l.useState)(i.Zw.REPORT),[c,d]=(0,l.useState)(i.qb.STARTED),[_,u]=(0,l.useState)(),[m,h]=(0,l.useState)(),p=(0,l.useMemo)(()=>({flagReason:m,flow:n,status:c,selectedReason:_,modalTitle:t,setFlagReason:h,setFlow:r,setModalTitle:o,setStatus:d,setSelectedReason:u}),[t,n,c,_,m]);return(0,s.jsx)(a,{value:p,children:e})}},742103:(e,t,o)=>{o.d(t,{Z:()=>R});var l=o(667294),i=o(702664),n=o(883119),s=o(216167);async function a({userId:e,blockSource:t,blockContext:o,logContextEvent:l}){let i=s.Z.create("UserBlockResource",{blocked_user_id:e,block_source:t,block_context:o});await i.callCreate(),l({event_type:54,object_id_str:e})}var r=o(439917),c=o(797781),d=o(717203),_=o(140017),u=o(339001),m=o(702497),h=o(785893);let p=m.K_Y+"?source=block_dialogue";function g(e){return e.map(({full_name:e})=>e)}let f=function({users:e,onClose:t,onSubmit:o}){let l=(0,_.ZP)(),i=(0,h.jsx)("strong",{children:(0,d.Z)(g(e),l)},"userlist");return(0,h.jsxs)("form",{method:"post",children:[(0,h.jsxs)(n.xu,{padding:8,children:[(0,h.jsx)(n.xv,{children:(0,u.nk)(l._('If you block {{ users }}, you won\u2019t be able to follow  each other or interact with each other\u2019s Pins.', 'description of blocking users', 'description of blocking users'),{users:i})}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)(n.xv,{children:(0,h.jsx)(n.rU,{display:"inlineBlock",href:p,underline:"hover",children:l._('Learn more', 'link to learn more about blocking', 'link to learn more about blocking')})})]}),(0,h.jsx)(n.xu,{padding:2,children:(0,h.jsxs)(n.kC,{alignItems:"stretch",gap:{row:1,column:0},justifyContent:"end",children:[(0,h.jsx)(n.zx,{fullWidth:!0,onClick:t,text:l._('Cancel', 'UserBlock.Cancel', 'cancel form')}),(0,h.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:()=>{o()},text:l._('Block', 'UserBlock.Submit', 'submit form to block users'),type:"submit"})]})})]})};var y=o(587703),P=o(149722);let x=({deleteAndCloseConversation:e,flagReason:t,flagType:o,onClose:i,selectedReason:s,status:p,users:x,blockContext:b})=>{let A=(0,_.ZP)(),T=(0,y.Z)(),[v,w]=(0,l.useState)({}),{setModalTitle:E,setStatus:I}=(0,r.d)(),k=(0,P.Z)(),{id:C}=k.isAuth?k:{},z=x.filter(({id:e})=>v[e]),j=z.length>0,R=()=>{let e;[c.qb.SUBMITTED,c.qb.PROCESSING].includes(p)?e=A.ngettext('Block this person?', 'Block these people?', z.length, 'BlockAndUnfollow', 'Confirmation text when blocking users (plural)'):o===c.Vm.CONVERSATION&&(e=p===c.qb.COMPLETED?(0,u.nk)(A._('You\u2019ve blocked {{usernames}}', 'BlockAndUnfollow', 'title of modal after user has been blocked'),{usernames:(0,d.Z)(g(z),A).join("")}).join(""):A._('Thanks for your report', 'BlockAndUnfollow', 'title at end of report flow')),E(e)};(0,l.useEffect)(()=>{R()},[p]),(0,l.useEffect)(()=>{I(j?c.qb.SELECTED:c.qb.STARTED)},[v]);let S=x.filter(({id:e})=>e!==C),D=[c.qb.STARTED,c.qb.COMPLETED].includes(p);return(0,h.jsx)("form",{method:"post",children:[c.qb.SUBMITTED,c.qb.PROCESSING].includes(p)?(0,h.jsx)(f,{onClose:()=>{I(c.qb.SELECTED)},onSubmit:()=>(I(c.qb.PROCESSING),Promise.all(Object.keys(v).filter(e=>v[e]).map(e=>a({userId:e,blockSource:"message_report",blockContext:b,logContextEvent:T}))).finally(()=>{I(c.qb.COMPLETED)})),users:z}):(0,h.jsxs)(n.xu,{padding:8,children:[(0,h.jsx)(n.xu,{children:p!==c.qb.COMPLETED?(()=>{let e;"harassingOther"===s?e=(0,u.nk)(A._('We remove content that identifies and attacks private people because we consider it to be bullying. We also don\u2019t allow content that reveal someone\u2019s personally identifiable information.  Learn more about our  {{ communityGuidelines }}.', 'confirmation message after reporting harassment', 'confirmation message after reporting harassment'),{communityGuidelines:(0,h.jsx)(n.rU,{display:"inlineBlock",href:m.MsG,underline:"hover",children:A._('Community Guidelines', 'link to community guidelines for harassment', 'link to community guidelines for harassment')},"policyLink")}):"harassingPublicFigure"===s?e=A._('Please note that we won\u2019t necessarily take down stuff that attacks public figures.', 'message shown after reporting harrassment', 'message shown after reporting harrassment'):"harassingFriend"===s?e=A._('Before we can review this Pin, we need to hear from the person who\u2019s being harassed. Please have your friend report this Pin to us.', 'message shown after reporting harrassment', 'message shown after reporting harrassment'):["spam","policies","hurtfulContent"].includes(t)&&(e=A._('We\u2019ll take a look at this Pin and delete it if it goes against our policies.', 'confirmation message after reporting a pin', 'confirmation message after reporting a pin'));let o=A.ngettext('You can also block this person.', 'You can also block these people.', S.length, 'description to block people', 'description to block people');return(0,h.jsxs)(l.Fragment,{children:[e&&(0,h.jsx)(n.xu,{marginBottom:8,children:(0,h.jsx)(n.xv,{children:e})}),(0,h.jsx)(n.xu,{marginBottom:8,children:(0,h.jsx)(n.xv,{children:o})}),(0,h.jsx)(n.xu,{marginBottom:8,children:S.map(({id:e,full_name:t})=>(0,h.jsx)(n.XZ,{checked:!!v[e],helperText:A._('You won\u2019t be able to send each other messages or interact with each other\u2019s Pins.', 'BlockAndUnfollow', 'explanation of blocking a user'),id:"blockPinner"+e,label:(0,u.nk)(A._('Block {{ pinnerName }}', 'BlockAndUnfollow', 'form option to block a pinner'),{pinnerName:t}).join(""),onChange:({checked:t})=>{w({...v,[e]:t})}},e))})]})})():j&&(0,h.jsx)(n.xu,{marginBottom:8,children:(0,h.jsx)(n.xv,{children:A._('You won\u2019t be able to follow each other or interact with each other\u2019s pins.', 'BlockAndUnfollow', 'message describing what blocking means')},"blockingConfirmation")})}),(0,h.jsxs)(n.xu,{children:[p!==c.qb.COMPLETED&&(0,h.jsx)(n.xu,{marginBottom:8,children:(0,h.jsx)(n.xv,{size:"100",children:(0,u.nk)(A._('Learn more about {{ linkToTopic }}', 'BlockAndUnfollow', 'footer link to learn more about a topic'),{linkToTopic:(0,h.jsx)(n.rU,{display:"inlineBlock",href:m.K_Y,underline:"hover",children:A._('blocking', 'BlockAndUnfollow', 'footer link to learn more about blocking')},"policyLink")})})}),(0,h.jsx)(n.xu,{children:(0,h.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:D?()=>{i(),p===c.qb.COMPLETED&&e?.()}:()=>{w(v),I(c.qb.SUBMITTED)},text:D?A._('Done', 'Block.Complete', 'confirm reporting flow is done & close modal'):A._('Block', 'BlockAndUnfollow', 'submit users to block')})})]})]})})};function b({flagOptions:e,flow:t,handleClose:o,handleNext:l,selectedReason:i,showPrimaryAction:s,submitButton:a}){let r=(0,_.ZP)();if(t===c.Zw.REPORT){if(c.qb.PROCESSING===status||e.getFlagOption(i)?.isTerminalReason)return a;if(s)return(0,h.jsx)(n.zx,{color:"red",disabled:void 0===i,fullWidth:!0,onClick:l,text:r._('Next', 'go to the next view in the report flow', 'go to the next view in the report flow')})}else if(t===c.Zw.END)return(0,h.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:o,text:r._('Got it', 'confirm reporting flow is done & close modal', 'confirm reporting flow is done & close modal')});return null}function A({flow:e,flagReason:t}){let o=(0,_.ZP)();if(e===c.Zw.REPORT){if("attacks"===t)return(0,h.jsx)(n.xv,{size:"100",children:(0,u.nk)(o._('Learn more about our {{ linkToTopic }}', 'footer link to learn more about community guidelines', 'footer link to learn more about community guidelines'),{linkToTopic:(0,h.jsx)(n.rU,{href:m.MsG,target:"blank",children:(0,h.jsx)(n.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:o._('Community Guidelines', 'name of footer link to community guidelines', 'name of footer link to community guidelines')})},"policyLink")})});if("policies"===t)return(0,h.jsxs)("p",{children:[(0,h.jsx)(n.xv,{size:"100",children:(0,u.nk)(o._('Learn about {{ linkToTopic }}', 'footer link to learn more about a topic', 'footer link to learn more about a topic'),{linkToTopic:(0,h.jsx)(n.rU,{href:m.MsG+"#sub-section-adult-content",target:"blank",children:(0,h.jsx)(n.xv,{color:"error",inline:!0,size:"100",children:o._('our nudity policies', 'name of footer link to policy', 'name of footer link to policy')})},"policyLink")})}),(0,h.jsx)(n.xv,{size:"100",children:(0,u.nk)(o._('Learn about {{ linkToTopic }}', 'footer link to learn more about a topic', 'footer link to learn more about a topic'),{linkToTopic:(0,h.jsx)(n.rU,{href:m.MsG+"#sub-section-dangerous-goods-and-activities",target:"blank",children:(0,h.jsx)(n.xv,{color:"error",inline:!0,size:"100",children:o._('our policies on hurtful content', 'name of footer link to policy', 'name of footer link to policy')})},"policyLink")})}),(0,h.jsx)(n.xv,{size:"100",children:(0,u.nk)(o._('Learn about {{ linkToTopic }}', 'footer link to learn more about a topic', 'footer link to learn more about a topic'),{linkToTopic:(0,h.jsx)(n.rU,{href:m.MsG+"#sub-section-violence",target:"blank",children:(0,h.jsx)(n.xv,{color:"error",inline:!0,size:"100",children:o._('our policies on gore', 'name of footer link to policy', 'name of footer link to policy')})},"policyLink")})})]});if("spam"===t||void 0===t)return(0,h.jsx)(n.xv,{size:"100",children:(0,u.nk)(o._('Learn about {{ linkToTopic }}', 'footer link to learn more about a topic', 'footer link to learn more about a topic'),{linkToTopic:(0,h.jsx)(n.rU,{href:m.MsG,target:"blank",children:(0,h.jsx)(n.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:"spam"===t?o._('our spam policies', 'name of footer link to policy', 'name of footer link to policy'):o._('our policies', 'name of footer link to policy', 'name of footer link to policy')})},"policyLink")})})}return null}function T({arrayOfData:e,handleSelectReason:t,selectedReason:o}){let l=(0,_.ZP)();return(0,h.jsx)(n.xu,{padding:2,children:(0,h.jsx)(n.FX,{id:"flag-option-radio-group",legend:l._('Flag legends', 'flag_legend', 'Flag legends'),legendDisplay:"hidden",children:e.map((e,l)=>{let{condition:i}=e;return void 0===i||i?function(e,t,o,l){let{text:i,value:s,category:a}=e;return(0,h.jsx)(n.xu,{paddingY:2,children:(0,h.jsx)(n.FX.RadioButton,{checked:o===s,id:s,label:i,name:"flagReason",onChange:({checked:e})=>t(e,s,a),value:s})},l)}(e,t,o,l):null})})})}class v{constructor(e){this.config=e,this.configMap=function(e){let t={};for(let o in e){let l=e[o];l.forEach(e=>{let{value:l}=e;if(Object.prototype.hasOwnProperty.call(t,l))throw Error("Duplicate key in FlagOptions config: "+l);t[l]={...e,parentOption:o}})}return t}(e)}getFlagOption(e){return e?this.configMap[e]:null}renderFlagLabels(e){let{flagReason:t,onSelectReason:o,selectedReason:l}=e;return(0,h.jsx)(T,{arrayOfData:this.config[t],handleSelectReason:o,selectedReason:l})}}var w=o(930837);function E(e,t,o){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:String(l))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class I extends l.Component{constructor(...e){super(...e),E(this,"flagOptions",new v(this.props.flagOptionsConfig)),E(this,"renderContent",()=>{let{content:e,flow:t,onSelectReason:o,selectedReason:l}=this.props;return e||(t===c.Zw.REPORT?this.flagOptions.renderFlagLabels({flagReason:this.props.flagReason||"__default",onSelectReason:o,selectedReason:l}):t===c.Zw.END?(0,h.jsx)(n.xv,{children:this.props.i18n._('We\u2019ll use your feedback to make your Pinterest experience better.', 'final message in reporting flow', 'final message in reporting flow')}):void 0)})}componentDidUpdate(e){let{flow:t,onCompletedReport:o,onCompletedBlock:l}=e;if(this.props.flow!==t)switch(t){case c.Zw.REPORT:o&&o();break;case c.Zw.BLOCK:l&&l()}}render(){let{accessibilityModalLabel:e,deleteAndCloseConversation:t,flagType:o,flow:l,status:i,modalTitle:s,onClose:a,selectedReason:r,submitButton:d,flagReason:_,showPrimaryAction:u,users:m,blockContext:p}=this.props;return(0,h.jsx)(w.ZP,{accessibilityModalLabel:e,footer:l!==c.Zw.BLOCK?(0,h.jsxs)(n.kC,{alignItems:"center",justifyContent:"start",children:[(0,h.jsx)(n.xu,{flex:"grow",children:(0,h.jsx)(A,{flagReason:_,flow:l})}),(0,h.jsx)(n.xu,{padding:1,children:l===c.Zw.REPORT?(0,h.jsx)(n.zx,{fullWidth:!0,onClick:void 0===_?this.props.onClose:()=>{this.props.onRevert?.()},text:void 0===_?this.props.i18n._('Cancel', 'cancel form', 'cancel form'):this.props.i18n._('Back', 'previous step in a form', 'previous step in a form')}):null}),(0,h.jsx)(n.xu,{padding:1,children:(0,h.jsx)(b,{flagOptions:this.flagOptions,flow:l,handleClose:this.props.onClose,handleNext:()=>{this.props.onNext?.()},selectedReason:r,showPrimaryAction:!!u,submitButton:d})})]}):void 0,heading:s,onDismiss:a,size:"md",children:(0,h.jsx)(n.xu,{children:l===c.Zw.BLOCK?(0,h.jsx)(x,{blockContext:p,deleteAndCloseConversation:t,flagReason:_,flagType:o,onClose:a,selectedReason:r,status:i,users:m}):this.renderContent()})})}}function k(e){let t=(0,_.ZP)();return(0,h.jsx)(I,{...e,i18n:t})}var C=o(88682),z=o(930822);let j="policies";function R({aggregatedPinDataId:e,didItDataId:t,onClose:o,pinId:s,username:a,users:d}){let u=(0,_.ZP)(),[p,g]=(0,l.useState)([]),[f,y]=(0,l.useState)(),[P,x]=(0,l.useState)(),b=(0,i.useDispatch)(),A=(e,t,o,l,i)=>b((0,z.Th)(e,t,o,l,i)),{flow:T,modalTitle:v,selectedReason:w,setFlow:E,setModalTitle:I,setSelectedReason:R,setStatus:S,status:D}=(0,r.d)(),L=()=>{if(T===c.Zw.REPORT)switch(P){case"attacks":return u._('What\'s going on?', 'title for report content flow', 'title for report content flow');case j:return u._('What\'s wrong with this Try?', 'title for report content flow', 'title for report content flow');case"IP":return u._('Intellectual Property', 'title for report content flow for IP complaints', 'title for report content flow for IP complaints');default:return u._('What\'s wrong with this Try?', 'title for the report content flow', 'title for the report content flow')}else if(T===c.Zw.END&&p.includes("notUseful"))return u._('Thanks for letting us know!', 'title at end of report flow when content is not useful', 'title at end of report flow when content is not useful');return""};(0,l.useEffect)(()=>{I(L())},[p,T,P]);let O=(0,h.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:()=>{if(S(c.qb.PROCESSING),"ignoreThisPin"===w)E(c.Zw.BLOCK),S(c.qb.STARTED);else{let o=[...p,w];g(o),A(e,o,t,f,a),p.includes("notUseful")?E(c.Zw.END):E(c.Zw.BLOCK),S(c.qb.STARTED)}},text:u._('Report content', 'button to report content', 'button to report content')});return(0,h.jsx)(k,{accessibilityModalLabel:u._('Report conversation', 'Pin.DidIt.Report', 'Accessibility label for report pin did it'),blockContext:e??"",content:"IP"===P?(0,h.jsx)(n.xu,{justifyContent:"center",mdDisplay:"flex",children:(0,h.jsxs)(n.xu,{mdColumn:9,children:[(0,h.jsx)(n.xu,{marginStart:2,padding:2,children:(0,h.jsx)(n.xv,{align:"center",color:"default",weight:"bold",children:u._('If you\u2019ve found content that you believe violates your intellectual property, you can fill out our copyright complaint form.', 'explanation of IP complaint process', 'explanation of IP complaint process')})}),(0,h.jsx)(n.xu,{padding:2,children:(0,h.jsx)(n.ZP,{color:"red",href:(0,C.Z)(m.GEi,{pin_id:s,user_did_it_id:t}),target:"blank",text:u._('File a report', 'link to DMCA form', 'link to DMCA form')})})]})}):null,flagOptionsConfig:{__default:[{text:u._('It isn\'t useful or relevant', 'tried-it reporting flow', 'tried-it reporting flow'),value:"ignoreThisPin",isTerminalReason:!0,category:"ignoreThisPin"},{text:u._('It shouldn\'t be on Pinterest', 'tried-it reporting flow', 'tried-it reporting flow'),value:j,isTerminalReason:!1},{text:u._('It\'s spam', 'tried-it reporting flow', 'tried-it reporting flow'),value:"spam",isTerminalReason:!0,category:"spam"},{text:u._('It\'s my intellectual property', 'tried-it reporting flow', 'tried-it reporting flow'),isTerminalReason:!1,value:"IP"}],ignoreThisPin:[],policies:[{text:u._('It\'s sexually explicit', 'tried-it reporting flow', 'tried-it reporting flow'),value:"nudity",isTerminalReason:!0,category:"nudity"},{text:u._('It\'s self-harm', 'an option on tried-it reporting flow', 'an option on tried-it reporting flow'),value:"self-harm",isTerminalReason:!0,category:"self-harm"},{text:u._('It\'s hate speech', 'tried-it reporting flow', 'tried-it reporting flow'),value:"hate-speech",isTerminalReason:!0,category:"hate-speech"},{text:u._('It\'s harassment or bullying', 'tried-it reporting flow', 'tried-it reporting flow'),value:"attacks",isTerminalReason:!1,category:"attacks"},{text:u._('It\'s graphic violence', 'tried-it reporting flow', 'tried-it reporting flow'),value:"gore",isTerminalReason:!0,category:"graphic-violence"}],attacks:[{text:u._('It\'s a photo of me or my child', 'tried-it reporting flow', 'tried-it reporting flow'),value:"harassingMeOrMyChild",isTerminalReason:!0,category:"attacks"},{text:u._('It identifies and attacks me or someone I know', 'tried-it reporting flow', 'tried-it reporting flow'),value:"harassingMeOrAFriend",isTerminalReason:!0,category:"attacks"},{text:u._('Something else', 'tried-it reporting flow', 'tried-it reporting flow'),value:"harassingOther",isTerminalReason:!0,category:"attacks"}],IP:[],spam:[]},flagReason:P,flagType:c.Vm.DID_IT,flow:T,modalTitle:v,onClose:o(!0),onNext:()=>{x(w),g([...p,w]),R()},onRevert:()=>{let e=p[p.length-1],t=p.slice(0,-1);R(e),x(t[t.length-1]),g(t),y(),S(void 0===e?c.qb.STARTED:c.qb.SELECTED)},onSelectReason:(e,t,o)=>{e&&(R(t),S(c.qb.SELECTED),y(o))},selectedReason:w,showPrimaryAction:"IP"!==P,status:D,submitButton:O,users:d})}},797781:(e,t,o)=>{o.d(t,{Vm:()=>n,Zw:()=>l,qb:()=>i});let l={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},i={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},n={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},263032:(e,t,o)=>{o.d(t,{YS:()=>s,eF:()=>a,m_:()=>n});var l=o(934378),i=o(953565);function n(e,t,o,i,n){let s=new URLSearchParams,a=e??"0",r=t.reduce((e,t)=>{if(null!=t){let o=function(e){let t;try{t=decodeURIComponent(e)}catch(o){t=e}t.startsWith("http")?t.startsWith("http://")&&(t=t.replace("http://","https://")):t="https://"+t;try{return new URL(t).origin}catch(l){let o=t.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(o&&o.length>1)return o[1];return e}}(t);return e.add(o)}return e},new Set);return s.append(l.NR.SOURCE_EVENT_ID,a),s.append(l.NR.DESTINATION,JSON.stringify([...r])),s.append(l.NR.EXPIRY,o?l.uV:l.ug),s.append(l.NR.PRIORITY,o?l.NR.CLICK_PRIORITY:l.NR.VIEW_PRIORITY),n&&s.append(l.NR.ADVERTISER_ID,n),i&&s.append(l.NR.CAMPAIGN_ID,i),s.append(l.NR.SOURCE_EVENT_TYPE,o?l.bC:l.Cu),"/attribution_source/?"+s.toString()}async function s(e,t,o,l,s,a,r,c,d){let{appType:_,osType:u}=a||{};if(["Pin","pinImpressions"].includes(e)&&t&&(l||c||d)){(0,i.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:_,osType:u}});try{if(!window.document.featurePolicy?.allowsFeature("attribution-reporting")){(0,i.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:_,osType:u}});return}let e=n(o,[l,c,d],!1,s,r),t=await window.fetch(e,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}});if(!t.ok)throw Error("server request failed.");(0,i.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:_,osType:u}})}catch(e){(0,i.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:e.name,appType:_,osType:u}})}}else(0,i.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:_,osType:u}})}function a(e){if(e){let t=e.toLowerCase();if(t.includes("windows"))return"windows xp"===t?1:"windows vista"===t?2:"windows 7"===t?3:"windows 8"===t?4:12;if(t.includes("mac os"))return 5;if(t.includes("android"))return 7;if(t.includes("ios"))return 6;if(t.includes("ubuntu"))return 8;if(t.includes("chromium os"))return 13}return 0}},259866:(e,t,o)=>{o.d(t,{Z:()=>l});function l(e){return function e(t,o){let l;if(null==t||"object"!=typeof t&&"function"!=typeof t)return t;let i=o.find(e=>e.value===t);if(i)return i.result;let n=Object.prototype.toString.call(t);switch(n){case"[object Array]":l=Array(t.length);break;case"[object Set]":l=new Set;break;case"[object Object]":case"[object Arguments]":l={};break;case"[object Map]":l=new Map;break;default:return t}let s=[...o,{value:t,result:l}];switch(n){case"[object Array]":t.forEach((t,o)=>{l[o]=e(t,s)});break;case"[object Set]":t.forEach(t=>{l.add(e(t,s))});break;case"[object Object]":case"[object Arguments]":Object.entries(t).forEach(([t,o])=>{l[t]=e(o,s)});break;case"[object Map]":t.forEach((t,o)=>{l.set(o,e(t,s))})}return l}(e,[])}},258656:(e,t,o)=>{o.d(t,{Z:()=>a});var l=o(883119),i=o(205841),n=o(140017),s=o(785893);let a=({isQuestion:e,name:t,size:o,src:a})=>{let r=(0,n.ZP)();return(0,s.jsxs)(l.xu,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,s.jsx)(i.qE,{name:t,size:o,src:a}),e&&(0,s.jsxs)(l.xu,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,s.jsx)(l.xu,{position:"absolute",children:(0,s.jsx)(l.JO,{accessibilityLabel:r._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"dark",icon:"speech"})}),(0,s.jsx)(l.xu,{position:"absolute",children:(0,s.jsx)(l.JO,{accessibilityLabel:r._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"light",icon:"question-mark",size:8})})]})]})}},139922:(e,t,o)=>{o.d(t,{Z:()=>ei});var l=o(883119),i=o(667294),n=o(702664),s=o(473727),a=o(161881),r=o(439917),c=o(742103),d=o(258656),_=o(140017),u=o(785893);let m=({color:e,isMarkedHelpful:t})=>{let o=(0,_.ZP)();return(0,u.jsx)(l.JO,{accessibilityLabel:o._('Helpful', 'comment.button.helpful', 'mark or unmark comment as helpful'),color:t?"brandPrimary":e,icon:"thumbs-up",inline:!0,size:12})};var h=o(144138),p=o(903591),g=o(214877),f=o(454514),y=o(340523),P=o(13848),x=o(149722),b=o(785059),A=o(35222),T=o(199677),v=o(415199),w=o(930822),E=o(291867),I=o(937310),k=o(825784);let C=({aggregatedPinDataId:e,anchor:t,closeupAttributionId:o,comment:s,dismiss:a,isOpen:r,isReply:c,onEdit:d,onShowBlockUserModal:m,parentId:C,pinnerId:z,pinId:j})=>{let R=(0,_.ZP)(),S=(0,n.useDispatch)(),{logContextEvent:D}=(0,g.v)(),{showToast:L}=(0,P.F9)(),{checkExperiment:O}=(0,y.F)(),{anyEnabled:N}=O("web_m10n_business_access_orbac_ga"),{toggleAggregatedCommentHighlight:M}=(0,v.nf)(),Z=(0,h.Z)(),[U,B]=(0,i.useState)(!1);(0,i.useEffect)(()=>{B(r)},[r,B]);let F=(0,x.Z)(),G=(0,b.Z)(),H=(0,A.Z)(),{reportComment:W}=(0,k.f)(),$=o??"",V=s.user.id,q=F.isAuth&&$===F.id,K="userdiditdata"===s.type,Y=(0,T.q6)(F,z??"",N?G:{}),X=(0,T.D3)(F,V,N?G:{}),J=(0,T.D3)(F,$,N?G:{}),Q=F.isAuth&&(s.tagged_users||[]).filter(({id:e})=>e===F.id).length>0,ee=async e=>{try{await M({aggregatedCommentId:s.id,pinId:j,isHighlighted:e}),D({event_type:101,component:13712,element:e?12475:12474,view_type:220,aux_data:{creator_id:V}}),L(({hideToast:t})=>(0,u.jsx)(f.ZP,{onHide:t,primaryAction:{accessibilityLabel:R._('Undo comment highlight or comment highlight removal', 'unifiedComment.unifiedCommentContainer.commentHighlightToast.a11yUndoButton', 'Undo comment highlight or comment highlight removal'),label:R._('Undo', 'unifiedComment.unifiedCommentContainer.commentHighlightToast.undoButton', 'Undo comment highlight or comment highlight removal'),size:"lg",onClick:()=>{M({aggregatedCommentId:s.id,pinId:j,isHighlighted:!e})}},text:e?R._('Highlight removed', 'unifiedComment.unifiedCommentContainer.popover.commentHighlightRemovalToast', 'Toast that tells user that they have successfully removed a comment highlight.'):R._('Comment highlighted', 'unifiedComment.unifiedCommentContainer.popover.commentHighlightToast', 'Toast that tells user that they have successfully highlighted a comment.')}))}catch(e){e.message&&L(({hideToast:t})=>(0,u.jsx)(f.ZP,{onHide:t,text:e.message,type:"error"}))}},et=e=>()=>void ee(e),eo=e=>()=>{e(),a(!0)};if(!r)return null;let el={highlight:R._('Highlight', 'Highlight a community post or comment', 'Highlight a community post or comment'),removeHighlight:R._('Remove highlight', 'Remove highlight for a community post or comment', 'Remove highlight for a community post or comment'),edit:R._('Edit', 'Edit a community post or comment', 'Edit a community post or comment'),delete:R._('Delete', 'Delete a community post or comment', 'Delete a community post or comment'),reportContent:R._('Report this content', 'Report a community post or comment', 'Report a community post or comment'),removeMention:R._('Remove @mention', 'closeup.activityItem.removeMention', 'Button that allows user to remove their @mention in a comment on a pin'),reportForNetzDG:R._('Report comment for NetzDG', 'commentOverflowMenu.option.reportForNetzDG', 'Report comment - NetzDG'),blockUser:R._('Block user', 'closeup.activityItem.blockUser', 'Block comment author')},ei=new l.Ry(1);return U&&(0,u.jsx)(l.xu,{onFocus:e=>e.stopPropagation(),children:(0,u.jsx)(l.Lt,{anchor:t,disableMobileUI:!0,id:"comment-overflow-popover",idealDirection:"down",isWithinFixedContainer:!1,onDismiss:()=>a(!1),zIndex:ei,children:F.isAuth?(0,u.jsxs)(i.Fragment,{children:[!c&&q&&!s.highlighted_by_pin_owner&&!K&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-highlight",onSelect:eo(et(!1)),option:{label:el.highlight,value:el.highlight}}),!c&&q&&s.highlighted_by_pin_owner&&!K&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-remove-highlight",onSelect:eo(et(!0)),option:{label:el.removeHighlight,value:el.removeHighlight}}),X&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-edit",onSelect:eo(d),option:{label:el.edit,value:el.edit}}),(X||J)&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-delete",onSelect:eo(()=>{"aggregatedcomment"===s.type?Z({aggregatedCommentId:s.id,aggregatedPinId:e??"",feedType:c?"aggregatedComments":I.Z.UNIFIED_COMMENTS,orbacSubjectId:H,parentId:C,type:c?p.Rv.REPLY_TO_AGGREGATED:p.Rv.TOP,updateParentCommentCount:!0,pinId:j}):S((0,w.lg)({aggregatedPinDataId:e??"",feedType:I.Z.UNIFIED_COMMENTS,id:s.id,isOwnedByMe:!0,pinId:j??"",username:s.user.username,updateParentDidItCount:!0}))}),option:{label:el.delete,value:el.delete}}),!X&&!Y&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-report",onSelect:eo(()=>{W(s.id,C,s.type)}),option:{label:el.reportContent,value:el.reportContent}}),Q&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-remove-mention",onSelect:eo(()=>{S((0,E.Q)(s.id)),L(({hideToast:e})=>(0,u.jsx)(f.ZP,{onHide:e,text:R._('@mention removed!', 'unifiedComment.unifiedCommentContainer.mentionRemovalToast', 'Toast that tells user that they have successfully removed the @mention of them in the comment')}))}),option:{label:el.removeMention,value:el.removeMention}}),!X&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-block-user",onSelect:eo(()=>{B(!1),m(),D({component:14349,event_type:9406})}),option:{label:el.blockUser,value:el.blockUser}})]}):(0,u.jsx)(l.Lt.Link,{dataTestId:"dropdown-item-report-for-netzdg",href:"https://policy.pinterest.com/de/netzdg/",option:{label:el.reportForNetzDG,value:el.reportForNetzDG}})})})};var z=o(600636),j=o(133758),R=o(604625);let S={containerStyle:{boxShadow:"0 0px 8px rgba(0, 0, 0, 0.1)"},helpfulStyle:{backgroundImage:`url(${z})`},lovedStyle:{backgroundImage:`url(${j})`}},D=({setHelpful:e,setLoved:t})=>{let o=(0,_.ZP)(),n=(0,i.useRef)(null),s=(0,i.useRef)(null),[a,r]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),m=e=>()=>{r(e)},h=e=>()=>{d(e)};return(0,u.jsxs)(l.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:S.containerStyle},"data-test-id":"comment-reaction-tray-background",display:"flex",height:25,justifyContent:"center",padding:1,position:"relative",rounding:"pill",width:43,children:[(0,u.jsxs)(l.iP,{fullHeight:!0,onMouseDown:t,onMouseEnter:h(!0),onMouseLeave:h(!1),children:[(0,u.jsx)(l.xu,{ref:s,bottom:!0,height:14,marginBottom:3,position:"absolute",width:14}),(0,u.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:S.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:18,marginBottom:c?3:1,position:"absolute",width:18})]}),(0,u.jsxs)(l.iP,{fullHeight:!0,onMouseDown:e,onMouseEnter:m(!0),onMouseLeave:m(!1),children:[(0,u.jsx)(l.xu,{ref:n,bottom:!0,height:14,marginBottom:3,position:"absolute",width:14}),(0,u.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:S.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:18,marginBottom:a?3:1,position:"absolute",width:18})]}),(c||a)&&(0,u.jsx)(l.mh,{zIndex:R.lI,children:(0,u.jsx)(l.J2,{anchor:c?s.current:n.current,idealDirection:"up",onDismiss:()=>{},positionRelativeToAnchor:!1,size:"flexible",children:(0,u.jsx)(l.xu,{alignItems:"center",color:"selected",display:"flex",paddingX:1,paddingY:1,children:(0,u.jsx)(l.xv,{color:"inverse",overflow:"noWrap",size:"100",weight:"bold",children:c?o._('Love', 'comment.button.loved', 'loved reaction'):o._('Helpful', 'comment.button.helpful', 'helpful reaction')})})})})]})};var L=o(311716),O=o(559113),N=o(205841);let M={helpfulStyle:{backgroundImage:`url(${L})`},lovedStyle:{backgroundImage:`url(${O})`}},Z=({response:e})=>{let t=14===e.reaction_type,o=1===e.reaction_type,i=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,u.jsxs)(l.kC,{alignItems:"center",children:[(0,u.jsx)(l.Tg,{href:`/${e.user.username}/`,children:(0,u.jsxs)(l.kC,{alignItems:"center",children:[(0,u.jsx)(l.xu,{maxWidth:40,children:(0,u.jsx)(N.qE,{accessibilityLabel:"",name:i,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,u.jsx)(l.xu,{marginStart:2,maxWidth:80,children:(0,u.jsx)(l.xv,{color:"inverse",size:"100",weight:"bold",children:i})})]})}),(0,u.jsxs)(l.xu,{alignContent:"end",display:"flex",padding:2,children:[o&&(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:M.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),t&&(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:M.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var U=o(995917);let B=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],F=({commentId:e,isMarkedHelpfulByMe:t,isLovedByMe:o,isTry:n})=>{let s=(0,x.Z)(),a=(0,U.Z)({name:"ApiResource",options:{url:n?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:B}}),r=a.data?.filter(e=>e.user.id!==s.id);if((o||t)&&r){let t={id:e,reaction_type:o?1:14,user:{first_name:s.isAuth?s.firstName:"",full_name:s.isAuth?s.fullName:"",id:s.isAuth?s.id:"",image_medium_url:s.isAuth?s.imageMediumUrl:"",is_private_profile:!!s.isAuth&&!!s.isPrivateProfile,username:s.isAuth?s.username:""}};r=[t,...r]}let c=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let{current:e}=c,t=()=>{a.isFetching||(a.isAtEnd?e?.removeEventListener("scroll",t):a.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[a]),(0,u.jsx)(l.xu,{ref:c,color:"selected",maxHeight:140,overflow:"scroll",rounding:2,width:180,children:r?.map(e=>u.jsx(l.xu,{"data-test-id":"reaction-list-single-user",margin:3,children:u.jsx(Z,{response:e})},e.id))})},G=({commentId:e,dismissReactionList:t,helpfulCount:o,isMarkedHelpfulByMe:n,isLovedByMe:s,isReactionListOpen:a,isTry:r,lovedCount:c,onReactionCountHover:d,onToggleHelpful:m,onToggleLove:h})=>{let p=(0,_.ZP)(),g=(0,i.useRef)(),[f,y]=(0,i.useState)(!1),P=!1,x=(c||0)+(o||0);n&&s&&(x-=1);let b=e=>()=>{y(e)},A=()=>{P=!0,d()},T=()=>{P=!1,setTimeout(()=>{P||t()},1e3)},v=(0,u.jsx)(l.xu,{"data-test-id":"comment-reaction-container-entry-point",children:f?(0,u.jsx)(l.iP,{onMouseDown:b(!1),onMouseLeave:b(!1),children:(0,u.jsx)(D,{setHelpful:m(!0),setLoved:h(!0)})}):(0,u.jsx)(l.iP,{onMouseEnter:b(!0),children:(0,u.jsx)(l.JO,{accessibilityLabel:p._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),color:"subtle",icon:"heart-outline",size:16})})});return(0,u.jsxs)(l.kC,{alignItems:"center",gap:{row:1,column:0},children:[n||s?(0,u.jsx)(l.iP,{onMouseDown:()=>{m(!1)(),h(!1)()},children:(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${s?O:L})`}},"data-test-id":s?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:16,width:16})}):v,x>0&&(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(l.iP,{onMouseEnter:A,onMouseLeave:T,children:(0,u.jsx)(l.xu,{ref:g,"data-test-id":"comment-reaction-container-reaction-count",children:(0,u.jsx)(l.xv,{color:"subtle",inline:!0,size:"200",weight:"bold",children:x})})}),a&&(0,u.jsx)(l.mh,{zIndex:R.lI,children:(0,u.jsx)(l.J2,{anchor:g.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,children:(0,u.jsx)(l.iP,{onMouseEnter:A,onMouseLeave:T,children:(0,u.jsx)(F,{commentId:e,isLovedByMe:s,isMarkedHelpfulByMe:n,isTry:r})})})})]})]})};var H=o(53264),W=o(339001);function $(e){let{featuredCommentId:t,parentId:o,parentType:s,isDesktop:a,isLoading:r,isReadOnly:c,openOverflowMenu:d,replyingToCommentId:m,toggleHelpful:h,toggleLike:p,toggleReplyComposer:g,isORBACProfileManager:f,isVideo:y,storyPinDataId:P,pinId:x,closeupAttributionId:b,aggregatedPinDataId:A,closeupAttributionUsername:T,pinnerId:w,reactionListCommentId:E,showReactionListForComment:k,viewParameter:C}=e,z=(0,_.ZP)(),j=(0,v.lV)(),R=(0,n.useSelector)(({feeds:e})=>{let t=e[`${I.Z.AGGREGATED_COMMENT_REPLIES}:${o}`]||[],l=e[`${I.Z.AGGREGATED_COMMENTS}:${o}`]||[],i=t.concat(l);return i.reduceRight((e,{id:t})=>{let o=j[t];return o?[...e,o]:e},[])}),[S,D]=(0,i.useState)(1),L=S===R.length;return(0,u.jsxs)(i.Fragment,{children:[R.length>1&&(0,u.jsx)(l.iP,{onTap:()=>{D(L?0:R.length)},children:(0,u.jsxs)(l.xu,{marginBottom:4,children:[(0,u.jsx)(l.xu,{display:"inlineBlock",marginEnd:2,children:(0,u.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:"⎯⎯"})}),(0,u.jsx)(l.xv,{color:"subtle",inline:!0,size:"100",weight:"bold",children:L?z._('Hide replies', 'comment.button.hideReplies', 'hide comment replies'):(0,W.nk)(z.ngettext('View {{ commentCount }} reply', 'View {{ commentCount }} replies', R.length, 'comment.button.showReplies', 'show comment replies'),{commentCount:R.length})})]})}),(0,u.jsx)(ei,{aggregatedPinDataId:A,closeupAttributionId:b,closeupAttributionUsername:T,comments:R.slice(0,S),commentsDisabled:!1,featuredCommentId:t,gapSize:2,isDesktop:a,isLoading:r,isORBACProfileManager:f,isReadOnly:c,isVideo:y,openOverflowMenu:d,parentId:o,parentType:s,pinId:x,pinnerId:w,reactionListCommentId:E,replyingToCommentId:m,showReactionListForComment:k,storyPinDataId:P,toggleHelpful:h,toggleLike:p,toggleReplyComposer:g,userAvatarSize:"sm",viewParameter:C})]})}var V=o(961907),q=o(757017),K=o(96452),Y=o(5859),X=o(227258),J=o(413110),Q=o(189),ee=o(193247),et=o(386129);function eo(e){let t;let{aggregatedPinDataId:o,closeupAttributionId:h,closeupAttributionUsername:A,comment:E,featuredCommentId:I,isDesktop:k,isReadOnly:z,isVideo:j,openOverflowMenu:R,toggleReplyComposer:S,parentId:D,parentType:L=J.o.pin,pinId:O,storyPinDataId:N,replyingToCommentId:M,showReactionListForComment:Z,toggleHelpful:U,toggleLike:B,userAvatarSize:F,isORBACProfileManager:eo,pinnerId:el,reactionListCommentId:ei,viewParameter:en}=e,{user:{id:es,first_name:ea,id:er,image_medium_url:ec,username:ed},id:e_,image_signatures:eu,is_translatable:em,comment_count:eh,helpful_count:ep,tags:eg=[]}=E,[ef,ey]=(0,i.useState)(!1),eP=ef&&E.translatedText||E.text,ex=!em||""===E.translatedText,eb=!1,eA=0,eT=!1,ev=!!E.marked_helpful_by_me,ew=[E.user],eE="",eI=new Date;"aggregatedcomment"===E.type?(eb=E.highlighted_by_pin_owner,eA=E.reaction_counts[1],eT=E.reaction_by_me>0,ew.push(...E.tagged_users),eE=`${ed} ${eP??""}`,eI=new Date(E.created_at)):(eA=E.like_count,eT=E.liked_by_me,t=(E.images[0]||{})["150x150"],eE=`${ed} ${E.details}`,eI=new Date(E.done_at));let ek=(0,_.ZP)(),eC=(0,x.Z)(),{logContextEvent:ez}=(0,g.v)(),{country:ej,isBot:eR}=(0,Y.B)(),{checkExperiment:eS}=(0,y.F)(),{showToast:eD}=(0,P.F9)(),eL=(0,n.useDispatch)(),eO=(0,i.useRef)(),{anyEnabled:eN}=eS("web_m10n_business_access_orbac_ga"),eM=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"].includes(ej),eZ=1===E.comment_tag,eU=(0,b.Z)(),eB=eN?(0,T.lJ)(eC,eU):"",{nativeEngagementsHiddenForUser:eF}=(0,Q.G)(),{aggregatedCommentsHiddenForUser:eG,translateAggregatedComment:eH,updateAggregatedComment:eW}=(0,v.nf)(),e$=(0,a.Z)(),eV="userdiditdata"===E.type,eq=(0,q.Z)(),eK=em&&eS("dweb_comment_translations").anyEnabled,eY=eV&&eS("dweb_photo_commenting").anyEnabled,eX=!z&&!eo&&eV,eJ=eX&&k,eQ=eX&&!k&&eS("mweb_photo_comment_reactions").anyEnabled,e0=[{offset:0,length:ed.length,color:"darkGray"},...eg.map(e=>({...e,offset:(e.offset||0)+ed.length+1,color:"shopping"}))],e1={SHOW_TRANSLATION:ek._('Show translation', 'comment.translateButton.showTranslation', 'text for translation button when translation is available'),TRANSLATING:ek._('Translating...', 'comment.translateButton.translating', 'text for translation button while translating'),SHOW_ORIGINAL:ek._('Show original', 'comment.translateButton.showOriginal', 'text for translation button after translating')},e3=(0,i.useRef)(e1.SHOW_TRANSLATION),[e2,e9]=(0,i.useState)(!1),[e6,e7]=(0,i.useState)(!1),[e8,e4]=(0,i.useState)(!1),[e5,te]=(0,i.useState)(!1),[tt,to]=(0,i.useState)(!1),[tl,ti]=(0,i.useState)(!1),[tn,ts]=(0,i.useState)(p.A9.NONE),ta=e=>()=>{e7(e)};(0,i.useEffect)(()=>{eK&&ez({event_type:10416,view_type:3,view_parameter:en,component:"pin"===L?13696:13697})},[ez,L,eK,en]),(0,i.useEffect)(()=>{eh>0&&!eR&&eL((0,X.U)("aggregatedcomment"===E.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:e_,redux_normalize_feed:!0}}))},[E.type,e_]);let tr=L.toLowerCase()===J.o.aggregatedComment.toLowerCase()||L.toLowerCase()===J.n.didIt.toLowerCase(),tc=Object.values(J.n).includes(L.toLowerCase()),td=E.user.first_name||"",t_=async({contentMarkdown:e,force:t,tags:o})=>{let l,i;te(!0);let n=E.id;if(tr&&(l=L.toLowerCase()===J.n.didIt,n=D,i=E.id),n)try{await e$({force:t,fromUnifiedComment:!0,objectType:eV||l?J.o.didIt:J.o.aggregatedComment,objectId:n,orbacSubjectId:eB,tags:o,text:e,replyToCommentId:i})}catch(e){if([K.ky,K.LJ].includes(e.code)&&k)return ts(e.code===K.ky?p.A9.WARNING:p.A9.BLOCK),te(!1),!1}return S&&S(void 0),te(!1),!0},tu=async({contentMarkdown:e,force:t,tags:o})=>{e4(!0);try{eY?await eL((0,w.IU)({id:E.id,details:e,pinId:O??"",image_signatures:eu??[]})):await eW({commentId:E.id,force:t,orbacSubjectId:eB,tags:o,text:e})}catch(e){if([K.ky,K.LJ].includes(e.code)&&k)return ts(e.code===K.ky?p.A9.WARNING:p.A9.BLOCK),e4(!1),!1}return e7(!1),e4(!1),!0},tm=e=>()=>{e9(e),ti(e),e||ez({component:14349,event_type:9408})},th=()=>{ts(p.A9.NONE)},tp=()=>{ef||E.translatedText||eH(E.id),ef||e3.current!==e1.SHOW_TRANSLATION?ef&&e3.current===e1.SHOW_ORIGINAL&&ez({event_type:10418,view_type:3,view_parameter:en,component:"pin"===L?13696:13697}):ez({event_type:10417,view_type:3,view_parameter:en,component:"pin"===L?13696:13697}),ey(!ef)};(0,i.useEffect)(()=>{ef&&ex&&(ey(!ef),eD(({hideToast:e})=>(0,u.jsx)(f.ZP,{onHide:e,text:ek._('Error - couldn\'t translate', 'comment.couldNotTranslate.toast', 'error toast that shows after unsuccessful translation'),type:"error"})))},[ef,ex]),ef?e3.current=E.translatedText?e1.SHOW_ORIGINAL:e1.TRANSLATING:e3.current=e1.SHOW_TRANSLATION;let tg=t&&(0,u.jsx)(l.xu,{marginBottom:k?4:2,marginTop:1,children:(0,u.jsx)(l.zd,{height:150,rounding:2,wash:!0,width:150,children:(0,u.jsx)(l.Ee,{alt:t.url??"",color:"#efefef",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url??""},t.url)})}),tf=k?128:110,ty=E.media?.sticker?.image_url&&eS(k?"ce_dweb_comment_sticker_in_feed":"ce_mweb_comment_sticker_in_feed").anyEnabled&&(0,u.jsx)(l.xu,{height:tf,marginBottom:k?1:0,marginTop:1,width:tf,children:(0,u.jsx)(l.Ee,{alt:E.media?.sticker?.display_name??"",fit:"contain",naturalHeight:0,naturalWidth:0,src:E.media?.sticker?.image_url??""})});return(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(l.$j,{accessibilityLabel:"Loading comment",show:e8}),!e6&&!e8&&(0,u.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(l.xu,{marginEnd:2,children:(0,u.jsx)(s.rU,{to:`/${ed}/`,children:(0,u.jsx)(d.Z,{isQuestion:eZ,name:ea||ed||"",size:F,src:ec??""})})}),(0,u.jsxs)(l.kC,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,u.jsxs)(l.kC,{justifyContent:"between",children:[(0,u.jsx)(l.kC.Item,{minWidth:0,children:(0,u.jsxs)(l.kC,{dataTestId:"author-and-comment-container",direction:"column",children:[!k&&tg,(0,u.jsx)(V.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:ew,tags:e0,text:eE}),k&&tg,ty,eK&&(0,u.jsx)(l.xu,{marginBottom:2,marginTop:2,children:(0,u.jsx)(l.iP,{onTap:()=>tp(),children:(0,u.jsx)(l.xv,{color:"subtle",size:"300",weight:"bold",children:e3.current})})})]})}),I===e_&&(0,u.jsx)(l.xu,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),eb&&(0,u.jsx)(l.xu,{marginBottom:3,marginTop:4,children:(0,u.jsx)(l.xv,{size:"100",children:(0,W.nk)(ek._('Highlighted by @{{ closeupAttributionUsername }}', 'comment.highlighted.label', 'label on comment that has been highlighted by the Pin creator'),{closeupAttributionUsername:A})})}),(!z||eM)&&(0,u.jsxs)(l.xu,{alignItems:"center",display:"flex",height:k?25:"100%",justifyContent:"between",position:"relative",children:[(0,u.jsxs)(l.kC,{alignItems:"center",gap:{row:5,column:0},children:[!z&&(0,u.jsx)(l.xu,{"data-test-id":"comments-time-passed",children:(0,u.jsx)(l.xv,{color:"subtle",size:"200",children:eq(eI,!0)})}),!z&&(!eo||eN)&&(0,u.jsx)(l.xu,{"data-test-id":"comment-reply-button-container",children:(0,u.jsx)(l.iP,{onTap:()=>{S&&S(E,D,L)},children:(0,u.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:ek._('Reply', 'comment.button.reply', 'entry point to reply to comment')})})}),!z&&!eo&&(!eV||eJ||eQ)&&(k?(0,u.jsx)(G,{commentId:e_,dismissReactionList:()=>{Z(void 0)},helpfulCount:ep,isLovedByMe:eT,isMarkedHelpfulByMe:ev,isReactionListOpen:ei===e_,isTry:eV,lovedCount:eA,onReactionCountHover:()=>{Z(e_),ez({event_type:9906,component:"pin"===L?13696:13697,view_type:3,view_parameter:en})},onToggleHelpful:e=>()=>{ev!==e&&U(e_,!e,eV)()},onToggleLove:e=>()=>{eT!==e&&B(e_,!e,eV)()}}):(0,u.jsxs)(l.xu,{alignItems:"center","data-test-id":"reactions-likeWithCountButton",display:"flex",children:[(0,u.jsx)(l.hU,{accessibilityLabel:ek._('Like', 'comment.button.like', 'like or unlike comment'),icon:"heart",iconColor:eT?"red":"gray",onClick:B(e_,eT,eV),size:"xs"}),eA>0&&(0,u.jsx)(l.xu,{"data-test-id":"love-count-container",children:(0,u.jsx)(l.xv,{color:"subtle",size:"100",weight:"bold",children:eA})})]})),!(eC.id===er&&eZ)&&(!eo||eN)&&(0,u.jsx)(l.xu,{ref:eO,"data-test-id":"comment-more-options",children:(0,u.jsx)(l.hU,{accessibilityLabel:ek._('More', 'comment.button.more', 'see more options for comment'),icon:"ellipsis",iconColor:"gray",onClick:()=>{k?e9(!e2):R&&R(E)},size:"xs"})})]}),!z&&!eo&&!k&&(!eV||eQ)&&(0,u.jsx)(l.xu,{marginStart:6,children:(0,u.jsx)(l.iP,{fullWidth:!1,onTap:U(e_,ev,eV),children:(0,u.jsxs)(l.kC,{alignItems:"center",dataTestId:"helpful-reaction",gap:{row:1,column:0},height:"100%",children:[(0,u.jsx)(m,{color:"subtle",isMarkedHelpful:ev}),(0,u.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:ek._('Helpful', 'comment.button.helpful', 'mark or unmark comment as helpful')}),ep>0&&(0,u.jsx)(l.xu,{"data-test-id":"helpful-count-container",children:(0,u.jsx)(l.xv,{color:"subtle",size:"100",weight:"bold",children:ep})})]})})})]})]})]}),k&&(0,u.jsxs)(i.Fragment,{children:[e6&&(0,u.jsx)(l.xu,{marginTop:3,children:(0,u.jsx)(H.Z,{commentWarningModalState:tn,dismissCommentWarningModal:th,initialTags:E.tags,initialText:"aggregatedcomment"===E.type?E.text:E.details,isReplyEditor:tc,objectType:J.o.aggregatedComment,onAddItem:tu,onCancelItem:ta(!1),postedPhoto:t,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:en})}),M===e_&&(0,u.jsx)(l.xu,{marginStart:tr?0:12,marginTop:3,children:(0,u.jsx)(H.Z,{commentWarningModalState:tn,dismissCommentWarningModal:th,initialTags:tr?[{offset:0,object_id:es,length:td.length,tag_type:1}]:[],initialText:tr?`${td} `:"",isReplyEditor:tc,objectType:J.o.aggregatedComment,onAddItem:t_,onCancelItem:()=>{S&&S()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:en})})]}),(eh>0||e5)&&(0,u.jsx)(l.xu,{marginStart:12,marginTop:4,children:(0,u.jsx)($,{aggregatedPinDataId:o,closeupAttributionId:h,closeupAttributionUsername:A,featuredCommentId:I,isDesktop:k,isLoading:e5,isORBACProfileManager:eo,isReadOnly:z,isVideo:j,openOverflowMenu:R,parentId:e_,parentType:E.type,pinId:O,pinnerId:el,reactionListCommentId:ei,replyingToCommentId:M,showReactionListForComment:Z,storyPinDataId:N,toggleHelpful:U,toggleLike:B,toggleReplyComposer:S,viewParameter:en})}),k&&(!z||eM)&&(0,u.jsx)(C,{aggregatedPinDataId:o,anchor:eO.current,closeupAttributionId:h,comment:E,dismiss:e=>{e9(!1),e||ez({component:14349,event_type:10128})},isOpen:e2,isReply:tr,onEdit:ta(!0),onShowBlockUserModal:tm(!0),parentId:D,pinId:O,pinnerId:el}),tt&&(0,u.jsx)(r.N,{children:(0,u.jsx)(c.Z,{aggregatedPinDataId:o,didItDataId:e_,onClose:e=>()=>{to(!e)},pinId:O??"",username:ed,users:[E.user]})}),tl&&(0,u.jsx)(ee.Z,{firstName:ea??"",onBlockUser:()=>{eL((0,et.Ge)({id:es,orbacSubjectId:eB,blockSource:"comment",blockContext:e_,logContextEvent:ez})),eG(es),eF(es),ez({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:eC.isAuth?eC.id:null}}),ez({component:14349,event_type:9407}),ti(!1),eD(({hideToast:e})=>(0,u.jsx)(f.ZP,{onHide:e,text:(0,W.nk)(ek._('You\'ve blocked {{ username }}', 'comment.blockAuthor.toast', 'confirmation toast that shows after user blocks comment author'),{username:ed}).join("")}))},onClearModal:tm(!1)})]})}var el=o(666472);function ei(e){let t;let{aggregatedPinDataId:o,comments:i,commentsDisabled:n,featuredCommentId:s,gapSize:a=6,isDesktop:r,isLoaded:c=!1,isLoading:d=!1,isReadOnly:m,openOverflowMenu:h,toggleReplyComposer:g,parentId:f,parentType:P,replyingToCommentId:x,toggleHelpful:b,toggleLike:A,userAvatarSize:T,isORBACProfileManager:v,isVideo:w,storyPinDataId:E,pinId:I,closeupAttributionId:k,closeupAttributionUsername:C,pinnerId:z,showReactionListForComment:j,reactionListCommentId:R,viewParameter:S}=e,D=(0,_.ZP)(),{checkExperiment:L}=(0,y.F)(),O=L("ce_dweb_comment_feed_redesign").anyEnabled,N=r&&O?(0,p.mz)(D):D._('No comments yet! Add one to start the conversation.', 'commentThread.emptyState.message', 'comment thread empty state message');return(t=E?"story":w?"video":"pin",n)?(0,u.jsx)(l.xu,{alignSelf:"center","data-test-id":"comments-disabled-label",width:"100%",children:(0,u.jsx)(l.xv,{align:r?"start":"center",color:"subtle",children:D._('Comments are turned off for this Pin', 'commentThread.disabledState.message', 'Comments are turned off or disabled for this pin')})}):i.length>0?(0,u.jsxs)(l.kC,{dataTestId:"aggregated-comment-list",direction:"column",gap:{row:0,column:a},maxHeight:"100%",width:"100%",children:[i.map((e,i)=>(0,u.jsx)(el.F,{componentType:"pin"===P?13696:13697,impressionAuxFields:{commentId:e.id,pinId:I,pinOwnerUserId:k,pinType:t,parentId:f,parentType:P,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:i,viewType:r?3:98,children:({impressionTrackerRef:t})=>(0,u.jsx)(l.xu,{ref:t,"data-test-id":"commentThread-comment",children:(0,u.jsx)(eo,{aggregatedPinDataId:o,closeupAttributionId:k,closeupAttributionUsername:C,comment:e,featuredCommentId:s,isDesktop:r,isORBACProfileManager:v,isReadOnly:m,isVideo:w,openOverflowMenu:h,parentId:f,parentType:P,pinId:I,pinnerId:z,reactionListCommentId:R,replyingToCommentId:x,showReactionListForComment:j,storyPinDataId:E,toggleHelpful:b,toggleLike:A,toggleReplyComposer:g,userAvatarSize:T,viewParameter:S})})},e.id)),(0,u.jsx)(l.$j,{accessibilityLabel:D._('Comments loading', ' - ', ' -- '),show:d})]}):(0,u.jsxs)(l.xu,{alignSelf:"center",width:"100%",children:[(0,u.jsx)(l.$j,{accessibilityLabel:D._('Comments loading', ' - ', ' -- '),show:d}),c&&(0,u.jsx)(l.xv,{align:r?"start":"center",color:"subtle",children:N})]})}},53264:(e,t,o)=>{o.d(t,{Z:()=>a});var l=o(667294),i=o(14583),n=o(785893);let s=(0,l.lazy)(()=>Promise.all([o.e(63349),o.e(28974)]).then(o.bind(o,589773)));function a(e){return(0,n.jsx)(i.Z,{fallback:null,children:(0,n.jsx)(s,{...e})})}},961907:(e,t,o)=>{o.d(t,{Z:()=>r});var l=o(667294),i=o(883119),n=o(696534),s=o(140017),a=o(785893);let r=({hasManyComments:e,inCommentFeedPreview:t,isFirstTaggedUserAuthor:o,isInCommentModule:r,shouldShowFirstNameOnly:c,tags:d,taggedUsers:_,text:u})=>{let m=(0,s.ZP)(),h=(0,l.useRef)(null),p=(0,n.Yc)()?"#111111":"#FFFFFF",[g,f]=(0,l.useState)(!1),y=m._('...view', 'comment.module.toggle.view', 'label on comment module to open coment thread'),P=m._('...view all', 'comment.module.toggle.viewAll', 'label on comment module to open coment thread'),x=e?P:y;(0,l.useEffect)(()=>{h.current&&f(h.current.scrollHeight>h.current.offsetHeight)},[h,f,u]);let b=(e,t)=>(0,a.jsx)(i.xv,{inline:!0,overflow:"normal",children:(0,a.jsx)("span",{className:"text-container",children:e})},t),A=(e,t,l,n)=>{let s=c||0===l&&o?_[l].first_name||_[l].username[0]:t;return(0,a.jsx)(i.xv,{color:e,inline:!0,overflow:"normal",weight:"bold",children:r?s:(0,a.jsx)(i.rU,{display:"inlineBlock",href:`/${_[l].username}`,underline:"hover",children:s})},n)};return(0,a.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:(()=>{if(!d.length||!_||d.length!==_.length)return b(u,"1");let e=0,o=[];return d.forEach((t,l)=>{let i=u.substring(e,t.offset);e=t.offset+t.length;let n=u.substring(t.offset,e);o=o.concat(b(i,`${l}a`)).concat(A(t.color,n,l,`${l}b`))}),o=o.concat(b(u.substring(e),"2")),(0,a.jsx)(i.xu,{marginEnd:3,position:"relative",children:(0,a.jsxs)(i.xv,{ref:h,inline:!0,lineClamp:r?2:t?1:void 0,children:[o,r&&!g&&(0,a.jsxs)(i.xv,{inline:!0,weight:"bold",children:["\xa0",x]}),r&&g&&(0,a.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{background:`linear-gradient(270deg, ${p} 50%, ${p}00 100%)`}},display:"inlineBlock",position:"absolute",right:!0,width:140,children:(0,a.jsxs)(i.xv,{align:"end",weight:"bold",children:["\xa0",x]})})]})})})()})}},903591:(e,t,o)=>{o.d(t,{A9:()=>c,F1:()=>h,Ff:()=>m,LH:()=>n,Rv:()=>s,TJ:()=>a,i$:()=>d,iB:()=>i,mz:()=>u,pW:()=>r,zs:()=>_});var l=o(427514);let i=48,n=i+8,s=Object.freeze({TOP:0,REPLY_TO_TRIED:1,REPLY_TO_AGGREGATED:2}),a="comment_featured_ids",r="did_it_featured_ids",c={NONE:"none",WARNING:"warning",BLOCK:"block"},d=(e,t)=>{let o=e?(0,l.Z)(t.ngettext('{{ count }} Comment', '{{ count }} Comments', e, 'closeup.commentThread.heading.commentCount', 'Comment count on a Pin. count: number of comments'),{count:e.toString()}):t._('No comments yet', 'closeup.commentThread.heading.noComments', 'Prompt for user to comment on Pin');return o},_=(e,t)=>[{offset:0,length:e.length,color:"darkGray"},...t.map(t=>({...t,offset:(t.offset||0)+e.length+1,color:"shopping"}))],u=e=>e._('Add one to start the conversation', 'closeup.commentThread.emptyState.message', 'Comment thread empty state message'),m=e=>e._('posted a photo', 'comment.preview.text.photo', 'Comment preview text for an image that a user posted'),h=e=>e._('posted a sticker', 'comment.preview.text.sticker', 'Comment preview text for a sticker that a user posted')},717203:(e,t,o)=>{o.d(t,{Z:()=>m,w:()=>h});var l=o(339001);let i=e=>e._('{{ first }}', 'Generic message that lists 1 item', 'Generic message that lists 1 item (ex: Stevie)'),n=e=>e._('{{ first }} and {{ second }}', 'Generic message that lists 2 items', 'Generic message that lists 2 items (ex: Stevie and Michael)'),s=e=>e._('{{ first }}, {{ second }} and {{ third }}', 'Generic message that lists 3 items', 'Generic message that lists 3 items (ex: Stevie, Michael and Cyndi)'),a=e=>e._('{{ first }}, {{ second }}, {{ third }} and {{ fourth }}', 'Generic message that lists 4 items', 'Generic message that lists 4 items (ex: Stevie, Michael, Cyndi and Bob)'),r=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }} and {{ fifth }}', 'Generic message that lists 5 items', 'Generic message that lists 5 items (ex: Stevie, Michael, Cyndi, Bob and Bruce)'),c=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ sixth }}', 'Generic message that lists 6 items', 'Generic message that lists 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and Lionel)'),d=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ seventh }}', 'Generic message that lists 7 items', 'Generic message that lists 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and Tina)'),_=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ remaining }} others', 'Generic message that lists more than 6 items', 'Generic message that lists more than 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and 2 others)'),u=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ remaining }} others', 'Generic message that lists more than 7 items', 'Generic message that lists more than 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and 2 others)');function m(e,t){let o={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],remaining:e.length-5};switch(e.length){case 0:return[];case 1:return(0,l.nk)(i(t),o);case 2:return(0,l.nk)(n(t),o);case 3:return(0,l.nk)(s(t),o);case 4:return(0,l.nk)(a(t),o);case 5:return(0,l.nk)(r(t),o);case 6:return(0,l.nk)(c(t),o);default:return(0,l.nk)(_(t),o)}}function h(e,t){let o={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],seventh:e[6],remaining:e.length-6};switch(e.length){case 0:return[];case 1:return(0,l.nk)(i(t),o);case 2:return(0,l.nk)(n(t),o);case 3:return(0,l.nk)(s(t),o);case 4:return(0,l.nk)(a(t),o);case 5:return(0,l.nk)(r(t),o);case 6:return(0,l.nk)(c(t),o);case 7:return(0,l.nk)(d(t),o);default:return(0,l.nk)(u(t),o)}}},317540:(e,t,o)=>{o.d(t,{Z:()=>l});let l={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},510972:(e,t,o)=>{o.d(t,{P:()=>p,t:()=>g});var l=o(216167),i=o(107366);let n=()=>{};async function s({board_id:e},t,o){await (0,i.Z)({url:`/v3/boards/${e??""}/follow/`,method:"DELETE"}),o({event_type:27,object_id_str:e}),t()}async function a({board_id:e},t,o){await (0,i.Z)({url:`/v3/boards/${e??""}/follow/`,method:"PUT"}),o({event_type:26,object_id_str:e}),t()}async function r(e,t){let o=l.Z.create("UserFollowResource",e);await o.callDelete(),t()}async function c(e,t){let o=l.Z.create("UserFollowResource",e);await o.callCreate(),t()}async function d(e,t,o){let i=l.Z.create("InterestFollowResource",e);await i.callDelete(),t(),o({event_type:602,object_id_str:e.interest_id})}async function _(e,t,o){let i=l.Z.create("InterestFollowResource",e);await i.callCreate(),t(),o({event_type:601,object_id_str:e.interest_id})}async function u(e,t){let o=l.Z.create("PinFeedbackResource",e);await o.callUpdate(),t()}async function m(e,t){let o=l.Z.create("PinFeedbackResource",e);await o.callUpdate(),t()}let h={complaint:u,followBoard:a,followPinner:c,followTopic:_,newsHubPinHide:function(e,t){let o=(0,i.Z)({url:e.undo?`/v3/news_hub/${e.news_id??""}/pin/${e.pin_id??""}/undo/`:`/v3/news_hub/${e.news_id??""}/pin/${e.pin_id??""}/hide/`,method:"PUT"});o.then(()=>t()),u({feedback_type:1,pin_id:e.pin_id,...e},t)},promotedComplaint:m,relatedPinHide:function(e,t){let o=(0,i.Z)({url:e.undo?`/v3/p2p/${e.pin??""}/unhide/`:`/v3/p2p/${e.pin??""}/hide/`,method:"PUT"});o.then(()=>t()),u({feedback_type:1,pin_id:e.pin,...e},t)},reportPin:function(e,t){t()},showAdReasons:function(e,t){t()},unfollowBoard:s,unfollowPinner:r,unfollowTopic:d,unrelatedSearchPin:function(e,t){let o=(0,i.Z)({url:e.undo?`/v3/search/${e.pin_id??""}/unhide/`:`/v3/search/${e.pin_id??""}/hide/`,method:"PUT",data:{query:e.query,pin_type:e.pin_type}});o.then(()=>t()),u({feedback_type:1,...e},t)}},p=["complaint","relatedPinHide","unrelatedSearchPin","promotedComplaint","newsHubPinHide","unfollowBoard","unfollowPinner","unfollowTopic"];function g(e,t={},o=n,l){let i=e?h[e]:null;return i?i(t,o,l):o()}},899394:(e,t,o)=>{o.d(t,{EF:()=>u,Iv:()=>c,Ud:()=>r,hP:()=>a,nb:()=>_,oK:()=>d});var l=o(339001),i=o(510972),n=o(555933);let s=e=>e.length>32?`${e.substring(0,32).trim()}...`:e;function a({boardFollowedByMe:e,feedbackType:t,viewParameter:o,promotion:l,recommendationReason:i,pinnerFollowedByMe:n}){if(l&&!l.isDownstreamPromotion)return"promoted";if(t)return t;if(i){if("FOLLOWED_INTEREST"===i.reason)return"topic";if("FOLLOWING_FEED"!==i.reason&&"RECENT_FOLLOWED_BOARD"!==i.reason)return i.hasBoard?"pfyBoard":"pfy"}if(e||n)return"followed";switch(o){case 140:case 144:case 141:case 145:case 139:case 3173:return"related";case 3082:return"newsHub";default:return"default"}}function r({feedback:e,i18n:t,makeNavigateLink:o}){switch(e.type){case"pfy":return t._('This Pin was inspired by your recent activity', 'Pin feedback reason', 'Pin feedback reason');case"pfyBoard":let{recommendationReasonBoard:i}=e;return i?(0,l.nk)(t._('This Pin was inspired by your board {{ boardLink }}', 'Pin feedback - inspired by your board', 'Pin feedback - inspired by your board'),{boardLink:o("navigation",i.url,i.name)}):null;case"topic":let{sourceInterest:n}=e;return n?(0,l.nk)(t._('This Pin was inspired by {{ formattedTopic }}', 'Pin feedback', 'Pin feedback'),{formattedTopic:o("topicUrl",`/topics/${n.url_name}`,n.name)}):null;case"followed":let{followed:a}=e,r="pinner"===a.type?(0,l.nk)(t._('This Pin is from {{ formattedPinner }}, a profile you follow', 'Pin feedback', 'Pin feedback'),{formattedPinner:o("pinnerUrl",`/${a.pinner?.username??""}`,s(a.pinner?.full_name??""))}):(0,l.nk)(t._('This Pin is from {{ formattedBoard }}, a board you follow', 'Pin feedback', 'Pin feedback'),{formattedBoard:o("boardUrl",a.board?.url??"",s(a.board?.name??""))});return r;case"promoted":let{promotedIsPersonalized:c,isEligibleForPromotedPartnership:d,promotedPartnershipAttributionName:_,promotedPartnershipAdvertiserName:u}=e.thirdPartyAdAttributes||{};if(!c&&d)return(0,l.nk)(t._('{{ promotedPartnershipAdvertiserName }} paid, through a partnership with {{ promotedPartnershipAttributionName }}, to have this Pin show up where you\'d be more likely to notice it', 'feedbackHelpers.getRecommendationDescription.promoted.thirdParty', 'Recommendation description for ads with promoted partnership. promotedPartnershipAdvertiserName:Name of advertiser, promotedPartnershipAttributionName:Name of promoted partner'),{promotedPartnershipAdvertiserName:u,promotedPartnershipAttributionName:_});if(!e.promoter||c)return t._('This ad was personalized for you using info from one of our partners', 'Pin feedback', 'Pin feedback');{let{full_name:i,username:n}=e.promoter,s=o("promotedLink",n?"/"+n+"/":"/",i);return(0,l.nk)(t._('{{ promoterLink }} paid to have this Pin show up where you\u2019d be more likely to notice it', 'Pin feedback', 'Pin feedback'),{promoterLink:s})}default:return null}}function c({sourceInterest:e,i18n:t,makeNavigateLink:o}){return{action:"unfollowTopic",actionOptions:{interest_id:e.id,interest_list:n.X},title:"",subTitle:(0,l.nk)(t._('We\u2019ll show you less Pins from {{ formattedTopic }} in the future.', 'pin.contextualMenu.feedback.unfollowTopic.subtitle', 'Confirmation text after unfollowing a topic'),{formattedTopic:o("topicUrl",`/topics/${e.url_name??""}`,e.name??"",!0)})}}function d({boardId:e,display:t,i18n:o,makeNavigateLink:i}){return{action:"unfollowBoard",actionOptions:{board_id:e},title:"",subTitle:"pinner"===t.type?(0,l.nk)(o._('You unfollowed {{ formattedPinner }} and won\u2019t see Pins they save anymore.', 'Confirmation text after unfollowing a user', 'Confirmation text after unfollowing a user'),{formattedPinner:i("pinnerUrl",`/${t.data.username??""}`,t.data.full_name??"",!0)}):(0,l.nk)(o._('You unfollowed the board {{ formattedBoard }} and won\u2019t see Pins saved to it anymore.', 'Confirmation text after unfollowing a board', 'Confirmation text after unfollowing a board'),{formattedBoard:i("boardUrl",t.data.url??"",t.data.name??"",!0)})}}function _(e){switch(e){case"promoted":return 60;case"followed":case"topic":return 100;case"pfyBoard":case"pfy":return 58}}function u(e,t,o,l,n,s){return()=>{let a={...e,undo:!0},r=t;"unfollowPinner"===t?r="followPinner":"unfollowBoard"===t?r="followBoard":"unfollowTopic"===t&&(r="followTopic"),(0,i.t)(r,a,void 0,s),n(),s({event_type:101,component:0,element:11181,view_type:o??void 0,view_parameter:l})}}},558273:(e,t,o)=>{o.d(t,{NK:()=>f,P6:()=>n,VX:()=>a,ZE:()=>p,Zt:()=>g,_J:()=>c,_S:()=>y,cL:()=>m,jL:()=>r,oN:()=>i,rM:()=>h,sV:()=>d,sY:()=>_});var l=o(115557);let i=5e3,n=i/l.gJ,s=["Uploaded by user"],a=(e,t)=>t&&t.products&&t.products.length>0||e?.products&&e.products.length>0||!1,r=(e,t)=>!!t&&!e,c=e=>!!e&&5!==e,d=e=>["email","messages","deep_linking"].includes(e),_=e=>!!e&&"gif"===e,u=e=>"pinstory"===e,m=({embedSrc:e,embedSubtype:t,embedType:o})=>!!e&&!_(o)&&!u(t),h=({link:e,mobileLink:t,trackedLink:o})=>!t&&!o&&!e,p=e=>/pin.it/gim.test(e||""),g=({link:e,mobileLink:t,origImageUrl:o,trackedLink:l})=>t||l||e||o||"",f=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function y(e){for(let t of s)if(e===t)return!1;return!0}},555933:(e,t,o)=>{o.d(t,{X:()=>l});let l="favorited"},55202:(e,t,o)=>{o.d(t,{U:()=>s,Z:()=>a});var l=o(317540),i=o(785893);let n=()=>{},s=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()};function a({allowClickAndDrag:e,allowEsc:t,allowMediaPlay:o,allowScroll:a,children:r}){let c=e=>{t&&e.keyCode===l.Z.ESCAPE||s(e)};return(0,i.jsx)("div",{onAbort:s,onAnimationEnd:s,onAnimationIteration:s,onAnimationStart:s,onBlur:n,onCanPlay:o?n:s,onCanPlayThrough:s,onChange:s,onClick:e?n:s,onCompositionEnd:s,onCompositionStart:s,onCompositionUpdate:s,onContextMenu:s,onCopy:s,onCut:s,onDoubleClick:s,onDurationChange:s,onEmptied:s,onEncrypted:s,onEnded:s,onError:s,onFocus:n,onInput:s,onInvalid:s,onKeyDown:c,onKeyPress:c,onKeyUp:c,onLoad:s,onLoadedData:s,onLoadedMetadata:s,onLoadStart:s,onMouseDown:s,onMouseEnter:s,onMouseLeave:s,onMouseMove:e?n:s,onMouseOut:s,onMouseOver:s,onMouseUp:e?n:s,onPaste:s,onPause:s,onPlay:s,onPlaying:s,onProgress:s,onRateChange:s,onScroll:a?n:s,onSeeked:s,onSeeking:s,onSelect:s,onStalled:s,onSubmit:s,onSuspend:s,onTimeUpdate:s,onTouchCancel:s,onTouchEnd:e?n:s,onTouchMove:e?n:s,onTouchStart:e?n:s,onTransitionEnd:s,onVolumeChange:s,onWaiting:s,onWheel:s,children:r})}},194602:(e,t,o)=>{o.d(t,{Z:()=>a});var l=o(667294);let i=()=>()=>{},n=()=>!1,s=()=>!0,a=()=>{let e=(0,l.useSyncExternalStore)(i,n,s);return e}},35222:(e,t,o)=>{o.d(t,{Z:()=>s});var l=o(149722),i=o(785059),n=o(199677);let s=()=>{let e=(0,l.Z)(),t=(0,i.Z)(),o=(0,n.lJ)(e,t);return o}},413110:(e,t,o)=>{o.d(t,{n:()=>i,o:()=>l});let l={aggregatedComment:"aggregatedComment",didIt:"didIt",pin:"pin"},i={aggregatedComment:"aggregatedcomment",didIt:"userdiditdata",pin:"pin"}},239821:(e,t,o)=>{o.d(t,{g:()=>u,I:()=>_});var l=o(667294),i=o(342513),n=o(705895),s=o(259866);let a={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},viewportSize:"lg"},r=(e=a,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){let{payload:o}=t,{pinId:l,isPromoted:i,currentTime:n}=o,{videosAutoplaying:a}=e,{currentlyPlayingOrganicVideoId:r,promotedVideosAutoplaying:c,organicVideosAutoplaying:d}=a,_=(0,s.Z)(c),u=(0,s.Z)(d);return!i&&r?e:(i?_[l]={pinId:l,currentTime:n,paused:!1}:u[l]={pinId:l,currentTime:n,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:i?r:l,promotedVideosAutoplaying:_,organicVideosAutoplaying:u}})}if("SET_IS_AUTOPLAY"===t.type)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){let{payload:o}=t,{pinId:l,isPromoted:i,currentTime:n}=o,{videosAutoplaying:a}=e,{promotedVideosAutoplaying:r,organicVideosAutoplaying:c}=a,d=(0,s.Z)(r),_=(0,s.Z)(c);return i?d[l]={...d[l],paused:!0,currentTime:n}:_[l]={..._[l],paused:!0,currentTime:n},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:d,organicVideosAutoplaying:_}}}if("SET_APP_FOCUS_STATE"===t.type)return{...e,appInFocus:t.payload};if("SET_VIEWPORT_SIZE"===t.type)return{...e,viewportSize:t.payload};if("SET_FOOTER_VISIBILITY_STATE"===t.type)return{...e,footerPlusButtonVisible:t.payload};return e};var c=o(785893);let{Provider:d,useHook:_}=(0,i.Z)("AppUI");function u({children:e}){let[t,o]=(0,l.useReducer)(r,a),i=(0,l.useCallback)(e=>o({type:"PAUSE_CURRENT_VIDEO",payload:e}),[]),s=(0,l.useCallback)(e=>o({type:"SET_APP_FOCUS_STATE",payload:e}),[]),_=(0,l.useCallback)(e=>o({type:"SET_CURRENT_VIDEO",payload:e}),[]),u=(0,l.useCallback)(e=>o({type:"SET_FOOTER_VISIBILITY_STATE",payload:e}),[]),m=(0,l.useCallback)(e=>o({type:"SET_IS_AUTOPLAY",payload:e}),[]),h=(0,l.useCallback)(e=>o({type:"SET_VIEWPORT_SIZE",payload:e}),[]),p=(0,l.useCallback)(e=>o({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e}),[]),g=(0,l.useMemo)(()=>({pauseAutoplay:i,setCurrentVideo:_,setFooterPlusButtonVisible:u,setIsAutoplay:m,setViewportSize:h,toggleTypeaheadOverlay:p,setAppFocusState:s,appUI:t}),[i,_,u,m,h,p,s,t]);return(0,l.useEffect)(()=>{n.Z.onSessionResume(()=>{s(!0)}).onSessionPause(()=>{s(!1)})},[s]),(0,c.jsx)(d,{value:g,children:e})}},386008:(e,t,o)=>{o.d(t,{Tt:()=>_,cm:()=>d,kW:()=>r,kY:()=>u,mN:()=>c});var l=o(702664),i=o(342513),n=o(149722),s=o(785893);let{Provider:a,useHook:r}=(0,i.Z)("Users");function c(){let e=r();return t=>e[t]}function d(){let e=r();return(t,o=!1)=>{let l=Object.keys(e).find(o=>e[o].username===t);if(l||!o)return e[l??""]}}function _(){let{id:e}=(0,n.Z)(),t=r();return t[e??""]}function u({children:e}){let t=(0,l.useSelector)(({users:e})=>e,l.shallowEqual);return(0,s.jsx)(a,{value:t,children:e})}},604625:(e,t,o)=>{o.d(t,{Cq:()=>d,Dk:()=>u,Fk:()=>i,fS:()=>c,km:()=>_,lI:()=>s,lJ:()=>n,mS:()=>r,qW:()=>a});var l=o(883119);let i=new l.Ry(1),n=3,s=new l.Ry(n),a=2,r=new l.Ry(a),c=3,d=4,_=new l.Ry(5),u=new l.Ry(100)},861748:(e,t,o)=>{o.d(t,{Z:()=>E,w:()=>A});var l,i=o(667294),n=o(702664);o(167912);var s=o(616550),a=o(442279),r=o(883119),c=o(139922),d=o(333739),_=o(995917),u=o(554786),m=o(494125),h=o(149722),p=o(415199),g=o(413110),f=o(110155),y=o(930822),P=o(937310),x=o(386008),b=o(785893);let A=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:o,isDesktop:l,isReversed:i=!1,noCache:n=!1})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:o,page_size:l?10:25,redux_normalize_feed:!0,is_reversed:i},noCache:n}),T=(0,a.P1)((e,t,o)=>o,({feeds:e},t)=>e[`${P.Z.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,t,o,l)=>l,(e,t,o,l)=>t?.map(({id:t,type:i})=>{let n="aggregatedcomment"===i.toLowerCase()?e[t]:o[t];if(!n)return;let s="string"==typeof n.user?l[n.user]??{}:n.user??{};return{...n,user:s??{}}}).filter(e=>e)||[]),v=void 0!==l?l:l=o(346035),w=({aggregatedPinDataId:e,closeupAttributionId:t,closeupAttributionUsername:o,commentsDisabled:l,hasComments:a,isReadOnly:d,pinId:P,isVideo:v,pinnerId:w,scrollContainer:E,setIsComposingNewComment:I=()=>{},storyPinDataId:k,viewParameter:C,toggleComposerForReply:z,openMwebOverflowMenu:j})=>{let{comment_id:R}=(0,s.UO)(),S=(0,n.useDispatch)(),D=(0,u.HG)(),L=(0,h.Z)(),O=(0,i.useRef)(a),N=(0,_.Z)(O.current&&e?A({aggregatedPinDataId:e,featuredCommentIds:R?[R]:[],isDesktop:D}):null),{removeUnauthCommentPinId:M,unauthCommentPinId:Z}=(0,f.C)(),U=(0,p.lV)(),{toggleAggregatedCommentHelpful:B,toggleAggregatedCommentLike:F}=(0,p.nf)(),G=(0,x.kW)(),H=(0,n.useSelector)(t=>T(t,e,U,G)),[W,$]=(0,i.useState)(void 0),V=()=>{I(!0)};return(0,m.Z)(()=>{!D&&L.isAuth&&Z&&P&&Z===P&&(V(),M())}),(0,i.useEffect)(()=>{let e=()=>{let t=!!E&&E.scrollTop+E.clientHeight+10>=E.scrollHeight;N&&!N.isFetching&&(N.isAtEnd?E?.removeEventListener("scroll",e):t&&N.fetchMore())};return E?.addEventListener("scroll",e),()=>{E?.removeEventListener("scroll",e)}},[N,E]),(0,b.jsx)(i.Fragment,{children:(0,b.jsx)(r.xu,{display:"flex",marginTop:D?6:0,width:"100%",children:(0,b.jsx)(c.Z,{aggregatedPinDataId:e,closeupAttributionId:t,closeupAttributionUsername:o,comments:H,commentsDisabled:l,isDesktop:D,isLoaded:N&&N.isLoaded||!a,isReadOnly:d,isVideo:v,openOverflowMenu:j,parentId:e??"",parentType:g.o.pin,pinId:P,pinnerId:w,reactionListCommentId:W,showReactionListForComment:$,storyPinDataId:k,toggleHelpful:(e,t,o)=>()=>{o?S((0,y.YH)({didItDataId:e,isMarkedHelpfulByMe:t})):B({aggregatedCommentId:e,isMarkedHelpfulByMe:t})},toggleLike:(e,t,o)=>()=>{o?S((0,y.wH)({didItDataId:e,isLikedByMe:t})):F({aggregatedCommentId:e,isLikedByMe:t})},toggleReplyComposer:z,userAvatarSize:"sm",viewParameter:C})})})};function E({pinKey:e,...t}){let{data:o}=(0,d.sr)(v,e,{type:"pin",useLegacyAdapter:e=>({aggregatedPinData:e.aggregated_pin_data&&{commentCount:e.aggregated_pin_data.comment_count,didItData:e.aggregated_pin_data.did_it_data&&{imagesCount:e.aggregated_pin_data.did_it_data.images_count},entityId:e.aggregated_pin_data.id??""},closeupAttribution:e.closeup_attribution&&{entityId:e.closeup_attribution.id??"",username:e.closeup_attribution.username},commentsDisabled:e.comments_disabled,doneByMe:e.done_by_me,entityId:e.id,pinner:e.pinner&&{entityId:e.pinner.id},storyPinData:e.story_pin_data&&{entityId:e.story_pin_data.id??""},videos:e.videos&&{videoList:e.videos.video_list&&{__typename:"VideoList"}}})}),l=(o?.aggregatedPinData?.commentCount||0)+(o?.aggregatedPinData?.didItData?.imagesCount||0);return(0,b.jsx)(w,{aggregatedPinDataId:o?.aggregatedPinData?.entityId,closeupAttributionId:o?.closeupAttribution?.entityId,closeupAttributionUsername:o?.closeupAttribution?.username,commentsDisabled:o?.commentsDisabled,disablePhotoCommentSelection:!!o?.doneByMe,hasComments:l>0&&!o?.commentsDisabled,isVideo:!!o?.videos?.videoList,pinId:o?.entityId,pinnerId:o?.pinner?.entityId,storyPinDataId:o?.storyPinData?.entityId,...t})}},110155:(e,t,o)=>{o.d(t,{C:()=>a,p:()=>r});var l=o(667294),i=o(342513),n=o(785893);let{Provider:s,useHook:a}=(0,i.Z)("Session");function r({children:e}){let[t,o]=(0,l.useState)(void 0),i=(0,l.useCallback)(()=>o(void 0),[]),a=(0,l.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:o,removeUnauthCommentPinId:i}),[t,i]);return(0,n.jsx)(s,{value:a,children:e})}},930822:(e,t,o)=>{o.d(t,{DD:()=>_,lg:()=>u,Th:()=>h,YH:()=>r,wH:()=>a,IU:()=>m,L8:()=>d});var l=o(216167),i=o(107366),n=o(64819),s=o(937310);function a({didItDataId:e,isLikedByMe:t}){return o=>((0,i.Z)({url:`/v3/did_it/${e}/like/`,method:t?"DELETE":"POST"}),o({type:"USER_DID_IT_DATA_LIKE_TOGGLED",payload:{id:e,liked_by_me:!t}}))}function r({didItDataId:e,isMarkedHelpfulByMe:t}){return o=>((0,i.Z)({url:`/v3/helpful/2/${e}/`,method:t?"DELETE":"POST"}),o({type:"USER_DID_IT_DATA_HELPFUL_TOGGLED",payload:{id:e,marked_helpful_by_me:!t}}))}function c(e){return{type:"USER_DID_IT_DATA_DELETE",payload:{id:e}}}function d(e,t){return{type:"USER_DID_IT_DATA_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}function _({aggregatedPinDataId:e,details:t,fromUnifiedComment:o,image_signatures:i,pin_id:a,username:r,updateParentDidItCount:c}){let _={aggregatedPinDataId:e,details:t,image_signatures:i,pin_id:a};return t=>l.Z.create("DidItActivityResource",_).callCreate().then(l=>{let i=l.resource_response.data;t({type:"PIN_DID_IT",payload:{id:a,value:!0}}),t({type:"USER_DID_IT_DATA_CREATE",payload:{user_did_it_data:i}}),t((0,n.vX)({feedId:e,feedType:o?s.Z.UNIFIED_COMMENTS:s.Z.TRIED_IT_FEED,itemIds:[i.id],itemType:i.type})),t((0,n.vX)({feedId:r,feedType:s.Z.TRIED_IT_FEED,itemIds:[i.id],itemType:i.type})),c&&t(d(e,1))},()=>{})}function u({aggregatedPinDataId:e,feedType:t,id:o,isOwnedByMe:i,pinId:a,username:r,updateParentDidItCount:_}){return u=>{l.Z.create("DidItActivityResource",{user_did_it_data_id:o,pinId:a}).callDelete().then(()=>{i&&u({type:"PIN_DID_IT",payload:{id:a,value:!1}}),u(c(o)),u((0,n.EX)({feedId:e??"",feedType:t||s.Z.TRIED_IT_FEED,itemIds:[o],itemType:"userdiditdata"})),u((0,n.EX)({feedId:r,feedType:s.Z.TRIED_IT_FEED,itemIds:[o],itemType:"userdiditdata"})),u((0,n.EX)({feedId:r,feedType:s.Z.UNIFIED_COMMENTS,itemIds:e?[e]:[],itemType:"userdiditdata"})),_&&u(d(o,-1))},()=>{})}}function m({id:e,details:t,image_signatures:o,pinId:i}){let n={details:t,image_signatures:o,user_did_it_data_id:e,pin_id:i};return e=>{l.Z.create("DidItActivityResource",n).callUpdate().then(t=>{let o=t.resource_response.data;e({type:"USER_DID_IT_DATA_UPDATE",payload:{user_did_it_data:o}})},()=>{})}}function h(e,t,o,l,a){return r=>{(0,i.Z)({url:`/v3/did_it/${o}/flag/`,method:"PUT",data:{reason:l,detailed_reasons:t,explanation:void 0}}).then(()=>{r(c(o)),e&&r((0,n.EX)({feedId:e,feedType:s.Z.TRIED_IT_FEED,itemIds:[o],itemType:"userdiditdata"})),r((0,n.EX)({feedId:a,feedType:s.Z.TRIED_IT_FEED,itemIds:[o],itemType:"userdiditdata"}))},()=>{})}}},232518:(e,t,o)=>{o.d(t,{R:()=>l});function l(e,t){return{type:"PIN_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}},291867:(e,t,o)=>{o.d(t,{Q:()=>n,a:()=>i});var l=o(107366);function i(e,t){return async o=>{let{resource_response:i}=await (0,l.Z)({url:`/v3/storypins/${e}/mentions/`,method:"DELETE"});return o({type:"DELETE_PIN_MENTION",payload:{pinId:e,userId:t}}),i}}function n(e){return async t=>{let{resource_response:o}=await (0,l.Z)({url:`/v3/aggregated_comments/${e}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),{data:i}=o;return t({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:i.id,tagged_users:i.tagged_users}}),o}}},825784:(e,t,o)=>{o.d(t,{X:()=>d,f:()=>c});var l=o(667294),i=o(342513),n=o(558273);function s(e=null,t){switch(t.type){case"REPORT_CONTENT_SHOW":return{id:t.payload.id,isProduct:t.payload.isProduct,isPromoted:t.payload.isPromoted,parentId:t.payload.parentId,videoDuration:t.payload.videoDuration,viewParameter:t.payload.viewParameter,viewType:t.payload.viewType,type:t.payload.type,isThirdPartyAd:t.payload.isThirdPartyAd,nodeId:t.payload.nodeId};case"REPORT_CONTENT_DISMISS":return null;default:return e}}var a=o(785893);let{Provider:r,useHook:c}=(0,i.Z)("ReportData");function d({children:e}){let[t,o]=(0,l.useReducer)(s,null),i=(0,l.useCallback)(()=>o({type:"REPORT_CONTENT_DISMISS"}),[]),c=(0,l.useCallback)((e,t,l)=>o({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,parentId:t,videoDuration:null,viewParameter:null,viewType:null,type:l,nodeId:null}}),[]),d=(0,l.useCallback)((e,t,l)=>o({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:l,type:"conversation",nodeId:null}}),[]),_=(0,l.useCallback)(({id:e,viewParameter:t,viewType:l,nodeId:i})=>o({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:l,type:"pin",nodeId:i}}),[]),u=(0,l.useCallback)(({pinId:e,isDownstreamPromotion:t,hasPromoter:l,firstVideoDuration:i,isProduct:s,viewParameter:a,viewType:r,isThirdPartyAd:c,nodeId:d})=>{let _=(0,n.jL)(t,l);o({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:s,isPromoted:_,videoDuration:i,viewParameter:a,viewType:r,type:"pin",isThirdPartyAd:c,nodeId:d}})},[]),m=(0,l.useMemo)(()=>({reportData:t,dismiss:i,reportComment:c,reportConversation:d,reportImage:_,reportPin:u}),[t,i,c,d,_,u]);return(0,a.jsx)(r,{value:m,children:e})}},311716:e=>{e.exports="https://s.pinimg.com/webapp/commentHelpful-99007872.svg"},600636:e=>{e.exports="https://s.pinimg.com/webapp/commentHelpfulOutline-7f59f782.svg"},559113:e=>{e.exports="https://s.pinimg.com/webapp/commentLoved-7942dc4f.svg"},133758:e=>{e.exports="https://s.pinimg.com/webapp/commentLovedOutline-97205606.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/84016-959ea0501200c0f8.mjs.map